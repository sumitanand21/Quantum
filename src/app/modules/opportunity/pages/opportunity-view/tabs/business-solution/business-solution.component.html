<div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left pr-10 new-container floating-scroll businesssolution-page pad-bot-65">
    <form #myForm="ngForm">
    <!-- <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad pos-abs bg-mid_night h-218"> </div> -->
    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  no_pad dealScroll " *ngIf="disableReadOnly && IsAppirioFlag == false">
        <!-- [ngClass]="service.sideTrans ? 'main-containt-250' : 'main-containt1'" -->
  
      <!-- business solution panel starts here -->
      <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
        <mat-expansion-panel hideToggle="true" [expanded]="panelOpenState2" class="no_pad"
          (opened)="panelOpenState2 = true" (closed)="panelOpenState2 = false">
          <!-- This -->

          <!-- This -->
          <div class="col-12 no_pad float-left mt20" *ngIf="businessSOlutionData.length>0">
            <!--search starts here-->
            <!--<div
              class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8  float-left plb-60-20 customized-input cust_autoComplete pos-rel mb1">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="search"
                  class="label-form">Smart search</label>
                <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input" id="search" (click)="navigatetobusinesssolutionsearch()"
                  name="search" autocomplete="off" type="text"
                  placeholder="Search (service line, solution, alliance, platform solutions and holmes)" [disabled]="disableOnRoleBSPanel">
                <span class="mdi mdi-magnify"></span>
          </div>
            </div>-->
            <!--search ends here-->
  
            <!-- function check box starts here -->
            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4  float-left customized-checkbox no_pad">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad label-form">Wipro function
                  involved?</label>
                  <div class="col-12 no_pad float-left mt10">
                <mat-checkbox class="col-md-6 mr_0 pd0 " aria-label="CIO" (click)="openciopopup(businessSOlutionData[0].CIO)" name="CIO" [(ngModel)]="businessSOlutionData[0].CIO" [disabled]="disableOnRoleBSPanel">CIO</mat-checkbox>
                <!-- This -->
                <button class="no_pad btn-none cp cio_edit" aria-label="edit" *ngIf="businessSOlutionData[0].CIO"
                  matTooltip="Edit" (click)="openciopopupforEdit()">
                  <span class="col-xs-12 nopad blue_circle_replay_img mdi mdi-pencil"></span>
                </button>
                <!-- This -->
                <mat-checkbox class="col-md-6 pd0" aria-label="FMG" name="FMG" [(ngModel)]="businessSOlutionData[0].FMG" [disabled]="disableOnRoleBSPanel">FMG</mat-checkbox>
                <mat-checkbox class="col-md-6 pd0" aria-label="HR" name="HR" [(ngModel)]="businessSOlutionData[0].HR" [disabled]="disableOnRoleBSPanel">HR</mat-checkbox>
                <mat-checkbox class="col-md-6 pd0" aria-label="Agile" name="AGL" [(ngModel)]="businessSOlutionData[0].Agile" [disabled]="disableOnRoleBSPanel">Agile</mat-checkbox>
              </div>
              </div>
            </div>
            <!-- function check box ends here -->
  
            <div class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8  float-left no_pad pad_bottom_0">
  
              <!-- select method radio buttons -->
            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4  float-left no_pad pad_bottom_0">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad label-form">Select method of TCV calculation*</label>
                <mat-radio-group class="float-left mt12 pt-10" name="BSPradio" [(ngModel)]="businessSOlutionData[0].TCVCalculation" aria-labelledby="key" [disabled]="disableOnRoleBSPanel">
                  <!-- <mat-radio-button value="tcv" class="pr30 label-form-blue" (click)="opentcvpopup()">% of TCV</mat-radio-button> -->
                 <mat-radio-button [value]=true class="pr30 label-form-blue" >% of TCV</mat-radio-button>
                   <mat-radio-button [value]=false class="label-form-blue ">Revenue
                  </mat-radio-button>
                </mat-radio-group>
              </div>
            </div>
            <!-- select method radio buttons -->
              <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2  float-left pad-left0 pad_bottom_0 mb20">
                  <div class="customized-input">
                      <label for="license" class="label-form">SL TCV ({{CurrencySymbol}})</label>
                      <input id="license" min=0 name="BSPSLTCV" type="number" class="border-gray w-100" [(ngModel)]="businessSOlutionData[0].Sltcv" placeholder="00.00" (keyup)="OnBSPanelSLTCVChange(businessSOlutionData[0].Sltcv)" onpaste="return true;"  ondrop="return false;" (blur)="OnBSPanelSLTCVBlur(businessSOlutionData[0].Sltcv)" [disabled]="!businessSOlutionData[0].TCVCalculation || disableOnRoleBSPanel">
                    </div>               
              </div>
  
              <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2  float-left pad-left0 pad_bottom_0 mb20">
                  <div class="customized-input">
                      <label for="license" class="label-form">IP TCV ({{CurrencySymbol}})</label>
                      <input id="license" name="BSPIPTCV" type="text" class="border-gray w-100" [(ngModel)]="businessSOlutionData[0].IpTcv" placeholder="00.00" disabled>
                    </div>               
              </div>
              <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4 float-left no_pad pad_bottom_0">
                <div class="col-5 no_pad float-left">
                    <label class="col-12 no_pad float-left label-form">Overall TCV ({{CurrencySymbol}})</label>
                <span class="col-12 no_pad float-left subtext1 pt-10">{{(overalltcvComma)?overalltcvComma:'0.00'}}</span>
                </div>
                <!-- This -->
                <button aria-label="TCV comparison"
                class="col-7 primary-button std save-responsive-btn float-right mt20" *ngIf="IsPricingId" (click)="openTCVcomparison()"><span class="mdi mdi-eye"></span> TCV comparison</button>
                <!-- This -->
            </div>
            </div>
          </div>
        </mat-expansion-panel>
      </div>
      <!-- business solution panel ends here -->
  
  
      <!-- service lines panel starts here -->
      <div class="col-12 no_pad float-left normal_table">
      <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left pad-26 no_pad service-tab">
        <mat-expansion-panel hideToggle="true" [expanded]="panelOpenState3" class="no_pad"
          (opened)="panelOpenState3 = true" (closed)="panelOpenState3 = false">
          <mat-expansion-panel-header class="min_height60 mob_width100">
            <div class="min_height60 col-12 no_pad">
              <div class="accord-heading col-12">
                <span
                  [ngClass]="panelOpenState3 ? 'mdi mdi-chevron-down chevron-right float-left':'mdi mdi-chevron-right chevron-right float-left'"></span>
                <div class="float-left no_pad mob-busines-header w-80"> <span class="accordian-title cardsHead col-6 no_pad">
                    Service lines</span></div>
                <div class="col-6 float-right no_pad bot10 mobile-button-width" *ngIf="!disableOnRoleBSSL">
                  <button aria-label="Add service line" (click)="addNewSL();panelOpenState3 = false"
                    class="primary-button h-40 std save-responsive-btn float-right pad_10" [disabled]="disableOnRoleBSSL">+ Add
                    service line</button>
                </div>
              </div>
            </div>
          </mat-expansion-panel-header>
  
         <!-- <span *ngIf="!disableOnRoleBSSL" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left pad_bottom_0 mobile_hide">Once service line, practice, sub-practice and SL BDM is selected, it can't be edited! If you wish to edit the existing combination, kindly delete and add a new row.</span>-->
          <!-- expansion data starts here -->
          <div class="col-12 no_pad float-left btop_withoutpadding">
            <!-- Table starts here -->
            <div id="servicetable" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad scroll-tabs overflowscroll" [ngClass]="!service.Summary_window ? '' : 'table-responsive'">
                <!-- <perfect-scrollbar class="minheight"> -->
              <table class="table table-borderless">
                <thead>
                  <tr>
                    <!-- <th class="customized-checkbox">
                     <mat-checkbox aria-label="select all" name="checkbox" (change)="selectAll()" [(ngModel)]="selectedAll">
                      </mat-checkbox> 
                    </th> -->
                    <th>Service line</th>
                    <th>Practice</th>
                    <th>Sub practice</th>
                    <th>SL BDM</th>
                    <th>% of TCV</th>
                    <th>Est. SL TCV</th>
                    <th>Cloud</th>
                    <th>Engagement model</th>
                    <th>Dual credit</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody *ngIf = "BSSLDetails.length == serviceLineLength || BSSLDetails.length > serviceLineLength">
                  <!-- <tr [ngClass]="data.errortext?'td-mb':''" *ngFor="let BSSLdata of BSSLDetails"> -->
                    <tr  *ngFor="let BSSLdata of BSSLDetails | orderByIndex;let p=index">
   
                    <!-- <td *ngIf="!(!BSSLdata.BSServiceLine.wiproTaggedStatus && BSSLdata.BSServiceLine.TaggedTCV>0 && !disableOnRoleBSSL)"  class="customized-checkbox">
                      <mat-checkbox aria-label="select" name="checkbox" (change)="checkIfAllSelected(data)" [(ngModel)]="data.isCheccked">
                      </mat-checkbox> 
                    </td> -->
                    <td [attr.data-label]="'Service line'">
                      <span *ngIf="(!BSSLdata.BSServiceLine.wiproTaggedStatus && BSSLdata.BSServiceLine.TaggedTCV>0 && !disableOnRoleBSSL)" class="validation-bar"></span>

                      <!-- updated mat select starts here -->
                      <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad">
                        <mat-form-field class="col-12 no_pad float-left">
                          <mat-select disableOptionCentering panelClass="Select-panel-class" class="select-focus mat-select {{service.getSelectedClass(BSSLdata.BSServiceLine.WiproServicelineidValue)}}" role="listbox"
                            [name]="BSSLdata.SLSLName"
                            [ngClass]="{'' : service.Summary_window ,'orangeborder':(!BSSLdata.BSServiceLine.WiproServicelineidValue)}"
                            [(ngModel)]="BSSLdata.BSServiceLine.WiproServicelineidValue"
                            (selectionChange)="getBSSLPracticeData(BSSLdata.BSServiceLine,p)"
                            [disabled]="disableOnRoleBSSL || (IsAppirio && BSSLdata.BSServiceLine.checkforAppirio.length>0)" [title] = "BSSLdata.BSServiceLine.WiproServicelineidValueName">
                            <mat-option selected hidden disabled value="">Select</mat-option>
                            <mat-option *ngFor="let SLData of IpandServiceLinelDD" [hidden]="!SLData.IsVisible" [title] ="SLData.Name" [value]="SLData.SysGuid">{{SLData.Name}}</mat-option>
                          </mat-select>
                           <p class="error-message top-40" *ngIf="(!BSSLdata.BSServiceLine.WiproServicelineidValue)"title="Service line is required">Service line is required</p>
                        </mat-form-field>
                      </div>

                      <!-- updated mat select ends here -->
                      <!-- Select DROPDOWN STARTS -->
                      <!-- <p *ngIf="data.errortext" class="col-6 no_pad float-left validation-text">* Cloud details are mandatory for this combination of service line/ practice/ sub-practice.</p> -->
                    </td>
                    <td [attr.data-label]="'Practice'">

                          <!-- updated mat select starts here -->
                          <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad">
                            <input *ngIf="IsAppirio && BSSLdata.BSServiceLine.checkforAppirio.length>0" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                             [name]="BSSLdata.SLPracticeName" disabled [(ngModel)]="BSSLdata.BSServiceLine.WiproPracticeName" [title]="BSSLdata.BSServiceLine.WiproPracticeName">
                               
                            <mat-form-field *ngIf="!(IsAppirio && BSSLdata.BSServiceLine.checkforAppirio.length>0)" class="col-12 no_pad float-left">
                              <mat-select disableOptionCentering panelClass="Select-panel-class" class="select-focus mat-select {{service.getSelectedClass(BSSLdata.BSServiceLine.WiproPracticeId)}}" role="listbox"
                                [name]="BSSLdata.SLPracticeName" [title]="BSSLdata.BSServiceLine.WiproPracticeName"
                                [ngClass]="{'' : service.Summary_window ,'orangeborder':(!BSSLdata.BSServiceLine.WiproPracticeId && BSSLdata.SlpracticeDD.length>0)}"
                                [(ngModel)]="BSSLdata.BSServiceLine.WiproPracticeId" (selectionChange)="getBSSLSubPracticeData(BSSLdata.BSServiceLine,p)"
                                [disabled]="!BSSLdata.BSServiceLine.WiproServicelineidValue || (disableOnRoleBSSL && (BSSLdata.BSServiceLine.WiproSlbdmid && userGuid!==BSSLdata.BSServiceLine.WiproSlbdmid) && !isPreSales) ||(BSSLdata.BSServiceLine.WiproServicelineidValue && BSSLdata.SlpracticeDD.length == 0) || (IsAppirio && BSSLdata.BSServiceLine.checkforAppirio.length>0)">
                                
                                <mat-option selected hidden disabled value="">Select</mat-option>
                                <mat-option *ngFor="let practiceData of BSSLdata.SlpracticeDD" [hidden]="(!practiceData.IsVisible && IsAppirio)" [value]="practiceData.SysGuid" [title] ="practiceData.Name">
                                  {{practiceData.Name}}</mat-option>
                              </mat-select>
                              <p class="error-message top-40" *ngIf="(!BSSLdata.BSServiceLine.WiproPracticeId && BSSLdata.SlpracticeDD.length>0)"title="Practice is required">Practice is required</p>
                            </mat-form-field>
                          </div>
                        <!-- updated mat select ends here -->
                      <!-- Select DROPDOWN STARTS -->
                    </td>
                    <td [attr.data-label]="'Sub practice'">

                         <!-- updated mat select starts here -->
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad">
                           <input *ngIf="IsAppirio && BSSLdata.BSServiceLine.checkforAppirio.length>0" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                                 [name]="BSSLdata.BSServiceLine.WiproSubpracticeName" disabled [(ngModel)]="BSSLdata.BSServiceLine.WiproSubpracticeName" [title] = "BSSLdata.BSServiceLine.WiproSubpracticeName">

                          <mat-form-field *ngIf="!(IsAppirio && BSSLdata.BSServiceLine.checkforAppirio.length>0)" class="col-12 no_pad float-left">
                            <mat-select disableOptionCentering panelClass="Select-panel-class" class="select-focus mat-select {{service.getSelectedClass(BSSLdata.BSServiceLine.WiproSubpracticeid)}}"
                              role="listbox" [name]="BSSLdata.SLSubPracticeName"  [title]="BSSLdata.BSServiceLine.WiproSubpracticeName"
                              [ngClass]="{'' : service.Summary_window ,'orangeborder':(!BSSLdata.BSServiceLine.WiproSubpracticeid && BSSLdata.SlSubpracticeDD.length>0)}"
                              [(ngModel)]="BSSLdata.BSServiceLine.WiproSubpracticeid" (selectionChange)="mandatoryCloudCheck(BSSLdata.BSServiceLine,p)"
                              [disabled]="!BSSLdata.BSServiceLine.WiproServicelineidValue || !BSSLdata.BSServiceLine.WiproPracticeId || (disableOnRoleBSSL && userGuid!==BSSLdata.BSServiceLine.WiproSlbdmid && !isPreSales) || (BSSLdata.BSServiceLine.WiproPracticeId && BSSLdata.SlSubpracticeDD.length == 0) || (IsAppirio && BSSLdata.BSServiceLine.checkforAppirio.length>0)">
                              <mat-option selected hidden disabled value="">Select</mat-option>
                              <mat-option *ngFor="let subPracticeData of BSSLdata.SlSubpracticeDD" [value]="subPracticeData.SubPracticeId" [title] = "subPracticeData.Name">
                                {{subPracticeData.Name}}</mat-option>
                            </mat-select>
                            <p class="error-message top-40" *ngIf="(!BSSLdata.BSServiceLine.WiproSubpracticeid && BSSLdata.SlSubpracticeDD.length>0)"title="Sub-practice is required">Sub-practice is required</p>
                          </mat-form-field>
                        </div>
                     <!-- updated mat select ends here -->
                      <!-- Select DROPDOWN STARTS -->
                    </td>
                    <td class="no_pad" [attr.data-label]="'SL BDM'">
                      <!-- SL BDM autocomplete starts here-->
                       <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left customized-input cust_autoComplete pos-rel no_pad">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                          <form class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                          <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                                      for="slbdmName" class="label-form">                                    
                          </label>
                          <div class="pos-rel w-100 float-left no_pad">
                          <input appKeyListControl #slbdmListBSP (arrowDown)="arrowkeyLocation=$event"
                            (keyup.enter)="slbdmListBSP.value=BSSLdata.SlSLBDMDD[arrowkeyLocation].Name;BSSLdata.SLSLBDMSwitchName=false;changeBSSLBDMData(BSSLdata.SlSLBDMDD[arrowkeyLocation],BSSLdata.BSServiceLine,p)"
                            [attr.data-arrayMaxLength]="BSSLdata.SlSLBDMDD?.length" [attr.data-isDownBtn]=true                                      
                            (input)="BSSLdata.SLSLBDMSwitchName=true" role="combobox" aria-autocomplete="list"
                            [attr.aria-expanded]="BSSLdata.SLSLBDMSwitchName?true:false" aria-owns="read"
                            [attr.aria-activedescendant]="arrowkeyLocation"
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                            id="slbdmName" name="slbdmName" type="text" 
                            [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(BSSLdata.BSServiceLine.WiproServicelineidValue && !BSSLdata.BSServiceLine.WiproSlbdmidValueName)}"
                            [(ngModel)]="BSSLdata.BSServiceLine.WiproSlbdmidValueName" (ngModelChange)="OnChangegetBSSLSlBDMData(BSSLdata.BSServiceLine,p,BSSLdata.BSServiceLine.WiproSlbdmidValueName)"
                            placeholder="Search" (click)="BSSLdata.SLSLBDMSwitchName = true;OnChangegetBSSLSlBDMData(BSSLdata.BSServiceLine,p,BSSLdata.BSServiceLine.WiproSlbdmidValueName); service.Summary_window = false;" 
                            [title]="BSSLdata.BSServiceLine.WiproSlbdmidValueName" (clickOutside)="BSSLbdmNameclose(BSSLdata.BSServiceLine,p,$event)"
                            [disabled]="!BSSLdata.BSServiceLine.WiproServicelineidValue || (!BSSLdata.BSServiceLine.WiproPracticeId && BSSLdata.SlpracticeDD.length > 0) || (!BSSLdata.BSServiceLine.WiproSubpracticeid && BSSLdata.SlSubpracticeDD.length > 0) || disableOnRoleBSSL  || (IsAppirio && BSSLdata.BSServiceLine.checkforAppirio.length>0)">
                          <span class="mdi mdi-magnify"  *ngIf="!(!BSSLdata.SLSLBDMSwitchName && BSSLdata.BSServiceLine.WiproSlbdmidValueName)"></span>
                          <span class="mdi mdi-close auto-close" (click)="clearSelectedItem(p,'SLBDM')" *ngIf="!BSSLdata.SLSLBDMSwitchName && BSSLdata.BSServiceLine.WiproSlbdmidValueName"></span> 
                           <p class="error-message top-40" *ngIf="(BSSLdata.BSServiceLine.WiproServicelineidValue && (BSSLdata.BSServiceLine.WiproPracticeId && BSSLdata.SlpracticeDD.length > 0) && (BSSLdata.BSServiceLine.WiproSubpracticeid && BSSLdata.SlSubpracticeDD.length > 0) && !BSSLdata.BSServiceLine.WiproSlbdmidValueName)" title="SL BDM is required">SL BDM is required</p>
                          </div>
                          <div
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm border float-left top64 no_pad standard-border color-azure pos-abs z-ind-99 white-bg"
                            *ngIf="BSSLdata.SLSLBDMSwitchName"
                            [ngClass]="(BSSLdata.SlSLBDMDD).length <= 1?'suggestion-box1':(BSSLdata.SlSLBDMDD).length == 2?'suggestion-box2':'suggestion-box h150'">
                            <perfect-scrollbar [ngStyle]="(BSSLdata.SlSLBDMDD).length <= 1?{'max-height':'40px'}:(BSSLdata.SlSLBDMDD).length == 2?{'max-height':'80px'}:{'max-height':'107px'}" class="z-ind-9">
                              <ul *ngIf="BSSLdata.BSServiceLine.SLBDMLoaderSL" class=" list-group color-azure  sort-dropdown mr2">
                                    <li  class="liststyle_none loader-search"></li>
                              </ul>
                              <ul *ngIf="!BSSLdata.BSServiceLine.SLBDMLoaderSL" class=" list-group sort-dropdown">
                                <li id="{{i}}" tabindex="0" role="option" [class.active]="i==arrowkeyLocation"
                                  aria-disabled="false" class="list-group-item no_pad cp"
                                  (keypress)="changeBSSLBDMData(item,BSSLdata.BSServiceLine,p)"
                                  (click)="changeBSSLBDMData(item,BSSLdata.BSServiceLine,p)"
                                  *ngFor="let item of BSSLdata.SlSLBDMDD;let i=index">
                                  <label for="inti_name" class="float-left name cp">
                                    <span class="d-block list-name">{{item.Name}}</span>
                                  </label>
                                </li>
                                <li class="d-block list-name no_pad pad-10"
                                  *ngIf="(BSSLdata.SlSLBDMDD).length == 0">
                                  No record found </li>
                              </ul>
                            </perfect-scrollbar>
                            <span class="db-search">
                              <button id="advanceBSSLSLBDMSearch{{p}}"  (click)="openadvancetabsSearch(BSSLdata.BSServiceLine,'BSSLSLBDM',BSSLdata.SlSLBDMDD,BSSLdata.selectedSLBDM,BSSLdata.BSServiceLine.WiproSlbdmidValueName,p)" role="option" tabindex="0" disabled = "BSSLdata.BSServiceLine.SLBDMLoaderSL"
                               [disabled] = "BSSLdata.BSServiceLine.SLBDMLoaderSL" aria-disabled="false" aria-label="Advance look up" type="button" class="button-search" >
                                <span class="mdi mdi-file-outline"></span> Advance look up
                              </button>
                            </span>
                          </div>
                          </form>
                        </div>
                      </div> 
                    </td>
                    <td class="width10" [attr.data-label]="'% of TCV'">
                      <div class="customized-input">
                        <label for="field1" class=""> </label>
                        <input id="field1" type="text" maxlength="12"
                           onkeypress="return event.charCode >= 46
                           && event.charCode <= 57" 
                         class="border-gray w-100" [name]="BSSLdata.PercTCVName"  [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!BSSLdata.BSServiceLine.WiproPercentageOftcv && !BSSLdata.BSServiceLine.WiproDualCredit && businessSOlutionData[0].TCVCalculation)}" [(ngModel)]="BSSLdata.BSServiceLine.WiproPercentageOftcv" (keyup)="OnBSPercTCVChange(BSSLdata.BSServiceLine,p)" onpaste="return true;"  ondrop="return false;" (blur)="OnBSPercTCVBlur(BSSLdata.BSServiceLine,p)" placeholder="00.00" [disabled]="(!businessSOlutionData[0].TCVCalculation) || (BSSLdata.BSServiceLine.WiproDualCredit != '') || (disableOnRoleBSSL) || (IsAppirio && BSSLdata.BSServiceLine.checkforAppirio.length>0)" [title]="BSSLdata.BSServiceLine.WiproPercentageOftcv">
                         <p class="error-message" *ngIf="(!BSSLdata.BSServiceLine.WiproPercentageOftcv && !BSSLdata.BSServiceLine.WiproDualCredit && businessSOlutionData[0].TCVCalculation)" title="% of TCV is required">% of TCV is required</p>
                      </div>
                    </td>
                    <td class="width10" [attr.data-label]="'Est. SL TCV'">
                      <div class="customized-input">
                        <label for="field1" class=""> </label>
                        <div class="pos-rel w-100 float-left no_pad">

                        <input id="field1" type="number" min="0" maxlength="12"
                         oninput="javascript: if (this.value.split('.')[0].length > this.maxLength) { this.value = this.value.slice(0, this.maxLength); } else { let values = this.value.split('.');
                         if(values[1] && values[1].length > 2)  this.value = values[0] + '.' + values[1].slice(0,2)}"                        
                        class="border-gray w-100" [name]="BSSLdata.SLTCVName" [ngClass]="{'width125' : service.Summary_window ,'orangeborder':((!BSSLdata.BSServiceLine.WiproEstsltcv && !businessSOlutionData[0].TCVCalculation) || (!BSSLdata.BSServiceLine.WiproEstsltcv && businessSOlutionData[0].TCVCalculation && BSSLdata.BSServiceLine.WiproDualCredit))}" 
                        [(ngModel)]="BSSLdata.BSServiceLine.WiproEstsltcv" [title]="BSSLdata.BSServiceLine.WiproEstsltcv" (keyup)="OnBSSLTCVChange(BSSLdata.BSServiceLine,p)" onpaste="return true;"  ondrop="return false;" 
                         (blur)="OnBSSLTCVBlur(BSSLdata.BSServiceLine,p)" placeholder="00.00" [disabled]="((businessSOlutionData[0].TCVCalculation) && (BSSLdata.BSServiceLine.WiproDualCredit == '')) || disableOnRoleBSSL || (IsAppirio && BSSLdata.BSServiceLine.checkforAppirio.length>0)">
                        <p class="error-message top-40" *ngIf="((!BSSLdata.BSServiceLine.WiproEstsltcv && !businessSOlutionData[0].TCVCalculation) || (!BSSLdata.BSServiceLine.WiproEstsltcv && businessSOlutionData[0].TCVCalculation && BSSLdata.BSServiceLine.WiproDualCredit))" title="Est. SL TCV is required">Est. SL TCV is required</p>
                      </div>
                        </div>
                    </td>
                    <td class="customized-checkbox checkbox-center" [attr.data-label]="'Cloud'">
                      <mat-checkbox aria-label="select" [name]="BSSLdata.SLCloudName" [(ngModel)]="BSSLdata.BSServiceLine.Cloud" [ngClass]="{'width125' : service.Summary_window ,'orangeborderCheckbox':(!BSSLdata.BSServiceLine.Cloud && BSSLdata.cloudFlag && !disableOnRoleBSSL && !BSSLdata.CloudDisabled)}" [disabled]="BSSLdata.CloudDisabled || (disableOnRoleBSSL && userGuid!==BSSLdata.BSServiceLine.WiproSlbdmid && !isPreSales) || (IsAppirio && BSSLdata.BSServiceLine.checkforAppirio.length>0)" (click)="checkForBSSLCloud(BSSLdata.BSServiceLine,p,BSSLdata.CloudDisabled)">
                      </mat-checkbox>
                    </td>
  
                    <td [attr.data-label]="'Engagement model'">
                      <!-- Select DROPDOWN STARTS -->

                            <!-- updated mat select starts here -->
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad">
                                <mat-form-field class="col-12 no_pad float-left">
                                <mat-select disableOptionCentering panelClass="Select-panel-class" class="select-focus mat-select {{service.getSelectedClass(BSSLdata.BSServiceLine.WiproEngagementModel)}}"
                                  role="listbox" [name]="BSSLdata.SLEngagementName" title=""
                                  [ngClass]="{'' : service.Summary_window ,'orangeborder':(BSSLdata.BSServiceLine.WiproServicelineidValue && !BSSLdata.BSServiceLine.WiproEngagementModel)}"
                                  [(ngModel)]="BSSLdata.BSServiceLine.WiproEngagementModel"
                                  [disabled]="!BSSLdata.BSServiceLine.WiproServicelineidValue || disableOnRoleBSSL || (IsAppirio && BSSLdata.BSServiceLine.checkforAppirio.length>0)" 
                                  [title]="BSSLdata.BSServiceLine.WiproEngagementModelName" (selectionChange)="setEngagementModelName(BSSLdata,p)">
                                  <mat-option selected hidden disabled value="">Select</mat-option>
                                  <mat-option *ngFor="let engage of BSSLdata.EngagementModelDD" [value]="engage.Id" [title] = "engage.Name" >{{engage.Name}}</mat-option>
                                </mat-select>
                                 <p class="error-message top-40" *ngIf="(BSSLdata.BSServiceLine.WiproServicelineidValue && !BSSLdata.BSServiceLine.WiproEngagementModel)" title="Engagement model is required">Engagement model is required</p>
                              </mat-form-field>
                            </div>
                       <!-- updated mat select ends here -->
                      <!-- Select DROPDOWN STARTS -->
                    </td>
                    <td [attr.data-label]="'Dual credit'">
                      <!-- Select DROPDOWN STARTS -->

                         <!-- updated mat select starts here -->
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad">
                          <mat-form-field class="col-12 no_pad float-left">
                            <mat-select disableOptionCentering panelClass="Select-panel-class"
                              class="select-focus mat-select {{service.getSelectedClass(BSSLdata.BSServiceLine.WiproDualCredit)}}"
                              role="listbox" [name]="BSSLdata.SLDualCreditName"
                              [ngClass]="{'' : service.Summary_window}"
                              [(ngModel)]="BSSLdata.BSServiceLine.WiproDualCredit" [title]="BSSLdata.BSServiceLine.WiproDualCreditName" (selectionChange)="TCVChangeonDulaCredit(BSSLdata.BSServiceLine,p)"
                              [disabled]="(BSSLdata.BSServiceLine.WiproServicelineidValueName != CIS && BSSLdata.BSServiceLine.WiproServicelineidValueName != CRS) || disableOnRoleBSSL ||(IsAppirio && BSSLdata.BSServiceLine.checkforAppirio.length>0)">
                              <mat-option selected value="">Select</mat-option>
                              <mat-option *ngFor="let dualCredit of BSDualCreditDD" [hidden]="!dualCredit.IsVisible" [value]="dualCredit.Id" [title]="dualCredit.Name" >{{dualCredit.Name}}</mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>
                  <!-- updated mat select ends here -->
  
                      <!-- Select DROPDOWN STARTS -->
                    </td>
                    <td class="no_pad display_flex">
                      <div class="mobile-align display_flex">
                        <button class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn" aria-label="more" 
                        matTooltip="More" (click)="navigatetoBSSLCloud(BSSLdata.BSServiceLine,p,false)">
                        <span class="col-xs-12 nopad blue_circle_replay_img mdi  mdi-dots-horizontal"></span>
                      </button>
                      <!-- This -->
                      <button class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn" aria-label="Reject" *ngIf="(!BSSLdata.BSServiceLine.wiproTaggedStatus && BSSLdata.BSServiceLine.TaggedTCV>0 && !disableOnRoleBSSL && !isAccepted)"
                         (click)="rejectServiceLine(BSSLdata.BSServiceLine,'serviceline',p)" matTooltip="Reject">
                        <span class="col-xs-12 nopad blue_circle_replay_img mdi mdi-close"></span>
                      </button>
                      <button class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn" aria-label="Approve" *ngIf="(!BSSLdata.BSServiceLine.wiproTaggedStatus && BSSLdata.BSServiceLine.TaggedTCV>0 && !disableOnRoleBSSL && !isAccepted)"
                        (click)="acceptServiceLine(BSSLdata.BSServiceLine,'serviceline',p)" matTooltip="Approve" >
                        <span class="col-xs-12 nopad blue_circle_replay_img mdi mdi-check"></span>
                      </button>
                      <!-- This -->
                      <button class="btn-none blue_circle_replay pad_left_0 commonActionBtn"  *ngIf="!(!BSSLdata.BSServiceLine.wiproTaggedStatus && BSSLdata.BSServiceLine.TaggedTCV>0 && !isAccepted && !disableOnRoleBSSL) &&  !disableOnRoleBSSL" aria-label="Delete" [disabled]="disableOnRoleBSSL || (IsAppirio && BSSLdata.BSServiceLine.checkforAppirio.length>0)"
                        matTooltip="Delete" (click)="deletBSSLValidation(BSSLdata.BSServiceLine,'serviceline',p)" [ngClass]="disableOnRoleBSSL || (IsAppirio && BSSLdata.BSServiceLine.checkforAppirio.length>0)?'commonActionBtnDisabled':''">
                        <span class="col-xs-12 nopad blue_circle_replay_img mdi  mdi-delete"></span>
                      </button>
                      <!-- (click)="openserviceline()" -->
                      <!-- <button class="btn-none float-right more-btn-mobile mr10 cp" role="button" title="more"
                        aria-label="more" tabindex="0" routerLink="/opportunity/servicelineadditionaldetails">
                        <span class="morepop mdi mdi-dots-vertical expand-btn"></span>
                      </button> -->
                    </div>
                    </td>
                    <!-- <td *ngIf="data.errortext" class="col-6 no_pad float-left validation-text">* Cloud details are mandatory for this combination of service line/ practice/ sub-practice.</td> -->
                  </tr>

                  <tr class="nodata_tr" *ngIf="BSSLDetails.length==0 && !serviceLineLoader">
                       <td class="nodata_td" colSpan="12"> No records found </td>
                       </tr>
                  <!-- <tr  *ngIf="BSSLDetails.length==0">
                    </tr> -->
                 
                </tbody>
              </table>
              <!-- </perfect-scrollbar> -->
            </div>
            <!-- Table ends here -->
          </div>
        </mat-expansion-panel>
  
      </div>
      <!-- service lines panel ends here -->
      </div>
  
  
      <!-- IP panel starts here -->
      <div class="col-12 no_pad float-left normal_table">
      <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left pad-26 pad_t0 ip-tab">
        <mat-expansion-panel hideToggle="true" [expanded]="panelOpenState4" class="no_pad"
          (opened)="panelOpenState4 = true" (closed)="panelOpenState4 = false">
          <mat-expansion-panel-header class="min_height60 mob_width100">
            <div class="min_height60 col-12 no_pad">
              <div class="accord-heading col-12">
                <span
                  [ngClass]="panelOpenState4 ? 'mdi mdi-chevron-down chevron-right float-left':'mdi mdi-chevron-right chevron-right float-left'"></span>
                <div class="float-left no_pad mob-busines-header w-80"> <span class="accordian-title cardsHead col-6 no_pad">
  
                    IP</span></div>
                <div class="col-6 float-right no_pad bot10 mobile-button-width" *ngIf="!disableOnRoleBSIp"> 
                  <button aria-label="Add IP" (click)="addNewIP();panelOpenState4 = false"
                    class="primary-button h-40 std save-responsive-btn float-right pad_10" [disabled]="disableOnRoleBSIp">+ Add
                    IP</button>
                </div>
              </div>
            </div>
          </mat-expansion-panel-header>
          <div class="col-12 no_pad float-left btop_withoutpadding">
            <!-- Table starts here -->
            <div id="iptable" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad scroll-tabs overflowscroll" [ngClass]="!service.Summary_window ? '' : 'table-responsive'">
                <!-- <perfect-scrollbar class="minheight"> -->
              <table class="table table-borderless">
                <thead>
                  <tr>
                    <!-- <th class="customized-checkbox">
                       <mat-checkbox aria-label="select all" name="checkbox" (change)="selectAllip()" [(ngModel)]="selectedAllip">
                      </mat-checkbox> 
                    </th> -->
                    <th>IP</th>
                    <th>Module</th>
                    <th>Service line</th>
                    <th>Practice</th>
                    <th>SL BDM</th>
                    <th>License value</th>
                    <th>AMC value</th>
                    <th>Cloud</th>
                    <th>Accept IP</th>
                    <th>Holmes BDM</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  
                  <tr *ngFor="let Ipdata of IpDetails;let q=index">
                   
                    <!-- <td *ngIf="(Ipdata.IP.WiproAcceptip == false && Ipdata.IP.WiproOpportunityIpId == '') || Ipdata.IP.WiproAcceptip == true" class="customized-checkbox">
                       <mat-checkbox aria-label="select" name="checkbox" (change)="checkIfAllSelectedip(data)"
                        [(ngModel)]="data.isCheccked">
                      </mat-checkbox> 
                    </td> -->
                    <td class="no_pad" [attr.data-label]="'IP'">
                      <span *ngIf="Ipdata.IP.WiproAcceptip == false && Ipdata.IP.WiproOpportunityIpId != ''" class="validation-bar"></span>
                      <!-- IP autocomplete starts here-->
                      <div
                        class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left customized-input cust_autoComplete pos-rel no_pad">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                          <form class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                          <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                                      for="ipAccountName" class="label-form">                                    
                           </label>
                          <div class="pos-rel w-100 float-left no_pad">
                      
                          <input appKeyListControl #ipListBSP (arrowDown)="arrowkeyLocation=$event"
                            (keyup.enter)="ipListBSP.value=Ipdata.IpNameDD[arrowkeyLocation].name;Ipdata.IpNameSwitch=false;changeIpNameData(Ipdata.IpNameDD[arrowkeyLocation],Ipdata.IP,q,true)"
                            [attr.data-arrayMaxLength]="Ipdata.IpNameDD?.length" [attr.data-isDownBtn]=true                                      
                            (input)="Ipdata.IpNameSwitch=true" role="combobox" aria-autocomplete="list"
                            [attr.aria-expanded]="Ipdata.IpNameSwitch?true:false" aria-owns="read"
                            [attr.aria-activedescendant]="arrowkeyLocation" id="ipAccountName" name="ipAccountName"                            
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left h-40 label-input"
                            [name]="Ipdata.IpNmName" autocomplete="off" type="text" [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!Ipdata.IP.IpName)}" [(ngModel)]="Ipdata.IP.IpName" [title]="Ipdata.IP.IpName" placeholder="Search" (ngModelChange)="getIpNameData(Ipdata.IP,Ipdata.IP.IpName,q)"
                            (click)="Ipdata.IpNameSwitch = true;getIpNameData(Ipdata.IP,Ipdata.IP.IpName,q); service.Summary_window = false;" (clickOutside)="IpNameclose(Ipdata.IP,q,$event)" [disabled]="disableOnRoleBSIp">
                          <span class="mdi mdi-magnify" *ngIf="!(!Ipdata.IpNameSwitch && Ipdata.IP.IpName)"></span>
                          <span class="mdi mdi-close auto-close" (click)="clearSelectedItem(q,'IPAccount')" *ngIf="!Ipdata.IpNameSwitch && Ipdata.IP.IpName"></span> 
                           <p class="error-message top-40" *ngIf="(!Ipdata.IP.IpName)" title="IP is required">IP is required</p>
                          </div>
                          <div
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm border float-left top64 no_pad standard-border color-azure pos-abs z-ind-99 white-bg"
                            *ngIf="Ipdata.IpNameSwitch"
                            [ngClass]="(Ipdata.IpNameDD).length <= 1?'suggestion-box1':(Ipdata.IpNameDD).length == 2?'suggestion-box2':'suggestion-box h150'">
                            <perfect-scrollbar [ngStyle]="(Ipdata.IpNameDD).length <= 1?{'max-height':'40px'}:(Ipdata.IpNameDD).length == 2?{'max-height':'80px'}:{'max-height':'105px'}" class="z-ind-9">
                              <ul *ngIf="Ipdata.IP.IPAccountLoader" class=" list-group color-azure  sort-dropdown mr2">
                                    <li  class="liststyle_none loader-search"></li>
                              </ul>
                              <ul *ngIf="!Ipdata.IP.IPAccountLoader" tabindex="0" class=" list-group sort-dropdown">
                                <li  id="{{i}}" tabindex="0" role="option" [class.active]="i==arrowkeyLocation"  aria-disabled="false"
                                  class="list-group-item no_pad cp" (keypress)="changeIpNameData(item,Ipdata.IP,q)"
                                  (click)="changeIpNameData(item,Ipdata.IP,q)"
                                  *ngFor="let item of Ipdata.IpNameDD;let i=index">
                                  <label for="inti_name" class="float-left name cp">
                                    <span class="d-block list-name">{{item.name}}</span>
                                    <!-- <span class="d-block sub-list">{{item.subtitle}}</span> -->
                                  </label>
                                </li>
                                <li class="d-block list-name no_pad pad-10" *ngIf="(Ipdata.IpNameDD).length == 0">
                                  No record found </li>
                              </ul>
                            </perfect-scrollbar>
                            <span class="db-search">
                              <button id="advanceIPSearch{{q}}" role="option" tabindex="0" disabled = "Ipdata.IP.IPAccountLoader"  (click)="openadvancetabsSearch(Ipdata.IP,'BSIPIP',Ipdata.IpNameDD,Ipdata.selectedIP,Ipdata.IP.IpName,q)"
                               [disabled] = "Ipdata.IP.IPAccountLoader" aria-disabled="false" aria-label="Advance look up" type="button" class="button-search" >
                                <span class="mdi mdi-file-outline"></span> Advance look up
                              </button>
                            </span>
                          </div>
                          </form>
                        </div>
                      </div>
                      <!--IP autocomplete ends here-->
                    </td>
  
                    <td class="no_pad" [attr.data-label]="'Module'">
                      <!-- module autocomplete starts here-->
                      <div
                        class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left customized-input cust_autoComplete pos-rel no_pad">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                        <form class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                          <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                                      for="ipModuleName" class="label-form">                                    
                           </label>
                          <input  appKeyListControl #ipModuleListBSP (arrowDown)="arrowkeyLocation=$event"
                            (keyup.enter)="ipModuleListBSP.value=Ipdata.IpModuleDD[arrowkeyLocation].ModuleName;Ipdata.IpModuleNameSwitch=false;changeIpModuleData(Ipdata.IpModuleDD[arrowkeyLocation],Ipdata.IP,q,true)"
                            [attr.data-arrayMaxLength]="Ipdata.IpModuleDD?.length" [attr.data-isDownBtn]=true                                      
                            (input)="Ipdata.IpModuleNameSwitch=true" role="combobox" aria-autocomplete="list"
                            [attr.aria-expanded]="Ipdata.IpModuleNameSwitch?true:false" aria-owns="read"
                            [attr.aria-activedescendant]="arrowkeyLocation" id="ipModuleName" name="ipModuleName"                            
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                            [name]="Ipdata.IpModuleName" autocomplete="off" type="text" [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!Ipdata.IP.WiproModuleName && Ipdata.IP.IpName && Ipdata.IP.IpId && !Ipdata.ModuleDisabled)}" [(ngModel)]="Ipdata.IP.WiproModuleName" [title]="Ipdata.IP.WiproModuleName" (ngModelChange)="getIpModuleData(Ipdata.IP,Ipdata.IP.WiproModuleName,q)"
                            placeholder="Search" (click)="Ipdata.IpModuleNameSwitch = true;getIpModuleData(Ipdata.IP,Ipdata.IP.WiproModuleName,q); service.Summary_window = false;" (clickOutside)="IpModuleclose(Ipdata.IP,q,$event)"
                           [disabled]="!Ipdata.IP.IpName || !Ipdata.IP.IpId || Ipdata.ModuleDisabled || disableOnRoleBSIp">
                          <span class="mdi mdi-magnify" *ngIf="!(!Ipdata.IpModuleNameSwitch && Ipdata.IP.WiproModuleName)"></span>
                          <span class="mdi mdi-close auto-close" *ngIf="!Ipdata.IpModuleNameSwitch && Ipdata.IP.WiproModuleName" (click)="clearSelectedItem(q,'IPModule')"></span> 
                          <div
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm border float-left top64 no_pad standard-border color-azure pos-abs z-ind-99 white-bg"
                            *ngIf="Ipdata.IpModuleNameSwitch"
                            [ngClass]="(Ipdata.IpModuleDD).length <= 1?'suggestion-box1':(Ipdata.IpModuleDD).length == 2?'suggestion-box2':'suggestion-box'">
                            <perfect-scrollbar [ngStyle]="(Ipdata.IpModuleDD).length <= 1?{'max-height':'40px'}:(Ipdata.IpModuleDD).length == 2?{'max-height':'80px'}:{'max-height':'107px'}" class="z-ind-9">
                              <ul *ngIf="Ipdata.IP.IPModuleLoader" class=" list-group color-azure  sort-dropdown mr2">
                                    <li  class="liststyle_none loader-search"></li>
                              </ul>
                              <ul *ngIf="!Ipdata.IP.IPModuleLoader" tabindex="0" class=" list-group sort-dropdown">
                                <li id="{{i}}" tabindex="0" role="option" [class.active]="i==arrowkeyLocation"  aria-disabled="false"
                                  class="list-group-item no_pad cp"
                                  (keypress)="changeIpModuleData(item,Ipdata.IP,q)"
                                  (click)="changeIpModuleData(item,Ipdata.IP,q)"
                                  *ngFor="let item of Ipdata.IpModuleDD;let i=index">
                                  <label for="inti_name" class="float-left name cp">
                                    <span class="d-block list-name">{{item.ModuleName}}</span>
                                    <!-- <span class="d-block sub-list">{{item.subtitle}}</span> -->
                                  </label>
                                </li>
                                <li class="d-block list-name no_pad pad-10"
                                  *ngIf="(Ipdata.IpModuleDD).length == 0">
                                  No record found </li>
                              </ul>
                            </perfect-scrollbar>
                            <span class="db-search">
                              <button id="advanceIPModuleSearch{{q}}" role="option" tabindex="0" (click)="openadvancetabsSearch(Ipdata.IP,'BSIPModule',Ipdata.IpModuleDD,Ipdata.selectedModule,Ipdata.IP.WiproModuleName,q)"
                               [disabled] = "Ipdata.IP.IPModuleLoader" aria-disabled="false" aria-label="Advance look up" type="button" class="button-search" >
                                <span class="mdi mdi-file-outline"></span> Advance look up
                              </button>
                            </span>
                          </div>
                        </form>
                        </div>
                      </div>
                      <!--module autocomplete ends here-->
  
                    </td>
                    <td [attr.data-label]="'Service line'">
                      <!-- Select DROPDOWN STARTS -->

                         <!-- updated mat select starts here -->
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad">
                          <mat-form-field class="col-12 no_pad float-left">
                            <mat-select disableOptionCentering panelClass="Select-panel-class" class="select-focus mat-select {{service.getSelectedClass(Ipdata.IP.WiproServiceline)}}"
                              role="listbox" [name]="Ipdata.IpSLName" 
                              [ngClass]="{'' : service.Summary_window}"
                              [(ngModel)]="Ipdata.IP.WiproServiceline" [title]="Ipdata.IP.WiproServicelineName" (selectionChange)="getIpPracticeData(Ipdata.IP,q)" [disabled]="disableOnRoleBSIp">
                              <mat-option selected hidden disabled value="">Select</mat-option>
                              <mat-option *ngFor="let IpSL of IpandServiceLinelDD" [hidden]="!IpSL.IsVisible" [value]="IpSL.SysGuid" [title]="IpSL.Name" >{{IpSL.Name}}</mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>
                 <!-- updated mat select ends here -->
                      <!-- Select DROPDOWN STARTS -->
                    </td>
                    <td [attr.data-label]="'Practice'">
                      <!-- Select DROPDOWN STARTS -->

                      <!-- updated mat select starts here -->
                      <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad">
                        <mat-form-field class="col-12 no_pad float-left">
                          <mat-select disableOptionCentering panelClass="Select-panel-class" class="select-focus mat-select {{service.getSelectedClass(Ipdata.IP.WiproPractice)}}" role="listbox"
                            [name]="Ipdata.IpPracticeName" 
                            [ngClass]="{'' : service.Summary_window}"
                            [(ngModel)]="Ipdata.IP.WiproPractice" (selectionChange)="getIpSlBDMData(Ipdata.IP,q,'')"
                            [disabled]="!Ipdata.IP.WiproServiceline || disableOnRoleBSIp || (Ipdata.IP.WiproServiceline && Ipdata.IppracticeDD.length == 0)" [title] = "Ipdata.IP.WiproPracticeName" >
                            <mat-option selected hidden disabled value="">Select</mat-option>
                            <mat-option *ngFor="let IpPractice of Ipdata.IppracticeDD" [value]="IpPractice.SysGuid" [title]="IpPractice.Name" >{{IpPractice.Name}}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
              <!-- updated mat select ends here -->
                      <!-- Select DROPDOWN STARTS -->
                    </td>
                    <td class="no_pad" [attr.data-label]="'SL BDM'">
                      <!-- slbdm2 autocomplete starts here-->
                      <div
                        class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left customized-input cust_autoComplete pos-rel no_pad">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                        <form class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                          <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                                      for="ipSLBDMName" class="label-form">                                    
                           </label>
                          <input appKeyListControl #ipSLBDMListBSP (arrowDown)="arrowkeyLocation=$event"
                            (keyup.enter)="ipSLBDMListBSP.value=Ipdata.IpslBDMDD[arrowkeyLocation].Name;Ipdata.IpSLBDMNameSwitch=false;changeIpSlBDMData(Ipdata.IpslBDMDD[arrowkeyLocation],Ipdata.IP,q,true)"
                            [attr.data-arrayMaxLength]="Ipdata.IpslBDMDD?.length" [attr.data-isDownBtn]=true                                      
                            (input)="Ipdata.IpSLBDMNameSwitch=true" role="combobox" aria-autocomplete="list"
                            [attr.aria-expanded]="Ipdata.IpSLBDMNameSwitch?true:false" aria-owns="read"
                            [attr.aria-activedescendant]="arrowkeyLocation" id="ipSLBDMName" name="ipSLBDMName"  
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                            [name]="Ipdata.IpSLBDmName" autocomplete="off" type="text"     [ngClass]="{'width125' : service.Summary_window}" [(ngModel)]="Ipdata.IP.WiproSlbdmName" [title]="Ipdata.IP.WiproSlbdmName" (ngModelChange)="OnChangegetBSIPSlBDMData(Ipdata.IP,q,Ipdata.IP.WiproSlbdmName)"
                            placeholder="Search" (click)="Ipdata.IpSLBDMNameSwitch = true;OnChangegetBSIPSlBDMData(Ipdata.IP,q,Ipdata.IP.WiproSlbdmName); service.Summary_window = false;" (clickOutside)="IpSlbdmclose(Ipdata.IP,q,$event)" 
                            [disabled]="!Ipdata.IP.WiproServiceline || (!Ipdata.IP.WiproPractice && Ipdata.IppracticeDD.length > 0) || disableOnRoleBSIp">
                          <span class="mdi mdi-magnify" *ngIf="!(!Ipdata.IpSLBDMNameSwitch && Ipdata.IP.WiproSlbdmName)"></span>
                          <span class="mdi mdi-close auto-close" *ngIf="!Ipdata.IpSLBDMNameSwitch && Ipdata.IP.WiproSlbdmName" (click)="clearSelectedItem(q,'IpSLBDM')"></span> 
                          <div
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm border float-left top64 no_pad standard-border color-azure pos-abs z-ind-99 white-bg"
                            *ngIf="Ipdata.IpSLBDMNameSwitch"
                            [ngClass]="(Ipdata.IpslBDMDD).length <= 1?'suggestion-box1':(Ipdata.IpslBDMDD).length == 2?'suggestion-box2':'suggestion-box'">
                            <perfect-scrollbar [ngStyle]="(Ipdata.IpslBDMDD).length <= 1?{'max-height':'40px'}:(Ipdata.IpslBDMDD).length == 2?{'max-height':'80px'}:{'max-height':'107px'}" class="z-ind-9">
                              <ul tabindex="0" class=" list-group sort-dropdown">
                                <li id="{{i}}" tabindex="0" role="option" [class.active]="i==arrowkeyLocation"  aria-disabled="false"
                                   class="list-group-item no_pad cp"
                                  (keypress)="changeIpSlBDMData(item,Ipdata.IP,q)"
                                  (click)="changeIpSlBDMData(item,Ipdata.IP,q)"
                                  *ngFor="let item of Ipdata.IpslBDMDD;let i=index">
                                  <label for="inti_name" class="float-left name cp">
                                    <span class="d-block list-name">{{item.Name}}</span>
                                    <!-- <span class="d-block sub-list">{{item.subtitle}}</span> -->
                                  </label>
                                </li>
                                <li class="d-block list-name no_pad pad-10"
                                  *ngIf="(Ipdata.IpslBDMDD).length == 0">
                                  No record found </li>
                              </ul>
                            </perfect-scrollbar>
                            <span class="db-search" (click)="openadvancetabsSearch(Ipdata.IP,'BSIPSLBDM',Ipdata.IpslBDMDD,Ipdata.selectedIPSLBDM,Ipdata.IP.WiproSlbdmName,q)">
                              <button id="advanceIPSLBDMSearch{{q}}" role="option" tabindex="0"
                              aria-disabled="false" aria-label="Advance look up" type="button" class="button-search" >
                                <span class="mdi mdi-file-outline"></span> Advance look up
                              </button>
                            </span>
                          </div>
                        </form>
                        </div>
                      </div>
                      <!--slbdm2 autocomplete ends here-->
                    </td>
  
                    <td class="width10" [attr.data-label]="'License value'">
                      <div class="customized-input">
                        <label for="license" class=""> </label>
                        <div class="pos-rel w-100 float-left no_pad">
                          <input id="license"  type="number" min="0" maxlength="12"
                          oninput="javascript: if (this.value.split('.')[0].length > this.maxLength) { this.value = this.value.slice(0, this.maxLength); } else { let values = this.value.split('.');
                         if(values[1] && values[1].length > 2)  this.value = values[0] + '.' + values[1].slice(0,2)}"                        
                           
                         class="border-gray w-100" [name]="Ipdata.IpLValueName"   [ngClass]="{'width125' : service.Summary_window,'orangeborder':(!Ipdata.IP.WiproLicenseValue && !Ipdata.IP.WiproAmcvalue)}"
                         [(ngModel)]="Ipdata.IP.WiproLicenseValue" [title]="Ipdata.IP.WiproLicenseValue" 
                         (blur)="sumIpTCVLV(Ipdata.IP,q)" (keyup)="checkLicenceValue(Ipdata.IP,q)" onpaste="return true;"  ondrop="return false;" placeholder="00.00" [disabled]="(disableOnRoleBSIp)">
                          <p class="error-message top-40" *ngIf="(!Ipdata.IP.WiproLicenseValue && !Ipdata.IP.WiproAmcvalue)" title="License value is required">License value is required</p>
                        </div>
                      </div>
                    </td>
                    <td class="width10" [attr.data-label]="'AMC value'">
                      <div class="customized-input">
                        <label for="amc" class=""> </label>
                        <div class="pos-rel w-100 float-left no_pad">
                          <input id="amc"  type="number" min="0" maxlength="12"
                           oninput="javascript: if (this.value.split('.')[0].length > this.maxLength) { this.value = this.value.slice(0, this.maxLength); } else { let values = this.value.split('.');
                         if(values[1] && values[1].length > 2)  this.value = values[0] + '.' + values[1].slice(0,2)}"                        
                         class="border-gray w-100" [name]="Ipdata.IpAMCValueName" [ngClass]="{'width125' : service.Summary_window,'orangeborder':(!Ipdata.IP.WiproLicenseValue && !Ipdata.IP.WiproAmcvalue)}" [(ngModel)]="Ipdata.IP.WiproAmcvalue" [title]="Ipdata.IP.WiproAmcvalue" 
                        (blur)="sumIpTCVAMC(Ipdata.IP,q)" placeholder="00.00" (keyup)="checkAMCValue(Ipdata.IP,q)" onpaste="return true;"  ondrop="return false;" [disabled]="(disableOnRoleBSIp)">
                          <p class="error-message top-40" title="AMC value is required" *ngIf="(!Ipdata.IP.WiproLicenseValue && !Ipdata.IP.WiproAmcvalue)">AMC value is required</p>
                        </div>
                      </div>
                    </td>
                    <td class="customized-checkbox checkbox-center" [attr.data-label]="'Cloud'">
                      <mat-checkbox aria-label="select" [name]="Ipdata.IpCloudName" [(ngModel)]="Ipdata.IP.WiproCloud" [disabled]="Ipdata.CloudDisabled || (disableOnRoleBSIp && (!isPPS && userGuid!==Ipdata.IP.WiproSolutionOwnerId))" (click)="checkForCloud(Ipdata.IP,q,Ipdata.CloudDisabled,Ipdata.HolmesDisable)" >
                      </mat-checkbox>
                    </td>
                    <td class="customized-checkbox checkbox-center accept-ip" [attr.data-label]="'Accept IP'">
                      <mat-checkbox aria-label="select"   [name]="Ipdata.IpAcceptIpName" [ngClass]="{'width125' : service.Summary_window,'orangeborderCheckbox':(!Ipdata.AcceptIpUI && !Ipdata.AcceptIpDisable && !disableOnRoleBSIp)}" [(ngModel)]="Ipdata.AcceptIpUI" [disabled]="Ipdata.AcceptIpDisable || disableOnRoleBSIp">
                      </mat-checkbox>
                    </td>
                  
                    <td class="no_pad" [attr.data-label]="'Holmes BDM'">
                        <!-- Holmes BDM autocomplete starts here-->
                        <div
                          class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left customized-input cust_autoComplete pos-rel no_pad">
                          <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                          <form class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                          <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                                      for="ipHolmesBDMName" class="label-form">                                    
                           </label>
                            <input appKeyListControl #ipHolmesBDMListBSP (arrowDown)="arrowkeyLocation=$event"
                            (keyup.enter)="ipHolmesBDMListBSP.value=Ipdata.IpHolmesDD[arrowkeyLocation].Name;Ipdata.IpHolmesbdmNameSwitch=false;changeIpHolmesBDMData(Ipdata.IpHolmesDD[arrowkeyLocation],Ipdata.IP,q,true)"
                            [attr.data-arrayMaxLength]="Ipdata.IpHolmesDD?.length" [attr.data-isDownBtn]=true                                      
                            (input)="Ipdata.IpHolmesbdmNameSwitch=true" role="combobox" aria-autocomplete="list"
                            [attr.aria-expanded]="Ipdata.IpHolmesbdmNameSwitch?true:false" aria-owns="read"
                            [attr.aria-activedescendant]="arrowkeyLocation" id="ipHolmesBDMName" name="ipHolmesBDMName"  
                              class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                              [name]="Ipdata.IpHolmesBDMName" autocomplete="off" type="text" [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!Ipdata.IP.WiproHolmesbdmName && !Ipdata.HolmesDisable)}" [(ngModel)]="Ipdata.IP.WiproHolmesbdmName" [title]="Ipdata.IP.WiproHolmesbdmName" [disabled]="!Ipdata.IP.IpName || !Ipdata.IP.IpId || Ipdata.HolmesDisable || disableOnRoleBSIp" placeholder="Search" (ngModelChange)="getIpHolmesData(Ipdata.IP,Ipdata.IP.WiproHolmesbdmName,q)"
                              (click)="Ipdata.IpHolmesbdmNameSwitch = true;getIpHolmesData(Ipdata.IP,Ipdata.IP.WiproHolmesbdmName,q); service.Summary_window = false;" (clickOutside)="IpHolmesBDMclose(Ipdata.IP,q,$event)">
                            <span class="mdi mdi-magnify" *ngIf="!(!Ipdata.IpHolmesbdmNameSwitch && Ipdata.IP.WiproHolmesbdmName)"></span>
                            <span class="mdi mdi-close auto-close" *ngIf="!Ipdata.IpHolmesbdmNameSwitch && Ipdata.IP.WiproHolmesbdmName" (click)="clearSelectedItem(q,'IpHolmesBDM')"></span> 
                            <div
                              class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm border float-left top64 no_pad standard-border color-azure pos-abs z-ind-99 white-bg"
                              *ngIf="Ipdata.IpHolmesbdmNameSwitch"
                              [ngClass]="(Ipdata.IpHolmesDD).length <= 1?'suggestion-box1':(Ipdata.IpHolmesDD).length == 2?'suggestion-box2':'suggestion-box'">
                              <perfect-scrollbar [ngStyle]="(Ipdata.IpHolmesDD).length <= 1?{'max-height':'40px'}:(Ipdata.IpHolmesDD).length == 2?{'max-height':'80px'}:{'max-height':'107px'}" class="z-ind-9">
                                <ul *ngIf="Ipdata.IP.IPHolmesBDMLoader" class=" list-group color-azure  sort-dropdown mr2">
                                    <li  class="liststyle_none loader-search"></li>
                                 </ul>
                                <ul  *ngIf="!Ipdata.IP.IPHolmesBDMLoader" tabindex="0" class=" list-group sort-dropdown">
                                  <li id="{{i}}" tabindex="0" role="option" [class.active]="i==arrowkeyLocation"  aria-disabled="false"
                                    class="list-group-item no_pad " (keypress)="changeIpHolmesBDMData(item,Ipdata.IP,q)"
                                    (click)="changeIpHolmesBDMData(item,Ipdata.IP,q)"
                                    *ngFor="let item of Ipdata.IpHolmesDD;let i=index">
                                    <label for="inti_name" class="float-left name cp">
                                      <span class="d-block list-name">{{item.Name}}</span>
                                      <!-- <span class="d-block sub-list">{{item.subtitle}}</span> -->
                                    </label>
                                  </li>
                                  <li class="d-block list-name no_pad pad-10" *ngIf="(Ipdata.IpHolmesDD).length == 0">
                                    No record found </li>
                                </ul>
                              </perfect-scrollbar>
                              <span class="db-search">
                                <button id="advanceIPHolmesBDmSearch{{q}}" role="option" tabindex="0"  (click)="openadvancetabsSearch(Ipdata.IP,'BSIPHolmesBDM',Ipdata.IpHolmesDD,Ipdata.selectedHomesBDM,Ipdata.IP.WiproHolmesbdmName,q)"
                                [disabled] = "Ipdata.IP.IPHolmesBDMLoader" aria-disabled="false" aria-label="Advance look up" type="button" class="button-search" >
                                  <span class="mdi mdi-file-outline"></span> Advance look up
                                </button>
                              </span>
                            </div>
                          </form>
                          </div>
                        </div>
                        <!--Holmes BDM autocomplete ends here-->
    
                      </td>
  
                    <td class="no_pad display_flex">
                        <div class="mobile-align display_flex">
                          <!-- This -->
                        <!--<button class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn" aria-label="View"
                        matTooltip="View">
                        <span class="col-xs-12 nopad blue_circle_replay_img mdi mdi-eye"></span>
                      </button>-->
                      <!-- This -->
                      <button class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn" aria-label="more"
                      matTooltip="More" (click)="navigatetoIPCloud(Ipdata.IP,q,false,Ipdata.HolmesDisable)">
                      <span class="col-xs-12 nopad blue_circle_replay_img mdi mdi-dots-horizontal"></span>
                    </button>
                      <button class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn" *ngIf="(!disableOnRoleBSIp)" aria-label="Delete"
                        matTooltip="Delete" (click)="deletBSIpValidation(Ipdata.IP,'ip',q)">
                        <span class="col-xs-12 nopad blue_circle_replay_img mdi  mdi-delete"></span>
                      </button>
                      <!-- (click)="openip()" -->
                      <!-- <button class="btn-none float-right more-btn-mobile mr10 cp" role="button" title="more"
                         aria-label="more" tabindex="0"  routerLink="/opportunity/ipadditionaldetails">
                        <span class="morepop mdi mdi-dots-vertical expand-btn"></span>
                      </button> -->
                      </div>
                    </td>
                  </tr>
                  <tr class="nodata_tr" *ngIf="IpDetails.length==0 && !IpLoader">
                      <td class="nodata_td" colSpan="12"> No records found </td>
                      </tr>
                </tbody>
              </table>
              <!-- </perfect-scrollbar> -->
            </div>
            <!-- Table ends here -->
          </div>
        </mat-expansion-panel>
  
      </div>
      </div>
      <!-- IP panel ends here -->
  
  
      <!-- Solution panel starts here -->
      <div class="col-12 no_pad float-left normal_table">
      <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left pad-26 pad_t0 solution-tab ">
        <mat-expansion-panel hideToggle="true" [expanded]="panelOpenState5" class="no_pad"
          (opened)="panelOpenState5 = true" (closed)="panelOpenState5 = false">
          <mat-expansion-panel-header class="min_height60 mob_width100">
            <div class="min_height60 col-12 no_pad">
              <div class="accord-heading col-12"> 
                <span
                  [ngClass]="panelOpenState5 ? 'mdi mdi-chevron-down chevron-right float-left':'mdi mdi-chevron-right chevron-right float-left'"></span>
                <div class="float-left no_pad mob-busines-header w-80"> <span class="accordian-title cardsHead col-6 no_pad">
                    Solution</span></div>
                <div class="col-6 float-right no_pad bot10 mobile-button-width" *ngIf="!disableOnRoleBSSolution">
                  <button aria-label="Add solution" (click)="addsolution();panelOpenState5 = false"
                    class="primary-button h-40 std save-responsive-btn float-right pad_10" [disabled]="disableOnRoleBSSolution">+ Add
                    solution</button>
                </div>
              </div>
            </div>
          </mat-expansion-panel-header>
  
          <div class="col-12 no_pad float-left btop_withoutpadding">
            <!-- Table starts here -->
            <div id="solutiontable" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad scroll-tabs overflowscroll" [ngClass]="!service.Summary_window ? '' : 'table-responsive'">
                <!-- <perfect-scrollbar class="minheight"> -->
              <table class="table table-borderless">
                <thead>
                  <tr>
                    <!-- <th class="customized-checkbox">
                       <mat-checkbox aria-label="select all" name="checkbox" (change)="selectAllsol()" [(ngModel)]="selectedAllsol">
                      </mat-checkbox> 
                    </th> -->
                    <th>Type</th>
                    <th>Name</th>
                    <th>Owner</th>
                    <th>%</th>
                    <th>% of TCV</th>
                    <th>Solution value</th>
                    <th>Solution BDM</th>
                    <th>Influence type</th>
                    <th>Service type</th>
                    <th></th>
                  </tr>
                </thead>
              <tbody *ngFor="let solData of SolutionDetails;let j =index">
 
                  <tr>
                    <!-- <td class="customized-checkbox">
                      <mat-checkbox aria-label="select" name="checkbox" (change)="checkIfAllSelectedsol(data)"
                        [(ngModel)]="data.isCheccked">
                      </mat-checkbox> 
                    </td> -->
                    <td [attr.data-label]="'Type'">
                      <!-- Select DROPDOWN STARTS -->
                        <!-- updated mat select starts here -->
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad">
                          <mat-form-field class="col-12 no_pad float-left">
                            <mat-select disableOptionCentering panelClass="Select-panel-class" class="select-focus mat-select {{service.getSelectedClass(solData.solutions.WiproType)}}"
                              role="listbox" [name]="solData.solutionTypeName" title=""
                              [ngClass]="{'' : service.Summary_window ,'orangeborder':(!solData.solutions.WiproType)}"
                              [(ngModel)]="solData.solutions.WiproType"  (selectionChange)="getnamearray(solData.solutions,j)"
                              [disabled]="disableOnRoleBSSolution" [title]="solData.solutions.WiproTypeName">
                              <mat-option selected hidden disabled value="">Select</mat-option>
                              <mat-option *ngFor="let type of solutionTypeDD" [value]="type.Id" [title]="type.Name" >{{type.Name}}
                              </mat-option>
                            </mat-select>
                            <p class="error-message top-40" *ngIf="(!solData.solutions.WiproType)" title="Type is required">Type is required</p>
                          </mat-form-field>
                        </div>
                      <!-- updated mat select ends here -->
                      <!-- Select DROPDOWN STARTS -->
                    </td>
                    <td class="no_pad" [attr.data-label]="'Name'">
                      <!-- name autocomplete starts here-->
                      <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left customized-input cust_autoComplete pos-rel no_pad">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" (clickOutside)="solData.solNameSwitch = false">
                       <form class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                          <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                                      for="solutionName" class="label-form">                                    
                           </label>
                        <div class="pos-rel w-100 float-left no_pad">
                          <input appKeyListControl #solutionNameListBSP (arrowDown)="arrowkeyLocation=$event"
                            (keyup.enter)="solData.nameDD?.length+1 == arrowkeyLocation? openadvancetabsSearch(solData.solutions,'BSSolutionName',solData.nameDD,solData.selectedSolName,solData.solutions.WiproAccountname,j) :solutionNameListBSP.value=solData.nameDD[arrowkeyLocation].AccountName;solData.solNameSwitch=false;appendsolutionname(solData.nameDD[arrowkeyLocation],solData.solutions,j,true)"
                            [attr.data-arrayMaxLength]="solData.nameDD?.length" [attr.data-isDownBtn]=true                                      
                            (input)="solData.solNameSwitch=true" role="combobox" aria-autocomplete="list"
                            [attr.aria-expanded]="solData.solNameSwitch?true:false" aria-owns="read"
                            [attr.aria-activedescendant]="arrowkeyLocation" id="solutionName" name="solutionName"  
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input cp"
                            [name]="solData.solutionNmName" autocomplete="off" type="text" [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!solData.solutions.WiproAccountname)}" [(ngModel)]="solData.solutions.WiproAccountname" (ngModelChange)="getnameArrayDataonType(solData.solutions,j,solData.solutions.WiproAccountname)"
                            placeholder="Search" (click)="solData.solNameSwitch = true;getnameArrayDataonType(solData.solutions,j,solData.solutions.WiproAccountname); service.Summary_window = false;"
                            [disabled]="!solData.solutions.WiproType || disableOnRoleBSSolution" [title]="solData.solutions.WiproAccountname">
                          <span class="mdi mdi-magnify" *ngIf="!(!solData.solNameSwitch && solData.solutions.WiproAccountname)"></span>
                          <span class="mdi mdi-close auto-close" *ngIf="!solData.solNameSwitch && solData.solutions.WiproAccountname"  (click)="clearSelectedItem(j,'solutionAccount')"></span> 
                          <p class="error-message top-40" title="Name is required" *ngIf="(!solData.solutions.WiproAccountname)">Name is required</p>
                        </div>
                          <div
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm border float-left top64 no_pad standard-border color-azure pos-abs z-ind-99 white-bg"
                            *ngIf="solData.solNameSwitch"
                            [ngClass]="(solData.nameDD).length <= 1?'suggestion-box1':(solData.nameDD).length == 2?'suggestion-box2':'suggestion-box h150'">
                            <perfect-scrollbar [ngStyle]="(solData.nameDD).length <= 1?{'max-height':'40px'}:(solData.nameDD).length == 2?{'max-height':'80px'}:{'max-height':'105px'}" class="z-ind-9">
                              <ul *ngIf="solData.solutions.accountNameLoaderSolution" class=" list-group color-azure  sort-dropdown mr2">
                                    <li  class="liststyle_none loader-search"></li>
                              </ul>
                              <ul *ngIf="!solData.solutions.accountNameLoaderSolution" tabindex="0" class=" list-group sort-dropdown">
                                <li id="{{i}}" tabindex="0" role="option" [class.active]="i==arrowkeyLocation"  aria-disabled="false"
                                  class="list-group-item no_pad cp"
                                  (keypress)="appendsolutionname(item, solData.solutions, j)"
                                  (click)="appendsolutionname(item, solData.solutions, j)"
                                  *ngFor="let item of solData.nameDD;let i=index">
                                  <label for="inti_name" class="float-left name cp">
                                <span class="d-block list-name">{{item.AccountName}}</span>
                                    <!-- <span class="d-block sub-list">{{item.Name}}</span> -->
                                      </label>
                                </li>
                                <li class="d-block list-name no_pad pad-10"
                                  *ngIf="(solData.nameDD).length == 0">
                                  No record found </li>
                              </ul>
                            </perfect-scrollbar>
                            <span class="db-search">
                              <button id="adls{{solData.nameDD?.length+1}}" role="option" tabindex="0"  (click)="openadvancetabsSearch(solData.solutions,'BSSolutionName',solData.nameDD,solData.selectedSolName,solData.solutions.WiproAccountname,j)"
                              [class.active]="solData.nameDD?.length+1 == arrowkeyLocation"
                              [disabled] = "solData.solutions.accountNameLoaderSolution" aria-disabled="false" aria-label="Advance look up" type="button" class="button-search" >
                                <span class="mdi mdi-file-outline"></span> Advance look up
                              </button>
                            </span>
                          </div>
                       </form>
                        </div>
                      </div>
                      <!--name autocomplete ends here-->
                    </td>
  
                    <td class="no_pad" [attr.data-label]="'Owner'">
                      <!-- owner autocomplete starts here-->
                      <div
                        class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left customized-input cust_autoComplete pos-rel no_pad">
                         <form class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                          <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                                      for="solutionOwnerName" class="label-form">                                    
                           </label>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                            <input appKeyListControl #solutionOwnerListBSP (arrowDown)="arrowkeyLocation=$event"
                            (keyup.enter)="solutionOwnerListBSP.value=solData.ownerDD[arrowkeyLocation].Name;solData.solOwnerSwitch=false;appendOwnername(solData.ownerDD[arrowkeyLocation],solData.solutions,j,true)"
                            [attr.data-arrayMaxLength]="solData.ownerDD?.length" [attr.data-isDownBtn]=true                                      
                            (input)="solData.solOwnerSwitch=true" role="combobox" aria-autocomplete="list"
                            [attr.aria-expanded]="solData.solOwnerSwitch?true:false" aria-owns="read"
                            [attr.aria-activedescendant]="arrowkeyLocation" id="solutionOwnerName" name="solutionOwnerName"  
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input cp"
                            [name]="solData.solutionOwnerName" autocomplete="off" type="text" [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!solData.solutions.OwnerIdValueName)}" [(ngModel)]="solData.solutions.OwnerIdValueName" (ngModelChange)="getOwnerArray(solData.solutions,j,solData.solutions.OwnerIdValueName)"
                             placeholder="Search" (click)="solData.solOwnerSwitch = true;getOwnerArray(solData.solutions,j,solData.solutions.OwnerIdValueName); service.Summary_window = false;" (clickOutside)="solData.solOwnerSwitch = false"
                            [disabled]="!solData.solutions.WiproAccountname || disableOnRoleBSSolution ||solData.solutions.WiproType == '184450001'" [title]="solData.solutions.OwnerIdValueName">
                          <span class="mdi mdi-magnify" *ngIf="!(!solData.solOwnerSwitch && solData.solutions.OwnerIdValueName)"></span>
                          <span class="mdi mdi-close auto-close" *ngIf="!solData.solOwnerSwitch && solData.solutions.OwnerIdValueName" (click)="clearSelectedItem(j,'solutionOwner')"></span> 
                          <p class="error-message top-40" title="Owner is required" *ngIf="(!solData.solutions.OwnerIdValueName)">Name is required</p>
                        </div>
                          <div
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm border float-left top64 no_pad standard-border color-azure pos-abs z-ind-99 white-bg"
                            *ngIf="solData.solOwnerSwitch"
                            [ngClass]="(solData.ownerDD).length <= 1?'suggestion-box1':(solData.ownerDD).length == 2?'suggestion-box2':'suggestion-box'">
                            <perfect-scrollbar [ngStyle]="(solData.ownerDD).length <= 1?{'max-height':'40px'}:(solData.ownerDD).length == 2?{'max-height':'80px'}:{'max-height':'107px'}" class="z-ind-9">
                              <ul *ngIf="solData.solutions.accountOwnerLoaderSolution" class=" list-group color-azure  sort-dropdown mr2">
                                    <li  class="liststyle_none loader-search"></li>
                              </ul>
                              <ul *ngIf="!solData.solutions.accountOwnerLoaderSolution" tabindex="0" class=" list-group sort-dropdown">
                                <li id="{{i}}" tabindex="0" role="option" [class.active]="i==arrowkeyLocation"  aria-disabled="false"
                                  class="list-group-item no_pad cp"
                                  (keypress)="appendOwnername(item, solData.solutions, j)"
                                  (click)="appendOwnername(item, solData.solutions, j)"
                                  *ngFor="let item of solData.ownerDD;let i=index">
                                  <label for="inti_name" class="float-left name cp">
                                <span class="d-block list-name">{{item.Name}}</span>
                                    <!-- <span class="d-block sub-list">{{item.Name}}</span> -->
                                      </label>
                                </li>
                                <li class="d-block list-name no_pad pad-10"
                                  *ngIf="(solData.ownerDD).length == 0">
                                  No record found </li>
                              </ul>
                            </perfect-scrollbar>
                           <span class="db-search">
                              <button id="advanceSolutionNameSearch{{j}}" role="option" tabindex="0"  (click)="openadvancetabsSearch(solData.solutions,'BSSolutionOwnerName',solData.ownerDD,solData.selectedOwnerName,solData.solutions.OwnerIdValueName,j)"
                               [disabled] = "solData.solutions.accountOwnerLoaderSolution" aria-disabled="false" aria-label="Advance look up" type="button" class="button-search" >
                                <span class="mdi mdi-file-outline"></span> Advance look up
                              </button>
                            </span>
                        </div>
                         </form>
                      </div>
                      <!--owner autocomplete ends here-->
  
                    </td>
                    <td class="customized-checkbox" [attr.data-label]="'%'">
                      <mat-checkbox aria-label="select" [name]="solData.solutionPerName" [(ngModel)]="solData.solutions.WiproPercentage" [disabled]="disableOnRoleBSSolution">
                      </mat-checkbox>
                    </td>
                    <td class="width10" [attr.data-label]="'% of TCV'">
                      <div class="customized-input">
                         <label [for]="solData.solutionTCVName" class=""> </label> 
                          <div class="pos-rel w-100 float-left no_pad">
                        <input type="text" maxlength="12"
                          onkeypress="return event.charCode >= 46
                        && event.charCode <= 57"
                        class="border-gray w-100"  [name]="solData.solutionTCVName" [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!solData.solutions.WiproPercentageOfTCV && solData.solutions.WiproPercentage)}" [(ngModel)]="solData.solutions.WiproPercentageOfTCV" placeholder="00.00" (keyup)="checkTCVPerc(solData.solutions,j)" onpaste="return true;"  ondrop="return false;" (blur)="checkTCVPercBlur(solData.solutions,j)" [disabled]='solData.solutions.WiproPercentage == false || disableOnRoleBSSolution'[title]="solData.solutions.WiproPercentageOfTCV">
                         <p class="error-message top-40" *ngIf="(!solData.solutions.WiproPercentageOfTCV && solData.solutions.WiproPercentage)" title="% of TCV is required">% of TCV is required</p>
                      </div>
                      </div>
                    </td>
                    <td class="width10" [attr.data-label]="'Solution value'">
                      <div class="customized-input">
                        <label for="solval" class=""> </label>
                        <div class="pos-rel w-100 float-left no_pad">
                          <input id="solval" type="number"  min="0" maxlength="12" 
                        oninput="javascript: if (this.value.split('.')[0].length > this.maxLength) { this.value = this.value.slice(0, this.maxLength); } else { let values = this.value.split('.');
                         if(values[1] && values[1].length > 2)  this.value = values[0] + '.' + values[1].slice(0,2)}"                        
                          class="border-gray w-100"  [name]="solData.solutionValueName" [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!solData.solutions.WiproValue && !solData.solutions.WiproPercentage) || solData.solutions.showOrangeBorderFlagSolution}" [(ngModel)]="solData.solutions.WiproValue" (keyup)="checkSolValue(solData.solutions,j)" onpaste="return true;"  ondrop="return false;" (blur)="checkSolValueBlur(solData.solutions,j)" placeholder="00.00" [disabled]='solData.solutions.WiproPercentage == true || disableOnRoleBSSolution'[title]="solData.solutions.WiproValue">
                          <p class="error-message top-40" *ngIf="(!solData.solutions.WiproValue && !solData.solutions.WiproPercentage)" title="Solution value is required">Solution value is required</p>
                        </div>
                      </div>
                    </td>
                    <td class="no_pad" [attr.data-label]="'Solution BDM'">
                      <!-- solbdm autocomplete starts here-->
                      <div
                         class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left customized-input cust_autoComplete pos-rel no_pad" (clickOutside)="solData.solbdmNameSwitch = false">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                          <form class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                          <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                                      for="solutionBDMName" class="label-form">                                    
                           </label>
                          <input appKeyListControl #solutionBDMListBSP (arrowDown)="arrowkeyLocation=$event"
                            (keyup.enter)="solData.solutionBDMDD?.length+1 == arrowkeyLocation? openadvancetabsSearch(solData.solutions,'BSIPSolutionBDM',solData.solutionBDMDD,solData.selectedSolBDM,solData.solutions.WiproSolutionBDMName,j) : solutionBDMListBSP.value=solData.solutionBDMDD[arrowkeyLocation].Name;solData.solbdmNameSwitch=false;appendsolutionBDM(solData.solutionBDMDD[arrowkeyLocation],solData.solutions,j,true)"
                            [attr.data-arrayMaxLength]="solData.solutionBDMDD?.length" [attr.data-isDownBtn]=true                                      
                            (input)="solData.solbdmNameSwitch=true" role="combobox" aria-autocomplete="list"
                            [attr.aria-expanded]="solData.solbdmNameSwitch?true:false" aria-owns="read"
                            [attr.aria-activedescendant]="arrowkeyLocation" id="solutionBDMName" name="solutionBDMName"  
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input cp"
                            [name]="solData.solutionBDMName" autocomplete="off" type="text" [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!solData.solutions.WiproSolutionBDMName && solData.solutions.WiproType == '184450001')}" [(ngModel)]="solData.solutions.WiproSolutionBDMName" (ngModelChange)="getsolutionBDMArray(solData.solutions,j,solData.solutions.WiproSolutionBDMName)"
                            placeholder="Search" (click)="solData.solbdmNameSwitch = true;getsolutionBDMArray(solData.solutions,j,solData.solutions.WiproSolutionBDMName); service.Summary_window = false;" 
                            [disabled]="solData.solutions.WiproType != '184450001' || !solData.solutions.WiproAccountname || !solData.solutions.WiproAccountNameValue || disableOnRoleBSSolution || solData.solutions.WiproSolutionBDMValue == solData.solutions.OwnerIdValue" [title]="solData.solutions.WiproSolutionBDMName">
                          <span class="mdi mdi-magnify" *ngIf="!(!solData.solbdmNameSwitch && solData.solutions.WiproSolutionBDMName)"></span>
                          <span class="mdi mdi-close auto-close" *ngIf="!solData.solbdmNameSwitch && solData.solutions.WiproSolutionBDMName && solData.solutions.WiproSolutionBDMValue !== solData.solutions.OwnerIdValue" (click)="clearSelectedItem(j,'solutionBDM')"></span> 
                          <div
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm border float-left top64 no_pad standard-border color-azure pos-abs z-ind-99 white-bg"
                            *ngIf="solData.solbdmNameSwitch"
                            [ngClass]="(solData.solutionBDMDD).length <= 1?'suggestion-box1':(solData.solutionBDMDD).length == 2?'suggestion-box2':'suggestion-box'">
                            <perfect-scrollbar [ngStyle]="(solData.solutionBDMDD).length <= 1?{'max-height':'40px'}:(solData.solutionBDMDD).length == 2?{'max-height':'80px'}:{'max-height':'107px'}" class="z-ind-9">
                              <ul *ngIf="solData.solutions.solutionBDMLoaderSolution" class=" list-group color-azure  sort-dropdown mr2">
                                    <li  class="liststyle_none loader-search"></li>
                              </ul>
                              <ul *ngIf="!solData.solutions.solutionBDMLoaderSolution" tabindex="0" class=" list-group sort-dropdown">
                                <li id="{{i}}" tabindex="0" role="option" [class.active]="i==arrowkeyLocation"  aria-disabled="false"
                                  class="list-group-item no_pad cp"
                                  (keypress)="appendsolutionBDM(item,solData.solutions,j)"
                                  (click)="appendsolutionBDM(item,solData.solutions,j)"
                                  *ngFor="let item of solData.solutionBDMDD;let i = index">
                                  <label for="inti_name" class="float-left name cp">
                                    <span class="d-block list-name">{{item.Name}}</span>
                                    <!-- <span class="d-block sub-list">{{item.subtitle}}</span> -->
                                  </label>
                                </li>
                                <li class="d-block list-name no_pad pad-10"
                                  *ngIf="(solData.solutionBDMDD).length == 0">
                                  No record found </li>
                              </ul>
                            </perfect-scrollbar>
                            <span class="db-search">
                              <button id="adls{{solData.solutionBDMDD?.length+1}}" role="option" tabindex="0"  (click)="openadvancetabsSearch(solData.solutions,'BSIPSolutionBDM',solData.solutionBDMDD,solData.selectedSolBDM,solData.solutions.WiproSolutionBDMName,j)"
                              [class.active]="solData.solutionBDMDD?.length+1 == arrowkeyLocation"
                              [disabled]="solData.solutions.solutionBDMLoaderSolution" aria-disabled="false" aria-label="Advance look up" type="button" class="button-search" >
                                <span class="mdi mdi-file-outline"></span> Advance look up
                              </button>
                            </span>
                          </div>
                          </form>
                        </div>
                      </div>
                      <!--solbdm autocomplete ends here-->
                    </td>
                    <td [attr.data-label]="'Influence type'">
                        <!-- Select DROPDOWN STARTS -->
                          <!-- updated mat select starts here -->
                          <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad">
                            <mat-form-field class="col-12 no_pad float-left">
                              <mat-select disableOptionCentering panelClass="Select-panel-class" class="select-focus mat-select {{service.getSelectedClass(solData.solutions.WiproInfluenceType)}}" role="listbox"
                                [name]="solData.solutionInfName" title=""
                                [ngClass]="{'' : service.Summary_window ,'orangeborder':(!solData.solutions.WiproInfluenceType && solData.solutions.WiproType && solData.solutions.WiproType != '184450001')}"
                                [(ngModel)]="solData.solutions.WiproInfluenceType"
                                [disabled]="solData.solutions.WiproType == '184450001' || !solData.solutions.WiproType || disableOnRoleBSSolution"
                                (selectionChange)="resetServiceType(solData.solutions,j)" [title]="solData.solutions.WiproInfluenceTypeName">
                                <mat-option selected hidden disabled value="">Select</mat-option>
                                <mat-option *ngFor="let Inf of InfluenceTypeDD" [hidden]="!Inf.IsVisible && Inf.Id !==solData.solutions.selectedInfluenceType" [value]="Inf.Id" [title]="Inf.Name" >{{Inf.Name}}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                             <p class="error-message top-40" *ngIf="(!(solData.solutions.WiproType == '184450001' || !solData.solutions.WiproType || disableOnRoleBSSolution) && !solData.solutions.WiproInfluenceType)" title="Influence type is required">Influence type is required</p>
                          </div>
                      <!-- updated mat select ends here -->
                        <!-- Select DROPDOWN STARTS -->
                      </td>
                      <td [attr.data-label]="'Service type'">
                          <!-- Select DROPDOWN STARTS -->

                            <!-- updated mat select starts here -->
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad">
                              <mat-form-field class="col-12 no_pad float-left">
                                <mat-select disableOptionCentering panelClass="Select-panel-class" class="select-focus mat-select {{service.getSelectedClass(solData.solutions.WiproServiceType)}}"
                                  title=""
                                  role="listbox" [name]="solData.solutionSTName"
                                  [ngClass]="{'' : service.Summary_window ,'orangeborder':(!solData.solutions.WiproServiceType && solData.solutions.WiproType && solData.solutions.WiproType != '184450001' && solData.solutions.WiproInfluenceType && solData.solutions.WiproInfluenceType != '184450001')}"
                                  [(ngModel)]="solData.solutions.WiproServiceType"
                                  [disabled]="solData.solutions.WiproType == '184450001' || !solData.solutions.WiproType || solData.solutions.WiproInfluenceType == '184450001' || disableOnRoleBSSolution || !solData.solutions.WiproInfluenceType" 
                                  [title]="solData.solutions.WiproServiceTypeName" (selectionChange)="setServiceTypeName(solData.solutions,j)">
                                  <mat-option selected hidden disabled value="">Select</mat-option>
                                  <mat-option *ngFor="let ST of serviceTypeDD" [value]="ST.Id" [title]="ST.Name">{{ST.Name}}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                                 <p class="error-message top-40" *ngIf="(!(solData.solutions.WiproType == '184450001' || !solData.solutions.WiproType || solData.solutions.WiproInfluenceType == '184450001' || disableOnRoleBSSolution || !solData.solutions.WiproInfluenceType) && !solData.solutions.WiproServiceType)" title="Service type is required">Service type is required</p>
                            </div>
                      <!-- updated mat select ends here -->
                          <!-- Select DROPDOWN STARTS -->
                        </td>
                    <td class="no_pad display_flex">
                        <div class="mobile-align display_flex">
                        <!--<button class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn" aria-label="view"
                        matTooltip="View">
                        <span class="col-xs-12 nopad blue_circle_replay_img mdi mdi-eye"></span>
                      </button>-->
                      <button class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn" *ngIf="!disableOnRoleBSSolution" aria-label="Delete"
                        matTooltip="Delete" (click)="deleteBSSolutionValidation(solData.solutions,'solution',j)">
                        <span class="col-xs-12 nopad blue_circle_replay_img mdi  mdi-delete"></span>
                      </button>
                      </div>
                    </td>
                  </tr>
                  <tr *ngIf="solData.solutions.WiproType == 184450000">
                    <td class="float-right">
                      <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad label-form mb0 pad-9">Deal registered*
                        <span class="mdi mdi-information-outline info-icon" tabindex="0" (click)="editData(solData.solutions,j)" aria-labelledby="atool atoola"></span></label>
                    </td>
                    <td>
                      <!-- Select DROPDOWN STARTS -->
                        <div class="customized-select mobile-select-box">
                          <span class="caret color-azure"></span>
                          <select role="listbox" [(ngModel)]="solData.solutions.DealRegistration.IsDealRegistered" (selectionChange)="changeDealRegistered(solData.solutions,j,$event)" name="isDealRegistered" [title]="solData.solutions.DealRegistration.IsDealRegistered">
                            <option selected hidden disabled value="">Select</option>
                            <option value="true"> Yes </option>
                            <option value="false"> No</option>

                          </select>
                        </div>
                        <!-- updated mat select starts here -->
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad web-select-box ">
                          <mat-form-field class="col-12 no_pad float-left">
                            <mat-select disableOptionCentering panelClass="Select-panel-class" class="select-focus mat-select"
                              role="listbox" [(ngModel)]="solData.solutions.DealRegistration.IsDealRegistered" (selectionChange)="changeDealRegistered(solData.solutions,j,$event)" name="isDealRegistered" [title]="solData.solutions.DealRegistration.IsDealRegistered">
                              <mat-option selected hidden disabled value="" >Select</mat-option>
                              <mat-option value="true"> Yes </mat-option>
                              <mat-option value="false"> No </mat-option>
                            </mat-select>
                            <!-- <p class="error-message top-40" *ngIf="(!solData.solutions.WiproType)" title="Type is required">Type is required</p>-->
                          </mat-form-field> 
                        </div>
                      <!-- updated mat select ends here -->
                      <!-- Select DROPDOWN STARTS -->
                    </td>
                  </tr>
                  
                  </tbody>
                <tbody *ngIf="SolutionDetails.length==0 && !solutionLoader">
                <tr class="nodata_tr">
                    <td class="nodata_td" colSpan="12"> No records found </td>
                  </tr>
                </tbody>
              </table>
                <!-- </perfect-scrollbar> -->
            </div>
            <!-- Table ends here -->
          </div>
        </mat-expansion-panel>
  
      </div>
      </div>
      <!-- Solution panel ends here -->
    </div>

    <!-- READONLY FIELDS STARTS HERE -->
    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad mobile-mb50" *ngIf="!disableReadOnly || IsAppirioFlag">
  
      <!-- business solution panel starts here -->
      <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
        <mat-expansion-panel hideToggle="true" [expanded]="panelOpenState2readonly" class="no_pad"
          (opened)="panelOpenState2readonly = true" (closed)="panelOpenState2readonly = false">
          <div class="col-12 no_pad float-left mt20" *ngIf="businessSOlutionData.length>0">
            <!--search starts here-->
            <!-- <div
              class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8  float-left plb-60-20 customized-input cust_autoComplete pos-rel mb1">
            </div> -->
            <!--search ends here-->
  
            <!-- function check box starts here -->
            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4  float-left no_pad customized-checkbox">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad label-form">Wipro function
                  involved?</label>
                  <div class="col-12 no_pad float-left mt10">
                <mat-checkbox aria-label="CIO" class="pd0" name="CIO" [(ngModel)]="businessSOlutionData[0].CIO" disabled>CIO</mat-checkbox>
                <mat-checkbox aria-label="FMG" class="pd0" name="FMG" [(ngModel)]="businessSOlutionData[0].FMG" disabled>FMG</mat-checkbox>
                <mat-checkbox aria-label="HR" class="pd0" name="HR" [(ngModel)]="businessSOlutionData[0].HR" disabled>HR</mat-checkbox>
                <mat-checkbox aria-label="Agile" class="pd0" name="AGL" [(ngModel)]="businessSOlutionData[0].Agile" disabled>Agile</mat-checkbox>
              </div>
              </div>
            </div>
            <!-- function check box ends here -->
  
            <div class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8 no_pad float-left pad_bottom_0">
  
              <!-- select method radio buttons -->
            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4 no_pad float-left pad_bottom_0">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad label-form">Select method of TCV calculation*</label>
                <mat-radio-group class="float-left mt12 pt-10" name="BSPradio" [(ngModel)]="businessSOlutionData[0].TCVCalculation" aria-labelledby="key" disabled>
                  <!-- <mat-radio-button value="tcv" class="pr30 label-form-blue" (click)="opentcvpopup()">% of TCV</mat-radio-button> -->
                 <mat-radio-button [value]=true class="pr30 label-form-blue" >% of TCV</mat-radio-button>
                   <mat-radio-button [value]=false class="label-form-blue ">Revenue
                  </mat-radio-button>
                </mat-radio-group>
              </div>
            </div>
            <!-- select method radio buttons -->
              <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2 no_pad float-left pad-left0 pad_bottom_0 mobile-no_pad">
                  <div class="customized-input">
                      <label for="license" class="label-form">SL TCV ({{CurrencySymbol}})</label>
                      <span class="col-12 no_pad float-left subtext1 pt-10">{{(businessSOlutionData[0].Sltcv)?businessSOlutionData[0].Sltcv:'0.00'}}</span>
                    </div>               
              </div>
              
              <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2 no_pad float-left pad-left0 pad_bottom_0 mobile-no_pad">
                  <div class="customized-input">
                      <label for="license" class="label-form">IP TCV ({{CurrencySymbol}})</label>
                      <span class="col-12 no_pad float-left subtext1 pt-10">{{(businessSOlutionData[0].IpTcv)?businessSOlutionData[0].IpTcv:'0.00'}}</span>
                    </div>               
              </div>
              <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4 no_pad float-left pad_bottom_0">
                <div class="col-5 no_pad float-left customized-input">
                    <label class="col-12 no_pad float-left label-form">Overall TCV</label>
                <span class="col-12 no_pad float-left subtext1 pt-10">{{(overalltcvComma)?overalltcvComma:'0.00'}}</span>
                </div>
                <button aria-label="TCV comparison"
                class="col-7 mt20 primary-button h-40 std save-responsive-btn float-right pad_10" (click)="openTCVcomparison()" *ngIf="IsPricingId"><span class="mdi mdi-eye"></span> TCV comparison</button>
            </div>
            </div>
         

              
  
          </div>
        </mat-expansion-panel>
      </div>
      <!-- business solution panel ends here -->
  
  
      <!-- service lines panel starts here -->
      <div class="col-12 no_pad float-left tableReadonly">
      <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left pad-26 no_pad service-tab">
        <mat-expansion-panel hideToggle="true" [expanded]="panelOpenState3readonly" class="no_pad"
          (opened)="panelOpenState3readonly = true" (closed)="panelOpenState3readonly = false">
          <mat-expansion-panel-header class="min_height60 mob_width100">
            <div class="min_height60 col-12 no_pad">
              <div class="accord-heading col-12">
                <span
                  [ngClass]="panelOpenState3readonly ? 'mdi mdi-chevron-down chevron-right float-left':'mdi mdi-chevron-right chevron-right float-left'"></span>
                <div class="float-left no_pad mob-busines-header w-80"> <span class="accordian-title cardsHead col-6 no_pad">
                    Service lines</span></div>
              </div>
            </div>
          </mat-expansion-panel-header>
   <!-- expansion data starts here -->
          <div class="col-12 no_pad float-left btop_withoutpadding">
            <!-- Table starts here -->
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad scroll-tabs overflowscroll" [ngClass]="!service.Summary_window ? '' : 'table-responsive'">
                <perfect-scrollbar class="minheight">
              <table class="table table-borderless">
                <thead>
                  <tr>
                    <th>Service lines</th>
                    <th>Practice</th>
                    <th>Sub practice</th>
                    <th>ServiceLine BDM</th>
                    <th>% of TCV</th>
                    <th>Est. SL TCV</th>
                    <th>Cloud</th>
                    <th>Engagement model</th>
                    <th>Dual credit</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let BSSLdata of BSSLDetails;let p=index">
                      <td>{{(BSSLdata.BSServiceLine.WiproServicelineidValueName)?BSSLdata.BSServiceLine.WiproServicelineidValueName:'-'}}</td>
                      <td>{{(BSSLdata.BSServiceLine.WiproPracticeName)?BSSLdata.BSServiceLine.WiproPracticeName:'-'}}</td>
                      <td>{{(BSSLdata.BSServiceLine.WiproSubpracticeName)?BSSLdata.BSServiceLine.WiproSubpracticeName:'-'}}</td>
                      <td>{{(BSSLdata.BSServiceLine.WiproSlbdmidValueName)?BSSLdata.BSServiceLine.WiproSlbdmidValueName:'-'}}</td>
                      <td>{{BSSLdata.BSServiceLine.WiproPercentageOftcv}}</td>
                      <td>{{BSSLdata.BSServiceLine.WiproEstsltcv}}</td>
                      <td>{{(BSSLdata.BSServiceLine.Cloud)?'Yes':'No'}}</td>
                      <td>{{(BSSLdata.BSServiceLine.WiproEngagementModelName)?BSSLdata.BSServiceLine.WiproEngagementModelName:'-'}}</td>
                      <td>{{(BSSLdata.BSServiceLine.WiproDualCreditName)?BSSLdata.BSServiceLine.WiproDualCreditName:'-'}}</td>
                      <td>
                          <div class="mobile-align display_flex">
                              <button class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn" aria-label="more"
                              matTooltip="More" (click)="navigatetoBSSLCloud(BSSLdata.BSServiceLine,p,false)">
                              <span class="col-xs-12 nopad blue_circle_replay_img mdi  mdi-dots-horizontal"></span>
                            </button>
                          </div>
                      </td>
                    </tr>
                  </tbody>
                
              </table>
              </perfect-scrollbar>
            </div>
            <!-- Table ends here -->
          </div>
        </mat-expansion-panel>
  
      </div>
      <!-- service lines panel ends here -->
      </div>
  <!-- service lines panel ends here -->
  
      <!-- IP panel starts here -->
      <div class="col-12 no_pad float-left tableReadonly">
      <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left pad-26 pad_t0 ip-tab">
        <mat-expansion-panel hideToggle="true" [expanded]="panelOpenState4readonly" class="no_pad"
          (opened)="panelOpenState4readonly = true" (closed)="panelOpenState4readonly = false">
          <mat-expansion-panel-header class="min_height60 mob_width100">
            <div class="min_height60 col-12 no_pad">
              <div class="accord-heading col-12">
                <span
                  [ngClass]="panelOpenState4readonly ? 'mdi mdi-chevron-down chevron-right float-left':'mdi mdi-chevron-right chevron-right float-left'"></span>
                <div class="float-left no_pad mob-busines-header w-80"> <span class="accordian-title cardsHead col-6 no_pad">
  
                    IP</span></div>
              </div>
            </div>
          </mat-expansion-panel-header>
          <div class="col-12 no_pad float-left btop_withoutpadding">
            <!-- Table starts here -->
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad scroll-tabs overflowscroll" [ngClass]="!service.Summary_window ? '' : 'table-responsive'">
                <perfect-scrollbar class="minheight">
              <table class="table table-borderless">
                <thead>
                  <tr>
                    <th>IP</th>
                    <th>Module</th>
                    <th>Service line</th>
                    <th>Practice</th>
                    <th>SL BDM</th>
                    <th>License value</th>
                    <th>AMC value</th>
                    <th>Cloud</th>
                    <th>Accept IP</th>
                    <th>Holmes BDM</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let Ipdata of IpDetails;let p=index">
                      <td>{{(Ipdata.IP.IpName)?Ipdata.IP.IpName:'-'}}</td>
                      <td>{{(Ipdata.IP.WiproModuleName)?Ipdata.IP.WiproModuleName:'-'}}</td>
                      <td>{{(Ipdata.IP.WiproServicelineName)?Ipdata.IP.WiproServicelineName:'-'}}</td>
                      <td>{{(Ipdata.IP.WiproPracticeName)?Ipdata.IP.WiproPracticeName:'-'}}</td>
                      <td>{{(Ipdata.IP.WiproSlbdmName)?Ipdata.IP.WiproSlbdmName:'-'}}</td>
                      <td>{{(Ipdata.IP.WiproLicenseValue)?Ipdata.IP.WiproLicenseValue:'-'}}</td>
                      <td>{{(Ipdata.IP.WiproAmcvalue)?Ipdata.IP.WiproAmcvalue:'-'}}</td>
                      <td>{{(Ipdata.IP.WiproCloud)?'Yes':'No'}}</td>
                      <td>{{(Ipdata.IP.AcceptIpUI)?'Yes':'No'}}</td>
                      <td>{{(Ipdata.IP.WiproHolmesbdmName)?Ipdata.IP.WiproHolmesbdmName:'-'}}</td>
                      <td>
                          <div class="mobile-align display_flex">
                              <!--<button class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn" aria-label="View"
                            matTooltip="View">
                            <span class="col-xs-12 nopad blue_circle_replay_img mdi  mdi-eye"></span>
                          </button>-->
                              <button class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn" aria-label="more"  (click)="navigatetoIPCloud(Ipdata.IP,p,false,Ipdata.HolmesDisable)"
                              matTooltip="More">
                              <span class="col-xs-12 nopad blue_circle_replay_img mdi  mdi-dots-horizontal"></span>
                            </button>
                          
                          </div>
                      </td>
                    </tr>
                  </tbody>
              </table>
              </perfect-scrollbar>
            </div>
            <!-- Table ends here -->
          </div>
        </mat-expansion-panel>
  
      </div>
      </div>
      <!-- IP panel ends here -->
  
  
      <!-- Solution panel starts here -->
      <div class="col-12 no_pad float-left tableReadonly">
      <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left pad-26 pad_t0 solution-tab ">
        <mat-expansion-panel hideToggle="true" [expanded]="panelOpenState5readonly" class="no_pad"
          (opened)="panelOpenState5readonly = true" (closed)="panelOpenState5readonly = false">
          <mat-expansion-panel-header class="min_height60 mob_width100">
            <div class="min_height60 col-12 no_pad">
              <div class="accord-heading col-12">
                <span
                  [ngClass]="panelOpenState5readonly ? 'mdi mdi-chevron-down chevron-right float-left':'mdi mdi-chevron-right chevron-right float-left'"></span>
                <div class="float-left no_pad mob-busines-header w-80"> <span class="accordian-title cardsHead col-6 no_pad">
                    Solution</span></div>
              </div>
            </div>
          </mat-expansion-panel-header>
  
          <div class="col-12 no_pad float-left btop_withoutpadding">
            <!-- Table starts here -->
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad scroll-tabs overflowscroll" [ngClass]="!service.Summary_window ? '' : 'table-responsive'">
                <perfect-scrollbar class="minheight">
              <table class="table table-borderless">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Owner</th>
                    <th>%</th>
                    <th>% of TCV</th>
                    <th>Solution value</th>
                    <th>Solution BDM</th>
                    <th>Influence type</th>
                    <th>Service type</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let solData of SolutionDetails">
                      <td>{{(solData.solutions.WiproTypeName)?solData.solutions.WiproTypeName:'-'}}</td>
                      <td>{{(solData.solutions.WiproAccountname)?solData.solutions.WiproAccountname:'-'}}</td>
                      <td>{{(solData.solutions.OwnerIdValueName)?solData.solutions.OwnerIdValueName:'-'}}</td>
                      <td>{{(solData.solutions.WiproPercentage)?'Yes':'No'}}</td>
                      <td>{{solData.solutions.WiproPercentageOfTCV}}</td>
                      <td>{{solData.solutions.WiproValue}}</td>
                      <td>{{(solData.solutions.WiproSolutionBDMName)?solData.solutions.WiproSolutionBDMName:'-'}}</td>
                      <td>{{(solData.solutions.WiproInfluenceTypeName)?solData.solutions.WiproInfluenceTypeName:'-'}}</td>
                      <td>{{(solData.solutions.WiproServiceTypeName)?solData.solutions.WiproServiceTypeName:'-'}}</td>
                      <td>
                          <div class="mobile-align display_flex">
                            <!--<button class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn" aria-label="View"
                            matTooltip="View">
                            <span class="col-xs-12 nopad blue_circle_replay_img mdi  mdi-eye"></span>
                          </button>-->
                          </div>
                      </td>
                    </tr>
                  </tbody>
              </table>
              </perfect-scrollbar>
            </div>
            <!-- Table ends here -->
          </div>
        </mat-expansion-panel>
  
      </div>
      </div>
      <!-- Solution panel ends here -->
  
    </div>
    <!-- READONLY FIELDS ENDS HERE -->
  </form>
  </div>