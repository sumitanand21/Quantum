<div class="col-12 float-left  no_pad ipmoreoption ipdata businesssolution-page ippop">

  <div class="col-12 float-left  container-dialog popup-padding">

    <div class="col-12 float-left no_pad popup-hd">
      <span class="col-11 float-left  no_pad search-db-hd-txt" mat-dialog-title>Additional details : IP</span>
      <button class="col-1 float-left no_pad btndef-none mdi mdi-window-close close-icn" aria-label="close" mat-dialog-close></button>
    </div>

    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 no_pad popup-tabs">
      <div class="row col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 no_pad pad-top float-left">
        <div class="col-6 col-sm-5 col-md-4 col-lg-3 col-xl-3 text-center ">
          <button aria-labelledby="Wipro" class="btn  btn-circle mb-5" [ngClass]="{'btn-default bg-light text-primary': wiproDatabsebtn == false ,'btn-primary text-light': wiproDatabsebtn == true}"
            role="tab" [attr.aria-selected]="wiproDatabsebtn ? 'true':''" (click)="additionalInfo()">
                        <span class="mdi mdi-regex"></span></button>
          <br>
          <span class="text-fontpop" id="Wipro">Additional IP Information</span>
          <div class="popup-tabs-arrow" *ngIf="wiproDatabsebtn"></div>
        </div>

        <div class="col-6 col-sm-5 col-md-4 col-lg-3 col-xl-3 text-center mr-lt ">
          <button aria-labelledby="database" class="btn btn-circle mb-5" [ngClass]="{'btn-default bg-light text-primary': dDatabasebtn == false ,'btn-primary text-light': dDatabasebtn == true}"
            role="tab" [attr.aria-selected]="dDatabasebtn ? 'true':''" (click)="servicevalue()"> <span
                            class="mdi mdi-cloud-outline"></span></button>
          <br>
          <span class="text-fontpop" id="database">Cloud details</span>
          <div class="popup-tabs-arrow" *ngIf="dDatabasebtn"></div>
        </div>
      </div>
    </div>

    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad mt-90 mb-30" *ngIf="wiproDatabsebtn">


      <div class="col-12 float-left no_pad borderBottom" *ngIf="!disableUserAccessIP">
        <button aria-label="Delete IP additional info." class="col-9 col-sm-9 col-md-5 col-lg-3 col-xl-3 primary-button ml10 h-40 std save-responsive-btn float-right pad_10 mb20"
          (click)="ipadditionaldelete();panelOpenState2 = false" >
                          <span class="mdi mr10 mdi-delete"></span>Delete
                          IP additional info.</button>
      </div>

      <perfect-scrollbar style="max-height:275px">
        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">

          <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
            <div class="col-6 float-left no_pad" *ngFor="let tab of table_data">

              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left plb-0-10 height60 customized-input" [ngClass]="(tab.first_data.includes('Est') && (this.userGuid==this.ipObj.Details.WiproSolutionOwnerId || this.userGuid==this.ipObj.Details.WiproHolmesbdmID) && accessSaveButton)?'height80':''">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad label-text ellipses">{{tab.first_data}}</label>
                <span *ngIf="!(tab.first_data.includes('Est') && (this.userGuid==this.ipObj.Details.WiproSolutionOwnerId || this.userGuid==this.ipObj.Details.WiproHolmesbdmID) && accessSaveButton)" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad sub-text ellipses" [title]="tab.second_data">{{tab.second_data}}</span>
                <input *ngIf="(tab.first_data.includes('Est') && (this.userGuid==this.ipObj.Details.WiproSolutionOwnerId || this.userGuid==this.ipObj.Details.WiproHolmesbdmID) && accessSaveButton)" 
                 onkeypress="return event.charCode >= 46 && event.charCode <= 57"  min="0" type="number" maxlength="12" 
                 oninput="javascript: if (this.value.length > this.maxLength) { this.value = this.value.slice(0, this.maxLength); } else { let values = this.value.split('.');
                  if(values[1] && values[1].length > 2)  this.value = values[0] + '.' + values[1].slice(0,2)}"
                [(ngModel)]="tab.second_data" id="value1" class="col-9 border-gray w-100" value="" placeholder="Enter {{tab.first_data}}">
            
              </div>

            </div>
          </div>

          <div class="col-12 no_pad float-left"> <span class="col-12 sub-text pad-topbtm float-left plb-0-10 font-14">Services
                    Value</span>
          </div>

          <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left plb-0-10">
            <div class="customized-input">
              <label for="field1" class="w-100">Implementation ({{currencySymbol}})</label>
              <input id="field1" onkeypress="return event.charCode >= 46
                 && event.charCode <= 57" [disabled]="disableUserAccessIP" min="0" type="number" class="col-9 border-gray w-100"
                [(ngModel)]="this.additionalIpData.WiproImplementationValue" 
                value="" placeholder="00.00" maxlength="12" oninput="javascript: if (this.value.length > this.maxLength) { this.value = this.value.slice(0, this.maxLength); } else { let values = this.value.split('.');
           if(values[1] && values[1].length > 2)  this.value = values[0] + '.' + values[1].slice(0,2)}">
            </div>
          </div>

          <div class="col-12 col-sm-12 col-md-6 col-lg-8 col-xl-8 float-left plb-0-10 ">
            <div class="col-12 float-left customized-input no_pad">
              <label for="field1" class="w-100">Comments</label>
              <textarea class="float-left Padd-5 h-40 input-text-more" [disabled]="disableUserAccessIP" id="text3" [(ngModel)]="this.additionalIpData.WiproImplementationComments"
               name="text" type="text" [appAlphaNumeric] = "'text'" placeholder="Enter comments"></textarea>
            </div>
          </div>

          <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left plb-0-10">
            <div class="customized-input">
              <label for="field1" class="w-100">Customization ({{currencySymbol}})</label>
              <input id="field1" type="number" [disabled]="disableUserAccessIP" class="col-9 border-gray w-100" 
                [(ngModel)]="this.additionalIpData.WiproCustomizationValue" value="" placeholder="00.00" onkeypress="return event.charCode >= 46
                 && event.charCode <= 57" min="0" maxlength="12" oninput="javascript: if (this.value.length > this.maxLength) { this.value = this.value.slice(0, this.maxLength); } else { let values = this.value.split('.');
           if(values[1] && values[1].length > 2)  this.value = values[0] + '.' + values[1].slice(0,2)}">
            </div>
          </div>

          <div class="col-12 col-sm-12 col-md-6 col-lg-8 col-xl-8 float-left plb-0-10 ">
            <div class="col-12 float-left customized-input no_pad">
              <label for="field1" class="w-100">Comments</label>
              <textarea class="float-left Padd-5 h-40 input-text-more" [disabled]="disableUserAccessIP" 
                [(ngModel)]="this.additionalIpData.WiprocustomizationComments" id="text3" name="text" [appAlphaNumeric] = "'text'" type="text" placeholder="Enter comments"></textarea>
            </div>
          </div>

          <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left plb-0-10">
            <div class="customized-input">
              <label for="field1" class="w-100">Professional services ({{currencySymbol}})</label>
              <input id="field1" type="number" class="col-9 border-gray w-100" [disabled]="disableUserAccessIP" value="" 
                [(ngModel)]="this.additionalIpData.WiproProfessionalServicesValue" placeholder="00.00" onkeypress="return event.charCode >= 46
                 && event.charCode <= 57" min="0" maxlength="12" oninput="javascript: if (this.value.length > this.maxLength) { this.value = this.value.slice(0, this.maxLength); } else { let values = this.value.split('.');
           if(values[1] && values[1].length > 2)  this.value = values[0] + '.' + values[1].slice(0,2)}">
            </div>
          </div>

          <div class="col-12 col-sm-12 col-md-6 col-lg-8 col-xl-8 float-left plb-0-10 ">
            <div class="col-12 float-left customized-input no_pad">
              <label for="field1" class="w-100">Comments</label>
              <textarea class="float-left Padd-5 h-40 input-text-more" [disabled]="disableUserAccessIP" 
                [(ngModel)]="this.additionalIpData.WiproProfessionaServicesComments" id="text3" name="text" type="text" [appAlphaNumeric] = "'text'" placeholder="Enter comments"></textarea>
            </div>
          </div>

          <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left plb-0-10 customized-checkbox no_pad" *ngIf="!data.HolmesDisable">
            <div class="col-12 customized-input pd10">
              <label for="field1" class="w-100">Additional solution value (%)</label>
              <mat-checkbox class="checkpos" [disabled]="disableUserAccessIP || data.HolmesDisable" 
                [(ngModel)]="this.additionalIpData.WiproadditionalValueOfTCV">
              </mat-checkbox>
              <input id="field1" type="number" class="col-7 border-gray w-100 right10per" value="" placeholder="00.00" [disabled]="disableUserAccessIP || !this.additionalIpData.WiproadditionalValueOfTCV || data.HolmesDisable"
               [(ngModel)]="this.additionalIpData.WiproadditionalSolutionValue" (change)="updateIpAdditionalDetails($event,'WiproadditionalSolutionValue')"
                onkeypress="return event.charCode >= 46
                 && event.charCode <= 57" min="0" maxlength="12" oninput="javascript: if (this.value.length > this.maxLength) { this.value = this.value.slice(0, this.maxLength); } else { let values = this.value.split('.');
           if(values[1] && values[1].length > 2)  this.value = values[0] + '.' + values[1].slice(0,2)}">
            </div>
          </div>

          <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left plb-0-10 pad-left22" *ngIf="!data.HolmesDisable">
            <div class="col-12  float-left customized-input no_pad">
              <label for="field1" class="w-100">Absolute value ({{currencySymbol}})</label>
              <input id="field1" type="number" class="col-9 border-gray w-100" value="" (change)="updateIpAdditionalDetails($event,'WiproAbsolutevalue')"
                [(ngModel)]="this.additionalIpData.WiproAbsolutevalue" [disabled]="disableUserAccessIP || this.additionalIpData.WiproadditionalValueOfTCV || data.HolmesDisable"
                placeholder="00.00" onkeypress="return event.charCode >= 46
                 && event.charCode <= 57" min="0" maxlength="12" oninput="javascript: if (this.value.length > this.maxLength) { this.value = this.value.slice(0, this.maxLength); } else { let values = this.value.split('.');
           if(values[1] && values[1].length > 2)  this.value = values[0] + '.' + values[1].slice(0,2)}">
            </div>
          </div>

        </div>
      </perfect-scrollbar>
    </div>

    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad mt-90" *ngIf="dDatabasebtn">

      <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 no_pad mt10 float-left">
        <div class="col-12 col-sm-12 col-md-3 col-lg-2 col-xl-2 float-left plb-0-20">
            <!-- Bug id 25025 -->
          <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad sub-text">IP TCV
                      ({{currencySymbol}})</label>
          <span class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad sub-text">{{IPTCV}}</span>
        </div>

        <div class="col-12 col-sm-12 col-md-3 col-lg-2 col-xl-2 float-left plb-0-20">
          <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad sub-text">Cloud TCV
                      ({{currencySymbol}})</label>
          <span class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad sub-text">{{finalTCVValue2}}</span>
        </div>

      </div>

      <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 no_pad  float-left">
        <span class="col-6 float-left sub-text pleft10 font-14 pad-leftright">Cloud
                      details</span>
        <span class="col-6 float-right plb-0-10">
                      <button aria-label="Add row" (click)="addIpCloud();panelOpenState2 = false" class="float-right addAccountBtns" *ngIf="!disableUserAccessIPforcloud">+ Add
                        row</button></span>
      </div>


      <div class="col-12 no_pad float-left">
        <!-- Table starts here -->
        <perfect-scrollbar style="max-height:180px">
          <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad tableFixHead">
            <table class="table table-borderless">
              <thead>
                <tr>
                  <th>Function *</th>
                  <th>Category *</th>
                  <th class="">Service provider *</th>
                  <th>Technology *</th>
                  <th class="">Open source</th>
                  <th>Value *</th>
                  <th>Remarks </th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let data of cloudData;let i = index">

                  <td>
                    <!-- Select DROPDOWN STARTS -->
                    <!-- <div class="customized-select">
                              <span class="caret color-azure"></span>
                              <select id="selectFunction{{i}}" role="listbox" [disabled]="disableUserAccessIP" [(ngModel)]="data.WiproFunction" title="{{data.WiproFunction}}" (change)="updateCloudValue(i,$event,'WiproFunction')">
                                <option value="" selected hidden>Select Function</option>
                                <option *ngFor="let function of FunctionList"  [value]="function.Id">{{function.Name}}</option>
                              </select>
                            </div> -->

                    <!-- Implemented updated mat-select dropdown starts here -->
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad">
                      <mat-form-field class="col-12 no_pad float-left">
                        <mat-select class="select-focus mat-select {{service.getSelectedClass(data.WiproFunction)}}" id="selectFunction{{i}}" role="listbox"
                          [disabled]="disableUserAccessIPforcloud" [ngClass]="errorBorderVariable && !data.WiproFunction ? 'orangeborder' : ''"
                          [(ngModel)]="data.WiproFunction" [title]="data.Function?data.Function:''" (selectionChange)="setIPCloudName(i,$event,'WiproFunction')">
                          <mat-option value="" selected hidden>Select Function</mat-option>
                          <mat-option *ngFor="let function of FunctionList" [value]="function.Id">{{function.Name}}</mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <!-- Implemented updated mat-select dropdown ends here -->
                    <!-- Select DROPDOWN STARTS -->
                  </td>
                  <td class="no_pad">
                    <!-- Select DROPDOWN STARTS -->
                    <!-- <div class="customized-select">
                              <span class="caret color-azure"></span>
                              <select id="selectCategory{{i}}" role="listbox" [disabled]="disableUserAccessIP" [(ngModel)]="data.WiproCategory" title="{{data.WiproCategory}}" (change)="updateCloudValue(i,$event,'WiproCategory')">
                                <option value="" selected hidden>Select Category</option>
                               <option *ngFor="let category of CategoryList"  [value]="category.Id">{{category.Name}}</option>
                              </select>
                            </div> -->

                    <!-- Implemented updated mat-select dropdown starts here -->
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad">
                      <mat-form-field class="col-12 no_pad float-left">
                        <mat-select class="select-focus mat-select {{service.getSelectedClass(data.WiproCategory)}}" id="selectCategory{{i}}" role="listbox"
                          [disabled]="disableUserAccessIPforcloud" [ngClass]="errorBorderVariable && !data.WiproCategory ? 'orangeborder' : ''"
                          [(ngModel)]="data.WiproCategory" [title]="data.Category?data.Category:''" (selectionChange)="setIPCloudName(i,$event,'WiproCategory')">
                          <mat-option value="" selected hidden>Select Category</mat-option>
                          <mat-option *ngFor="let category of CategoryList" [value]="category.Id">{{category.Name}}</mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <!-- Implemented updated mat-select dropdown ends here -->
                    <!-- Select DROPDOWN STARTS -->
                  </td>
                  <td>
                    <!-- Select DROPDOWN STARTS -->
                    <!-- <div class="customized-select">
                              <span class="caret color-azure"></span>
                              <select id="selectServiceProvider{{i}}" role="listbox" class="ellipses" [disabled]="disableUserAccessIP" [(ngModel)]="data.WiproServiceProvider" title="{{data.WiproServiceProvider}}"
                                (change)="updateCloudValue(i,$event,'WiproServiceProvider')">
                                <option value="" selected hidden>Select Service Provider </option>
                               <option *ngFor="let serviceprovider of ServiceProviderList" [value]="serviceprovider.Id">{{serviceprovider.Name}}</option>
                                
                              </select>
                            </div> -->
                    <!-- Implemented updated mat-select dropdown starts here -->
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad">
                      <mat-form-field class="col-12 no_pad float-left">
                        <mat-select class="select-focus mat-select {{service.getSelectedClass(data.WiproServiceProvider)}}" id="selectServiceProvider{{i}}"
                          role="listbox" [disabled]="disableUserAccessIPforcloud" [ngClass]="errorBorderVariable && !data.WiproServiceProvider ? 'orangeborder' : ''"
                          [(ngModel)]="data.WiproServiceProvider" [title]="data.ServiceProvider?data.ServiceProvider:''"
                          (selectionChange)="setIPCloudName(i,$event,'WiproServiceProvider')">
                          <mat-option value="" selected hidden>Select Service Provider</mat-option>
                          <mat-option *ngFor="let serviceprovider of ServiceProviderList" [value]="serviceprovider.Id">{{serviceprovider.Name}}</mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>

                    <!-- Implemented updated mat-select dropdown ends here -->
                    <!-- Select DROPDOWN STARTS -->
                  </td>
                  <td class="no_pad">
                    <!-- Select DROPDOWN STARTS -->
                    <!-- <div class="customized-select">
                              <span class="caret color-azure"></span>
                              <select id="selectTech{{i}}" role="listbox" [disabled]="disableUserAccessIP" [(ngModel)]="data.WiproTechnology" title="{{data.WiproTechnology}}" (change)="updateCloudValue(i,$event,'WiproTechnology')">
                                <option value="" selected hidden>Select Technology</option>
                                 <option *ngFor="let technology of TechnologyList"  [value]="technology.Id">{{technology.Name}}</option>
                              </select>
                            </div> -->
                    <!-- Implemented updated mat-select dropdown starts here -->
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad">
                      <mat-form-field class="col-12 no_pad float-left">
                        <mat-select class="select-focus mat-select {{service.getSelectedClass(data.WiproTechnology)}}" id="selectTech{{i}}" role="listbox"
                          [disabled]="disableUserAccessIPforcloud" [(ngModel)]="data.WiproTechnology" [ngClass]="errorBorderVariable && !data.WiproTechnology ? 'orangeborder' : ''"
                          [title]="data.Technology?data.Technology:''" (selectionChange)="setIPCloudName(i,$event,'WiproTechnology')">
                          <mat-option value="" selected hidden>Select Technology</mat-option>
                          <mat-option *ngFor="let technology of TechnologyList" [value]="technology.Id">{{technology.Name}}</mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <!-- Implemented updated mat-select dropdown ends here -->

                    <!-- Select DROPDOWN STARTS -->
                  </td>

                  <td class="customized-checkbox">
                    <mat-checkbox aria-label="select" [disabled]="disableUserAccessIPforcloud" [(ngModel)]="data.WiproOpenSource" (change)="updateCloudValue(i,$event,'WiproOpenSource')"></mat-checkbox>
                  </td>
                  <td class="no_pad">
                    <div class="customized-input" (change)="updateCloudValue(i,$event,'WiproValue')">
                      <label for="fieldOpenSource{{i}}" class=""> </label>
                      <input id="fieldOpenSource{{i}}" (keyup)="data.WiproValue=checkDecimalValue(data.WiproValue,i,'WiproValue')" (keypress)="oninputOfIpValue(data,i,$event)"
                        class="border-gray w-75" value="00.00" placeholder="00.00" [disabled]="disableUserAccessIPforcloud"
                        [ngClass]="errorBorderVariable && !data.WiproValue ? 'orangeborder' : ''" [(ngModel)]="data.WiproValue"
                         onkeypress="return event.charCode >= 46 && event.charCode <= 57" min="0" type="number" class="col-9 border-gray w-100"
                        [(ngModel)]="data.WiproValue" 
                        value="" placeholder="00.00" maxlength="12" oninput="javascript: if (this.value.length > this.maxLength) { this.value = this.value.slice(0, this.maxLength); } else { let values = this.value.split('.');
                        if(values[1] && values[1].length > 2)  this.value = values[0] + '.' + values[1].slice(0,2)}">
                       
                    </div>
                  </td>
                  <td class="no_pad">
                    <div class="customized-input">
                      <label for="fieldRemarks{{i}}" class=""> </label>
                      <input id="fieldRemarks{{i}}" type="text" class="border-gray w-75" [ngClass]="errorBorderVariable && !data.WiproRemarks && data.WiproOpenSource ? 'orangeborder' : ''"
                        value="Remarks" placeholder="Remarks" [disabled]="disableUserAccessIPforcloud" [(ngModel)]="data.WiproRemarks" [appAlphaNumeric] = "'text'"
                        title="{{data.WiproRemarks}}" (change)="updateCloudValue(i,$event,'WiproRemarks')">
                      <span class="required" *ngIf="data.WiproOpenSource"> * </span>
                    </div>
                  </td>
                  <td class="display_flex right10">
                    <button class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn" aria-label="Delete" matTooltip="Delete" (click)="confirmdelete(i,data)"
                      *ngIf="!disableUserAccessIPforcloud">
                              <span class="col-xs-12 nopad blue_circle_replay_img mdi  mdi-delete"></span>
                            </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </perfect-scrollbar>
        <!--Table ends here -->
      </div>


    </div>


    <!-- </div>
          </div> -->
  </div>
</div>

<div class="col-12 float-left no_pad ipmoreoption">
  <!-- <button aria-label="save buttn" class="col-12 float-left no_pad confrm-btn-save bg-azure-p" mat-dialog-close
                  (click)="selectedData()">Save</button> -->

  <button aria-label="Cancel" class="col-6 float-left no_pad cancel-btn1 mt15" mat-dialog-close>Cancel</button>
  <button aria-label="save" class="col-6 float-left no_pad confrm-btn-save" [disabled]="!accessSaveButton" [ngClass]="!accessSaveButton?'disableBSPButtons':'bg-azure-p'"
    (click)="saveData()">Save</button>
</div>