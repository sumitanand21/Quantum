<div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left pr-10 new-container order-input order-tab no_pad end_space" [ngClass]="(!panelOpenState5 && !panelOpenState6)?'pb150':''">
  <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left orderpage-scroll  no_pad">
    <div
      *ngIf="approvalStageID != 15 && approvalLog.length && !ParentOrderIdForAmendment"
      class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mb20 order-list-BFM">
      <mat-accordion>
        <mat-expansion-panel hideToggle="true" [expanded]="true" class="no_pad" (opened)="panelOpenState2 = true"
          (closed)="panelOpenState2 = false">
          <mat-expansion-panel-header class="" [ngClass]="(showForClosure && showInvoice)?'min_height155':(showForClosure || showInvoice)?'min_height100':'min_height60'">
            <div class="min_height60 col-12 no_pad">
              <div class="accord-heading1 col-12">
                <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4 float-left no_pad">
                  <span
                    [ngClass]="panelOpenState2 ? 'mdi mdi-chevron-down chevron-right float-left':'mdi mdi-chevron-up chevron-right float-left'"></span>
                  <span class="accordian-title cardsHead col-10 float-left no_pad">
                    Approval status</span>
                </div>

                <div class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8 float-left no_pad btn-mobile-hide">
                  <div *ngIf="!ContrcatSigned && (showForClosure || showInvoice)" class="float-right disp-flex float-unset">
                    <button aria-label="Request foreclosure" *ngIf="showForClosure" type="button"
                      class=" primary-button h-40 mr10 margin-bottom10 col-12 col-sm-12"
                      [ngClass]="showInvoice?'col-md-6 col-lg-6 col-xl-6':'col-md-12 col-lg-12 col-xl-12'"
                      (click)="openSubmitOrderPopup('foreclosure'); $event.stopPropagation()"
                      matTooltip="Request for foreclosing the Order and the project execution will be sent to Delivery Manager">
                      <span class="mdi mdi-close-circle-outline padd-3"> </span>Request foreclosure</button>
                    <button aria-label="Request invoicing" *ngIf="showInvoice" type="button"
                      class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 primary-button h-40 mr10"
                      (click)="openSubmitOrderPopup('invoice');$event.stopPropagation()"
                      matTooltip="Request to initiate invoicing against the Order will be sent to BFM"><span
                        class="mdi mdi-receipt padd-3"></span> Request
                      invoicing</button>
                    <!--<button type="button" class="primary-button h-40 mr10 std cancel-responsived-btn button-wd50" (click)="$event.stopPropagation()">
                        <span class="mdi mdi-arrow-top-left padd-3"></span>Raise request
                      </button>-->

                  </div>
                </div>

              </div>
            </div>
          </mat-expansion-panel-header>
          <!-- <div class="col-6 float-right pos-abs no_pad button-panel">
              <div *ngIf="authAndSignedValidation.signed=='No' && defaultValue.ApprovalStage == 'Approved by ADH/VDH/SDH'" class="float-right disp-flex save-cancel-responsive">
                <button class="primary-button h-40 mr10 save-responsive-btn button-wd50"
                 (click)="openSubmitOrderPopup('foreclosure'); $event.stopPropogation()">
                  <span class="mdi mdi-close-circle-outline padd-3"> </span>Request foreclosure</button>
                <button class="primary-button h-40 mr10 save-responsive-btn button-wd50"
                 (click)="openSubmitOrderPopup('invoice')"><span class="mdi mdi-receipt padd-3"></span> Request
                  invoicing</button>
                <button class="primary-button h-40 mr10 std cancel-responsived-btn button-wd50">
                  <span class="mdi mdi-arrow-top-left padd-3"></span>Raise request
                </button>

              </div>
            </div> -->
          <div class="col-12 no_pad float-left border_top"></div>

          <perfect-scrollbar class="height-400 " *ngIf="approvalLog.length > 0">
            <div class="col-12 no_pad" *ngFor="let data of approvalLog; let i=index">

              <ul class="col-12 content-style margin_bottom_0 table_data pad-topbtm mt10 mob-responsive apprl-status-mobile">
                <li class="width-7 w_100">
                  <div class="brdrrght-clr w_20">
                    <button type="button" class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn" aria-label="Approval type"
                      matTooltip="Approval type: {{data.WiproApprovalTypeDisplay}}"
                      (click)="data.msgshown = !data.msgshown;  data.textshown = false">

                      <!-- <span class="" *ngIf="data.Status == 'Approved by DM' || data.Status == 'On-hold with BFM' || data.Status == 'Pending With BFM'">
                  <span class="nopad blue_circle_replay_img mdi mdi-checkbox-multiple-marked-outline"></span>
                </span> -->
                      <span class="" *ngIf="data.WiproApprovalType != ModifyOrderApproval">
                        <span class="nopad mdi blue_circle_replay_img mdi-checkbox-multiple-marked-outline"></span>
                      </span>

                      <span class="" *ngIf="data.WiproApprovalType == ModifyOrderApproval">
                        <span class="nopad blue_circle_replay_img mdi mdi-circle-edit-outline"></span>
                      </span>

                      <!-- <span class="" *ngIf="data.Status == 'On-hold with BFM'">
                    <span class="nopad blue_circle_replay_img mdi mdi-checkbox-multiple-marked-outline"></span>
                  </span>

                  <span class="" *ngIf="data.Status == 'Pending with BFM'">
                    <span class="nopad blue_circle_replay_img mdi mdi-checkbox-multiple-marked-outline"></span>
                  </span> -->
                    </button>
                </div>
                <div aria-label="Approval type" class="mobile-select-box w_80">Approval type: {{data.WiproApprovalTypeDisplay}}</div>
                </li>
                <li class="width-10">
                  <div class="col-12 float-left pos-rel mrnbot-10 no_pad mobpad15">
                    <div for="InitiatedOn" class="col-12 no_pad head-text ellipses">Initiated on</div>
                    <div class="sub-text no_pad ellipses" id="InitiatedOn"
                      title="{{data.CreatedOn| date : 'dd-MMM-yyyy,h:mm a'}}">{{data.CreatedOn| date : 'dd-MMM-yyyy'}}</div>
                               
                  </div>
                </li>
                <li class="width-14">
                  <div class="col-12 float-left pos-rel mrnbot-10">
                    <div for="InitiatedOn" class="col-12 no_pad head-text ellipses">Initiated by</div>
                    <div class="sub-text no_pad ellipses" id="InitiatedOn" title="{{data.CreatedBy}}">{{data.CreatedBy}}
                    </div>
                  </div>
                </li>
                <li class="width-14">
                  <div class="col-12 float-left pos-rel mrnbot-10 all-btn-icons">
                    <div for="WiproOwnership" class="col-12 no_pad head-text ellipses">{{data.WiproOwnershipDisplay ? data.WiproOwnershipDisplay : 'NA'}}
                     
                      <span class="sub-text">
                        <span class="mdi" [ngClass]="data.showlogPending?'mdi-clock-alert-outline btn-blue':data.showlogApproval?'mdi-check btn-green':data.showlogOnHold?'mdi-clock-alert-outline btn-orange':data.showlogReject?'mdi-close-circle-outline btn-red':''" >
                      </span>
                      </span>

                    </div>
                    <div class="sub-text no_pad ellipses" id="InitiatedOn" title="{{data.WiproApproval ? data.WiproApproval : ''}}">
                      {{data.WiproApproval ? data.WiproApproval : ''}}</div>
                  </div>
                </li>
                <li class="width-14">
                  <div class="col-12 float-left pos-rel mrnbot-10 ellipses">
                    <div for="InitiatedOn" class="col-12 no_pad head-text">Status</div>
                    <!-- <span class="sub-text colr-blue" *ngIf="data.Status == 'Pending with DM'"> {{data.Status}} </span> -->
                    
                    <span class="sub-text" [ngClass]="{'clor-blue':data.showlogPending,
                    'colr-green': data.showlogApproval,
                    'colr-orange':data.showlogOnHold,
                    'clor-red': data.showlogReject}"
                    title="{{data.WiproApprovalType == ModifyOrderApproval ? data.ModificationRequestStatus : data.WiproOrderApprovalStageDisplay}}"> {{data.WiproApprovalType == ModifyOrderApproval ? data.ModificationRequestStatus : data.WiproOrderApprovalStageDisplay}} </span>

                    <!-- <span class="sub-text clor-blue"
                      *ngIf="(data.WiproOrderApprovalStage == pendingWithDM) || (data.WiproOrderApprovalStage == Pendingwithdealowner) || (data.WiproOrderApprovalStage == pendingWithBFM) || (data.WiproOrderApprovalStage == pendingWithADH_VDH)
              || (data.WiproOrderApprovalStage == InvoicingPendingWithBFM) || (data.WiproOrderApprovalStage == ForeClosurePendingWithDM) || (data.WiproOrderApprovalStage == pendingWithICTeam)"
                      title="{{data.WiproOrderApprovalStageDisplay}}"> {{data.WiproOrderApprovalStageDisplay}} </span>

                    <span class="sub-text colr-green"
                      *ngIf="(data.WiproOrderApprovalStage == approvedByDM) || (data.WiproOrderApprovalStage == approvedByBFM) || (data.WiproOrderApprovalStage == approvedByADH_VDH)
              || (data.WiproOrderApprovalStage == InvoicingApprovedByBFM) || (data.WiproOrderApprovalStage == ForeClosureApprovedByDM) || (data.WiproOrderApprovalStage == approvedByICTeam)"
                      title="{{data.WiproOrderApprovalStageDisplay}}"> {{data.WiproOrderApprovalStageDisplay}} </span>

                    <span class="sub-text colr-orange"
                      *ngIf="(data.WiproOrderApprovalStage == onHoldByBFM) || (data.WiproOrderApprovalStage == onHoldWithADH_VDH)"
                      title="{{data.WiproOrderApprovalStageDisplay}}"> {{data.WiproOrderApprovalStageDisplay}} </span>

                    <span class="sub-text clor-red"
                      *ngIf="(data.WiproOrderApprovalStage == rejectedByDM) || (data.WiproOrderApprovalStage == rejectedByBFM) || (data.WiproOrderApprovalStage == rejectedByADH_VDH)
               || (data.WiproOrderApprovalStage == InvoicingRejectedByBFM) || (data.WiproOrderApprovalStage == ForeClosureRejectedByDM) || (data.WiproOrderApprovalStage == rejectedByICTeam)"
                      title="{{data.WiproOrderApprovalStageDisplay}}"> {{data.WiproOrderApprovalStageDisplay}} </span> -->
                    <!--<span class="sub-text clor-blue" > {{data.WiproOrderApprovalStageDesc}} </span>-->
                  </div>
                </li>
                <li class="width-14">
                  <div class="col-12 float-left pos-rel mrnbot-10">
                    <div for="InitiatedOn" class="col-12 no_pad head-text">Ageing</div>
                    <div class="sub-text no_pad" id="InitiatedOn" title="{{isNaNCheck(data.WiproAging) ? 'NA' : data.WiproAging}} days">
                      {{isNaNCheck(data.WiproAging) ? 'NA' : data.WiproAging + ' days'}} 
                    </div>
                  </div>
                </li>
                <li class="width-10">
                  <div class="col-12 float-left pos-rel mrnbot-10 no_pad mobpad15">
                    <div for="InitiatedOn" class="col-12 no_pad head-text">Action date</div>
                    <div class="sub-text no_pad ellipses" id="InitiatedOn"
                     title="{{data.WiproDecisionDate ? (data.WiproDecisionDate | date : 'dd-MMM-yyyy') : '-'}}">
                     {{data.WiproDecisionDate ? (data.WiproDecisionDate | date : 'dd-MMM-yyyy') : '-'}}</div>
                    <!-- <div class="sub-text no_pad" id="InitiatedOn" *ngIf="(data.WiproOrderApprovalStage == approvedByDM) || (data.WiproOrderApprovalStage == approvedByBFM) || (data.WiproOrderApprovalStage == approvedByADH_VDH)
                     || (data.WiproOrderApprovalStage == InvoicingApprovedByBFM) || (data.WiproOrderApprovalStage == rejectedByDM) || (data.WiproOrderApprovalStage == rejectedByADH_VDH) ||
                     (data.WiproOrderApprovalStage == rejectedByBFM) || (data.WiproOrderApprovalStage == InvoicingRejectedByBFM)
                     || (data.WiproOrderApprovalStage == onHoldByBFM) || (data.WiproOrderApprovalStage == ForeClosureApprovedByDM) || (data.WiproOrderApprovalStage == ForeClosureRejectedByDM) || (data.WiproOrderApprovalStage == approvedByICTeam) || 
                     (data.WiproOrderApprovalStage == rejectedByICTeam)"
                      title="{{data.WiproDecisionDate | date : 'dd-MMM-yy'}}">
                      {{data.WiproDecisionDate | date : 'dd-MMM-yy'}}</div>
                    <div class="sub-text no_pad" id="InitiatedOn" *ngIf="(data.WiproOrderApprovalStage == pendingWithDM) || (data.WiproOrderApprovalStage == Pendingwithdealowner) || (data.WiproOrderApprovalStage == pendingWithBFM) ||
                    (data.WiproOrderApprovalStage == pendingWithADH_VDH) || (data.WiproOrderApprovalStage == InvoicingPendingWithBFM) || (data.WiproOrderApprovalStage == ForeClosurePendingWithDM) || 
                    (data.WiproOrderApprovalStage == pendingWithICTeam)" title="NA">NA</div> -->
                  </div>
                </li>
                <li class="width-17">
                  <button type="button" class="btn-none white_circle_replay pad_left_0 cp commonActionBtn"
                    *ngIf="data.WiproApprovalType == ModifyOrderApproval" aria-label="View modification details"
                    matTooltip="Review details"
                    (click)="viewModificationDetails(data.OrderModificationRequestId)">
                    <!-- <span class="col-xs-12 nopad blue_circle_replay_img mdi mdi-playlist-edit"></span> -->
                    <span class="col-xs-12 nopad mdi mdi-eye whitespan"></span>
                  </button>
                  <button type="button" class="btn-none white_circle_replay pad_left_0 cp commonActionBtn" *ngIf="data.WiproApprovalType == ModifyOrderApproval && data.ModificationRequestStatusId == ModificationRequestPendingwithBFM && OrderOwnerRole == true"
                    aria-label="Expedite request" matTooltip="Expedite request"
                    (click)="openExpediatePopUp(data,i)">
                    <span class="col-xs-12 nopad mdi mdi-bell-ring-outline whitespan"></span>
                  </button>
                  <button type="button" class="btn-none white_circle_replay pad_left_0 cp commonActionBtn"
                    *ngIf="data.WiproApprovalType == ModifyOrderApproval && data.ModificationRequestStatusId == ModificationRequestPendingwithBFM && OrderOwnerRole == true"
                    aria-label="Cancel" matTooltip="Cancel" (click)="cancelModification(data)">
                    <span class="col-xs-12 nopad mdi mdi-close-circle-outline whitespan"></span>
                  </button>

                  <button type="button" class="btn-none white_circle_replay pad_left_0 cp commonActionBtn" aria-label="view comments"
                    matTooltip="view comments" (click)="data.textshown = !data.textshown; readComment(i);" >
                    <span class="col-xs-12 nopad mdi mdi-comment-processing-outline whitespan"></span>
                  </button>


                  <!--  -->

                  <!-- scrollToBottom() -->

                </li>

              </ul>
              <div class="col-12 float-left head-text row_content"  *ngIf="data.textshown">
                <perfect-scrollbar class="height-125">
                  <div class="col-12 border-topdata float-left" id="action{{i}}">
                    <div class="col-8 pad-10-30 float-left">
                      <div class="col-12 no_pad float-left">
                        <label class="label-text mar-0">Action : </label>
                        <!--<span class="span-text">On hold requested by BFM (07-Jun-20 at 15:20)</span>-->

                        <span class="span-text">{{data.WiproApprovalType == ModifyOrderApproval ? ' ' + data.ModificationRequestStatus : ' ' + data.WiproOrderApprovalStageDisplay}}
                             {{data.WiproDecisionDate ? ( '(' + (data.WiproDecisionDate | date : 'dd-MMM-yyyy') + ' at ' + (data.WiproDecisionDate | date : 'hh:mm a') + ')') : ''  }}</span>

                     <!-- <span class="span-text" *ngIf="(data.WiproOrderApprovalStage == approvedByDM) || (data.WiproOrderApprovalStage == approvedByBFM) || (data.WiproOrderApprovalStage == approvedByADH_VDH)
                     || (data.WiproOrderApprovalStage == InvoicingApprovedByBFM) || (data.WiproOrderApprovalStage == rejectedByDM) || (data.WiproOrderApprovalStage == rejectedByADH_VDH) ||
                     (data.WiproOrderApprovalStage == rejectedByBFM) || (data.WiproOrderApprovalStage == InvoicingRejectedByBFM) || (data.WiproOrderApprovalStage == onHoldByBFM) || (data.WiproOrderApprovalStage == ForeClosureApprovedByDM) ||
                     (data.WiproOrderApprovalStage == ForeClosureRejectedByDM) || (data.WiproOrderApprovalStage == approvedByICTeam) || 
                     (data.WiproOrderApprovalStage == rejectedByICTeam)">{{data.WiproOrderApprovalStageDisplay}}
                          ({{data.WiproDecisionDate | date : 'dd-MMM-yy'}} at
                          {{data.WiproDecisionDate | date : 'hh-mm a'}})</span>

                        <span class="span-text"
                          *ngIf="(data.WiproOrderApprovalStage == pendingWithDM) || (data.WiproOrderApprovalStage == pendingWithBFM) || (data.WiproOrderApprovalStage == pendingWithADH_VDH)  || (data.WiproOrderApprovalStage == Pendingwithdealowner)
                     || (data.WiproOrderApprovalStage == InvoicingPendingWithBFM) || (data.WiproOrderApprovalStage == ForeClosurePendingWithDM) || (data.WiproOrderApprovalStage == pendingWithICTeam)">{{data.WiproOrderApprovalStageDisplay}}</span> -->
                      </div>
                      <div class="col-12 no_pad float-left">
                        <!--<label class="label-text mar-0">TCV difference comments: </label>
                    <span class="span-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                        incididunt ut labore et dolore magna aliqua. do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span>-->
                       
                        <label class="label-text mar-0"
                          *ngIf="data.showlogApproval">Approved
                          reason : </label>
                        <label class="label-text mar-0"
                          *ngIf="data.showlogReject">Rejected
                          reason : </label>
                        <label class="label-text mar-0"
                          *ngIf="data.showlogOnHold">On-Hold
                          comment : </label>
                        <!--<label class="label-text mar-0"
                          *ngIf="data.showlogPending">Pending
                          reason: </label>-->

                        <span class="span-text"
                          *ngIf="data.showlogApproval">{{data.WiproApprovalReason ? ' '+data.WiproApprovalReason : 'NA'}}</span>
                        <span class="span-text"
                          *ngIf="data.showlogReject">{{data.WiproRejectionReason ?' '+ data.WiproRejectionReason : 'NA'}}</span>
                        <span class="span-text"
                          *ngIf="data.showlogOnHold">{{data.WiproOnHoldReason ? ' '+data.WiproOnHoldReason : 'NA'}}</span>
                        <!--<span class="span-text"
                          *ngIf="data.showlogPending">NA</span>-->

                      </div>

                      <div class="col-12 no_pad float-left" *ngIf="data.WiproResubmissionReason && data.WiproOrderApprovalStage == 184450002 && data.WiproOrderApprovalStage == 184450001">
                        <label class="label-text mar-0">Resubmission reason : </label>
                        <span class="span-text">{{data.WiproResubmissionReason}}</span>
                      </div>

                      <div class="col-12 no_pad float-left" *ngIf="data.OnHoldReasonDisplay ? true : false">
                        <label class="label-text mar-0">On-Hold reason : </label>
                        <span class="span-text">{{data.OnHoldReasonDisplay}}</span>
                      </div>

                    </div>
                  </div>
                </perfect-scrollbar>
              </div>

            </div>
          </perfect-scrollbar>

        </mat-expansion-panel>
      </mat-accordion>
    </div>
    <!-- Order-status panel ends here -->
    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt20" *ngIf="showModification">
      <div class="col-12 col-sm-12 col-md-12 col-lg-4 col-xl-4 no_pad float-left mt20 threebtn">
        <div
          class=" col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-right disp-flex web-action-button no_pad">
          <!-- Modified projectiion dropdown btn start -->
          <!--commenting for qa-->
          <div class="cust-dropdown-btn col-12 col-lg-6 col-xl-6 col-sm-12 col-md-12 mobile-no_pad mr10">
            <mat-form-field class="col-12 no_pad float-left">
              <mat-select disableOptionCentering panelClass="Select-panel-class" name="Projection"
                [(ngModel)]="ProjectionvalueOverView"
                (selectionChange)="changeProjectionOverView(ProjectionvalueOverView)"
                class="select-focus mat-select {{service.getSelectedClass(Projectionvalue)}}" role="listbox">
                <mat-option hidden value="">Select</mat-option>
                <mat-option value="1">Modified details</mat-option>
                <mat-option value="2">Original details</mat-option>
                <!-- <mat-option *ngFor="let reasonname of selectedReasonValue" [value]="reasonname.Id">{{reasonname.Name}}</mat-option> -->
              </mat-select> 
            </mat-form-field>
          </div>
        </div>
      </div>
    </div>
    <!-- Modified order details starts from here -->
    <div *ngIf="showModificationOverView" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mb20  mobpad15">
      <mat-accordion>
        <mat-expansion-panel hideToggle="true" [expanded]="true" class="no_pad" (opened)="panelOpenState2 = true"
          (closed)="panelOpenState2 = false">
          <mat-expansion-panel-header class="min_height60">
            <div class="min_height60 col-12 no_pad">
              <div class="accord-heading1 col-12">
                <div class="col-12 col-xl-6 col-lg-6 col-md-6 col-sm-6 float-left no_pad">
                  <span
                    [ngClass]="panelOpenState2 ? 'mdi mdi-chevron-down chevron-right float-left':'mdi mdi-chevron-up chevron-right float-left'"></span>
                  <span class="accordian-title cardsHead col-10 float-left no_pad">
                    Modified order details </span>
                </div>

                <div class="col-6 float-left no_pad">
                  <div class="float-right disp-flex save-cancel-responsive">



                    <!-- <button class="primary-button h-40 mr10 save-responsive-btn button-wd50" >
                        <span class="mdi mdi-circle-edit-outline"> </span>Modified details
                      </button> -->
                  </div>
                </div>
              </div>
            </div>
          </mat-expansion-panel-header>

          <div class="col-12 no_pad float-left border_top"></div>

          <table class="no_pad mt20 col-12 modifiedorder">
            <thead>
              <tr>
                <th class="br-tl">Order details</th>
                <th>Current order details</th>
                <th>Change order details</th>
                <th>Reason</th>
                <th>Approve/Reject*</th>
                <th>Rejection reason</th>
              </tr>
            </thead>
            <tbody class="no_pad"> 
              <tr *ngFor="let data of modifiedOrderSaveArray">
                <td [attr.data-label]="'Order details'" class="">
                  <div class="customized-input">
                    <label for="license" class=""> </label>
                    <input id="license" type="text" class="border-gray w-100" [(ngModel)]="data.OrderDetails"
                      placeholder="{{data.OrderDetails}}" disabled>
                  </div>
                </td>

                <td [attr.data-label]="'Current order details'" class="">
                  <div class="customized-input">
                    <label for="license" class=""> </label>
                    <input id="license" type="text" class="border-gray w-100" [(ngModel)]="data.CurrentOrderDetails"
                      placeholder="{{data.CurrentOrderDetails}}" disabled>
                  </div>
                </td>

                <td [attr.data-label]="'Change order details'" class="">
                  <div class="customized-input">
                    <label for="license" class=""> </label>
                    <input id="license" type="text" class="border-gray w-100" [(ngModel)]="data.ChangeOrderDetails"
                      placeholder="{{data.ChangeOrderDetails}}" disabled>
                  </div>
                </td>

                <td [attr.data-label]="'Reason'" class="">
                  <div class="customized-select mt-20-mob h100">
                    <mat-form-field class="col-12 no_pad float-left">
                      <mat-select disableOptionCentering panelClass="Select-panel-class" disabled
                        [(ngModel)]="data.Reasons"
                        class="select-focus mat-select {{service.getSelectedClass(contcountry)}}"
                        name="Contractingcountry" id="Contractingcountry" role="listbox">
                        <mat-option hidden value="">Select reason</mat-option>
                        <mat-option *ngFor="let reasonname of selectedReasonValue" [value]="reasonname.Id">
                          {{reasonname.Name}}</mat-option>

                      </mat-select>
                    </mat-form-field>
                  </div>

                </td>

                <td [attr.data-label]="'Approve/Reject*'">
                  <!-- Select DROPDOWN STARTS -->
                  <div class="customized-select mobile-select-box">
                      <span class="new-change caret color-azure"></span>
                      <select  [ngClass]="{'orangeborder':(ErrorDisplay && !data.Action)}" [(ngModel)]="data.Action"
                      (change)="emptyReason(data.Action,data.AttributeType)"
                      class="select-focus mat-select {{service.getSelectedClass(contcountry)}}"
                      [disabled]="disableAction(data.AttributeType) == true"
                      name="Contractingcountry" id="Contractingcountry" role="listbox">
                        <option hidden value="">Select</option>
                        <option value="184450000">Approve</option>
                        <option value="184450001">Reject</option>
                      </select>
                    </div>

                  <div class="customized-select mt-20-mob h100 web-select-box">
                    <mat-form-field class="col-12 no_pad float-left">
                      <mat-select disableOptionCentering panelClass="Select-panel-class"
                        [ngClass]="{'orangeborder':(ErrorDisplay && !data.Action)}" [(ngModel)]="data.Action"
                        (selectionChange)="emptyReason(data.Action,data.AttributeType)"
                        class="select-focus mat-select {{service.getSelectedClass(contcountry)}}"
                        [disabled]="disableAction(data.AttributeType) == true"
                        name="Contractingcountry" id="Contractingcountry" role="listbox">
                        <mat-option hidden value="">Select</mat-option>
                        <mat-option value="184450000">Approve</mat-option>
                        <mat-option value="184450001">Reject</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <!-- Select DROPDOWN STARTS -->
                </td>

                <td [attr.data-label]="'Rejection reason'"class="">



                  <div class="customized-input">
                    <label for="license" class=""> </label>
                    <input id="license" type="text" class="border-gray w-100"  [appAlphaNumeric] = "'alphanumeric'"
                      [ngClass]="{'orangeborder':(ErrorDisplay && data.Action == 184450001 && !data.RejectionReason)}"
                      [(ngModel)]="data.RejectionReason" placeholder="" [disabled]="(data.Action != 184450001)">
                  </div>
                </td>
              </tr>
              <tr class="nodata_tr" *ngIf="modifiedOrderSaveArray.length==0">
                <td class="nodata_td" colSpan="6"> No records found </td>
              </tr>
              <tr *ngIf="modifiedOrderPODetails.length > 0">
                <td></td>
                <td></td>
                <td><p _ngcontent-cla-c21="" class="float-left  radio-fontfamly po-detail " (click) = "modifypodetailspopup()" >PO details ({{modifiedOrderPODetails.length}})</p></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            </tbody>
          </table>
          <div class="col-12 no_pad float-left mt20 border_top"></div>
          <span class="col-6 float-left no_pad mt20 support-docs">Supporting documents ({{fileDataArray.length}})</span>
          <div class="col-12 col-xl-12 no_pad float-left">
            <section _ngcontent-olb-c53="" class="float-left col-12 no_pad mt-10" *ngFor="let displayFile of fileDataArray;let i=index">
              <div _ngcontent-olb-c53="" class="no_pad col-xl-6 col-lg-6 col-md-6 col-1 float-left d-flex ">
                <a [href]="displayFile.UploadedUrl" class="float-left naming-tags-square pad-7 child-middle bg-azure download-uploaded-file" download="">

                  <span _ngcontent-olb-c53="" class="initials mdi mdi-file-document font-20" id="inti_name-kb">

                  </span>
                  <span _ngcontent-olb-c53="" aria-label="Download file" class="initials mdi mdi-download font-20" id="inti_name-kb1" mattooltip="Download file" role="button" tabindex="0" aria-describedby="cdk-describedby-message-633" cdk-describedby-host="" ng-reflect-message="Download file">
                  </span>
                </a>
                <a [href]="displayFile.UploadedUrl" download class="download_doc border-std color-azure">
              
                    <span class="float-left uploaded_text">
                      {{ displayFile.UploadFileName}}
                    </span>
                  </a>
              </div>
    </section>

          </div>

        </mat-expansion-panel>
      </mat-accordion>
    </div>
    <!--Modified order details ends here -->

    <!-- Order-overview panel starts here -->
    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left order-overview"
      *ngIf="!showModificationOverView">
      <mat-accordion>
        <mat-expansion-panel hideToggle="true" [expanded]="true" class="no_pad" (opened)="panelOpenState1 = true"
          (closed)="panelOpenState1 = false">
          <mat-expansion-panel-header class="" [ngClass]="showSubmit?'min_height100 pad0':'min_height60'">
            <mat-panel-title>
              <div class="min_height60 col-12 no_pad">
                <div class="col-lg-12 col-xl-12 col-md-12 col-sm-12 col-12 accord-heading1 no_pad ">
                  <div class="col-lg-6 col-xl-6 col-md-12 col-sm-12 col-12 float-left padding_top_5">
                    <span [ngClass]="panelOpenState1 ? 'mdi mdi-chevron-down chevron-right float-left':'mdi mdi-chevron-up chevron-right float-left'"></span>
                    <!-- <div class="float-left no_pad"> -->
                    <span class="accordian-title cardsHead float-left no_pad">
                      Order overview</span>
                  </div>
                  <div  class="col-lg-6 col-xl-6 col-md-12 col-sm-12 col-12 float-right padding_bottom_15 pr0" *ngIf="showSubmit">
                    <button aria-label="Submit" type="button" class="float-right primary-button btn-text h-40 std save-responsive-btn float-unset mrgnBtm-15 mr10" 
                          (click)="openSubmitOrderPopup('approval'); $event.stopPropagation()" [disabled]="disableSubmitForLost"  (keyup.enter)="openSubmitOrderPopup('approval'); $event.stopPropagation()">Submit</button>
                  </div>               
                  
                </div>
              </div>
            </mat-panel-title>
            </mat-expansion-panel-header>

          <div class="col-12 no_pad float-left border_top mb20"></div>

          <div *ngIf="projectService.editProject || projectService.approvalStatus">
            <!-- Select DROPDOWN STARTS -->
            <div
              class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left plb-60-20 mrnbot-10 orderpopover-content height90">
              <label for="ordertype" class="label-form">Order type*</label>

              <span class="sub-text w-17 float-left" *ngIf="orderOverviewObj.OrderTypeId == 184450006 && amendmentRemarks">

                <!-- message popover starts here -->
                   <button aria-label="message" type="button" [popoverOnHover]="false" [popoverCloseOnMouseOutside]="false" [popoverCloseOnClickOutside]="true"
                    [popover]="myPopover" (click)="toggleComment()" (keypress)="toggleComment()"
                    class="button_messagespophover float-right mr20">
                    <span class="mdi mdi-comment-plus-outline btn-maroon"></span>
                  </button>
                  <popover-content #myPopover title="" placement="right" [animation]="false" [closeOnClickOutside]="true"
                    [attr.aria-hidden]="clickmes ? 'false' : 'true'">
                    <label class="col-12 no_pad tooltiphead">Amendment remarks </label>
                    <span class="tooltip-content">{{amendmentRemarks}}
                    </span>
                  </popover-content>
                <!-- message popover ends here -->
                 </span>

              <div class="customized-select disabled-control mobile-select-box">
                <span class="caret color-azure"></span>
                <select id="ordertype" role="listbox" [(ngModel)]="orderOverviewObj.OrderTypeId"
                  [ngClass]="orderOverviewValidationValue.OrderTypeId ? 'orangeborder' : ''"
                  (change)="setOrderName(orderOverviewObj.OrderTypeId)" disabled required>
                  <option value="" disabled>Select order name</option>
                  <option *ngFor="let order of orders" [value]="order.Id">{{order.Name}}</option>
                </select>
              </div>

              <div class="web-select-box">
                <mat-form-field class="col-12 no_pad float-left">
                  <mat-select disableOptionCentering panelClass="Select-panel-class" class="select-focus mat-select"
                  id="ordertype" role="listbox" [(ngModel)]="orderOverviewObj.OrderTypeId"
                  [ngClass]="orderOverviewValidationValue.OrderTypeId ? 'orangeborder' : ''"
                  (selectionChange)="setOrderName(orderOverviewObj.OrderTypeId)" disabled required>
                    <mat-option value="" disabled>Select order name</mat-option>
                    <mat-option *ngFor="let order of orders" [value]="order.Id">{{order.Name}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <p class="col-12 no_pad float-left validation-text" *ngIf="orderOverviewValidationValue.OrderTypeId">Order
                type is mandatory.</p>
            </div>

            <!--search starts here-->
            <div
              class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left plb-60-20 customized-input cust_autoComplete pos-rel mrnbot-10 height90">
              <form class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="search"
                  class="label-form">Order classification*</label>
                <div class="customized-select mobile-select-box"
                [ngClass]="{'disabled-control': (!disableOverviewOnPendingWithBFM)}">
                  <span class="caret color-azure"></span>
                  <select
                    class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                    id="search" (change)="setClassificationName(orderOverviewObj.ClassificationId)"
                    [ngClass]="{'orangeborder': (orderOverviewValidationValue.ClassificationId),'disabled-control': (!disableOverviewOnPendingWithBFM)}"
                    [(ngModel)]="orderOverviewObj.ClassificationId" name="Classificationname" [disabled] ="!disableOverviewOnPendingWithBFM">
                    <option value="" disabled hidden>Select classification</option>
                    <option *ngFor="let classification of classifications" [value]="classification.Id">
                      {{classification.Name}}</option>
                  </select>
                </div>
                <div class="web-select-box">
                  <mat-form-field class="col-12 no_pad float-left">
                    <mat-select disableOptionCentering panelClass="Select-panel-class" role="listbox" class="select-focus mat-select" id="search" (selectionChange)="setClassificationName(orderOverviewObj.ClassificationId)"
                    [ngClass]="{'orangeborder': (orderOverviewValidationValue.ClassificationId)}"
                    [(ngModel)]="orderOverviewObj.ClassificationId" name="Classificationname" [disabled] ="!disableOverviewOnPendingWithBFM">
                      <mat-option value="" disabled hidden>Select classification</mat-option>
                      <mat-option *ngFor="let classification of classifications" [value]="classification.Id">
                        {{classification.Name}}</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>

              </form>
              <p class="col-12 no_pad float-left validation-text" *ngIf="orderOverviewValidationValue.ClassificationId">
                Order classification is mandatory.</p>
            </div>
            <!--search ends here-->

            <!--SAP customer code autocomplete starts here-->
            <div
              class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10 height90">

              <form class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="SAPCode"
                  class="label-form">SAP customer code*
                  <!-- <span class="required"> *
                  </span> -->
                </label>
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad d-flex">

                  <div class="flex-grow-1">
                    <app-auto-complete-select [requiredField]="true" [source]="sapCustomerCodeArr" [dataHeader]="SAPdataHeader"
                      [selectedObj]="selectedSAPCodeObj" (content)="sapCustomerCode($event)" [labelName]="'SAPCode'"
                      [MandtErrorFlag]="orderOverviewValidationValue.SAPCustomerCode" [Placeholder]="'Select'"
                      [IsinitialsView]=false [IsApiCall]=true (advanceLookUp)="advanceLookUpSearch($event)"
                      (SelectedData)="selectedSapCode($event)" [details]="defaultValue.sapCode"
                      [detailsId]="orderOverviewObj.SAPCustomerCode" [isSearchLoader]='isSearchLoader'
                      [Isdisabled]="disableOnRoleOverwiew || ParentOrderIdForAmendment || IsAmendment">
                    </app-auto-complete-select>
                  </div>
                </div>
              </form>
              <p class="col-12 no_pad float-left validation-text" *ngIf="orderOverviewValidationValue.SAPCustomerCode">
                SAP customer code is mandatory.</p>
            </div>

            <!--SAP customer code autocomplete ends here-->

            <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left plb-60-20 pb21 mrnbot-10 height90"
              [ngClass]="orderOverviewValidationValue.StartDate?'plb-10-0':''">
              <!-- <div> -->
              <!-- [ngClass]="{ 'bg-error': f.startDate.touched && f.startDate.invalid formControlName="startDate" }" -->
              <div class="pad-top-2">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left label-form no_pad"
                  for="Startdate" matTooltip="Date when the Client project will start">
                  Project start date*</label>
                <div class="pos-rel">
                  <div class="col-12 col-lg-12 col-sm-12 col-md-12 float-left no_pad cal_brdr">
                    <div class="col-12 col-lg-12 col-sm-12 col-md-12 float-left no_pad cust_calan customized-input">
                      <input matInput class="col-12 col-lg-12 col-sm-12 col-md-12 float-left " id="Startdate"
                        (click)="picker1.open()" (keypress)="picker1.open()" name="Startdate" required
                        [(ngModel)]="projectStartDate" [matDatepicker]="picker1" title="DD-MMM-YYYY"
                        [ngClass]="orderOverviewValidationValue.StartDate ? 'orangeborder' : ''"
                        placeholder="DD-MMM-YYYY" [min]="minStartDate" (dateChange)="setStartDate(projectStartDate)"
                        [disabled]="disableOnRoleOverwiew" readonly>
                      <mat-datepicker-toggle matSuffix [for]="picker1" disabled (click)="picker1.open()"
                        (keypress)="picker1.open()">

                        <span class="mdi mdi-calendar-blank float-right no_pad" matDatepickerToggleIcon></span>
                      </mat-datepicker-toggle>
                      <mat-datepicker #picker1></mat-datepicker>
                    </div>
                  </div>
                </div>
              </div>
              <p class="col-12 no_pad float-left validation-text" *ngIf="orderOverviewValidationValue.StartDate">Project
                start date is mandatory.</p>
              <!-- </div> -->
            </div>

            <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left plb-60-20 pb21 mrnbot-10 height90">
              <div class="pad-top-2">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left label-form no_pad"
                  for="Enddate" matTooltip="Date when the Client project will end" >
                  Project end date*</label>
                <div class="pos-rel">
                  <div class="col-12 col-lg-12 col-sm-12 col-md-12 float-left no_pad cal_brdr">
                    <div class="col-12 col-lg-12 col-sm-12 col-md-12 float-left no_pad cust_calan customized-input">

                      <input matInput class="col-12 col-lg-12 col-sm-12 col-md-12 float-left " id="Enddate"
                        (click)="picker2.open()" name="EnddateName"
                        [ngClass]="orderOverviewValidationValue.EndDate ? 'orangeborder' : ''"
                        (keypress)="picker2.open()" [(ngModel)]="projectEndDate" required [matDatepicker]="picker2"
                        title="DD-MMM-YYYY" placeholder="DD-MMM-YYYY" [min]="minEndDate"
                        (dateChange)="setEndDate(projectEndDate)" [disabled]="disableOnRoleOverwiew" readonly>
                      <mat-datepicker-toggle matSuffix [for]="picker2" disabled (click)="picker2.open()"
                        (keypress)="picker2.open()">

                        <span class="mdi mdi-calendar-blank float-right no_pad" matDatepickerToggleIcon></span>
                      </mat-datepicker-toggle>
                      <mat-datepicker #picker2></mat-datepicker>
                    </div>
                  </div>
                </div>
              </div>
              <p class="col-12 no_pad float-left validation-text" *ngIf="orderOverviewValidationValue.EndDate">Project
                end date is mandatory.</p>

            </div>

            <!-- Currency autocomplete starts here-->
            <div
              class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10 height90">

              <form class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="Currency"
                  class="label-form">Currency
                  <span class="required"> *
                  </span>
                </label>
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad d-flex ">

                  <div class="flex-grow-1">

                    <app-auto-complete-select [requiredField]="true" [source]="currencyCodeArr" [dataHeader]="CurrencydataHeader"
                      [selectedObj]="selectedCurrencyObj" (content)="currencyCode($event)" [labelName]="'Currency'"
                      [Placeholder]="'Select'" [MandtErrorFlag]="orderOverviewValidationValue.CurrencyId"
                      [IsinitialsView]=false [IsApiCall]=true (advanceLookUp)="advanceLookUpSearch($event)"
                      (SelectedData)="selectedValueCurrency($event)" [details]="defaultValue.currency"
                      [detailsId]="orderOverviewObj.CurrencyId" [isSearchLoader]='isSearchLoader'
                      [Isdisabled]="disableOnRoleOverwiew || WTFlag || disableOverviewOnPendingWithBFM">
                    </app-auto-complete-select>

                  </div>
                </div>
              </form>
              <p class="col-12 no_pad float-left validation-text" *ngIf="orderOverviewValidationValue.CurrencyId">
                Currency is mandatory.</p>

            </div>
            <!-- Currency autocomplete ends here-->

            <!-- Select Wipro contracting entity dropdown  STARTS -->
            <!-- <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left plb-60-20 mrnbot-10 height90">
              <label for="ordertype" class="w-100 label-form">Wipro contracting entity *</label>
              <div class="customized-select mobile-select-box"
                [ngClass]="{'disabled-control': (disableOnRoleOverwiew || WTFlag || ParentOrderIdForAmendment || IsAmendment || disableOverviewOnPendingWithBFM) && (orderOverviewObj.PricingTypeId !== '')}">
                <span class="caret color-azure"></span>

                <select id="pricingTypeid" role="listbox" name="pricingTypename"
                  [ngClass]="orderOverviewValidationValue.PricingTypeId ? 'orangeborder' : ''"
                  [(ngModel)]="orderOverviewObj.PricingTypeId"
                  [disabled]="(disableOnRoleOverwiew || WTFlag || ParentOrderIdForAmendment || oppamendd || IsAmendment || disableOverviewOnPendingWithBFM ) && (orderOverviewObj.PricingTypeId !== '')"
                  (change)="setpricingType(orderOverviewObj.PricingTypeId)" required>
                  <option hidden value="">Select</option>
                  <option *ngFor="let pricingType of pricingTypes" [hidden]="!IsIndiaSBU && pricingType.Id == 184450005" [disabled]= "!IsIndiaSBU && pricingType.Id == 184450005"
                    [value]="pricingType.Id">{{pricingType.Name}}</option>
                </select>
              </div>
              <div class="web-select-box ">
                <mat-form-field class="col-12 no_pad float-left ">
                  <mat-select  panelClass="Select-panel-class" class="select-focus mat-select" id="pricingTypeid" role="listbox" name="pricingTypename" disableOptionCentering
                  [ngClass]="orderOverviewValidationValue.PricingTypeId ? 'orangeborder' : ''"
                  [(ngModel)]="orderOverviewObj.PricingTypeId"
                  [disabled]="(disableOnRoleOverwiew || WTFlag || ParentOrderIdForAmendment|| oppamendd  || IsAmendment || disableOverviewOnPendingWithBFM ) && (orderOverviewObj.PricingTypeId !== '')"
                  (selectionChange)="setpricingType(orderOverviewObj.PricingTypeId)" required>
                    <mat-option hidden value="">Select</mat-option>
                    <mat-option *ngFor="let pricingType of pricingTypes" [hidden]="!IsIndiaSBU && pricingType.Id == 184450005" [disabled]= "!IsIndiaSBU && pricingType.Id == 184450005"
                    [value]="pricingType.Id">{{pricingType.Name}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <p class="col-12 no_pad float-left validation-text" *ngIf="orderOverviewValidationValue.PricingTypeId">
                Wipro contracting entity is mandatory.</p>

            </div> -->
            <!-- Select Wipro contracting entity dropdown  ENDS -->

            <!--Contracting country autocomplete starts here-->
            <div
              class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10 height90">

              <form class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="Contractingcountry"
                  class="label-form">Contracting country
                  <span class="required"> *
                  </span>
                </label>
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad d-flex">

                  <div class="flex-grow-1">

                    <app-auto-complete-select [requiredField]="true" [source]="CountryArray" [dataHeader]="ContractingCounrtrydataHeader"
                      [selectedObj]="selectedCountryObj" (content)="getCountry($event)"
                      [labelName]="'Contractingcountry'" [Placeholder]="'Select'" [IsinitialsView]=false
                      [IsApiCall]=true (advanceLookUp)="advanceLookUpSearch($event)"
                      [MandtErrorFlag]="orderOverviewValidationValue.ContractingCountryId"
                      (SelectedData)="selectedContractingCountry($event)" [details]="defaultValue.country"
                      [detailsId]="orderOverviewObj.ContractingCountryId" [isSearchLoader]='isSearchLoader'
                      [Isdisabled]="disableOnRoleOverwiew ||disableOverviewOnPendingWithBFM || (ParentOrderIdForAmendment && savedContractingCountryId) || (IsAmendment && savedContractingCountryId)">
                    </app-auto-complete-select>

                  </div>
                </div>
              </form>
              <p class="col-12 no_pad float-left validation-text"
                *ngIf="orderOverviewValidationValue.ContractingCountryId">Contracting country is mandatory.</p>

            </div>
            <!--Contracting country autocomplete ends here-->

            <!-- Select Country sub-division dropdown  STARTS -->
            <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left plb-60-20 mrnbot-10 height90">
              <label for="ordertype" class="w-100 label-form">Country sub-division <span
                  *ngIf="mandatoryCountryCheck(defaultValue.country) == true && subDivisions.length > 0">*</span></label>
              <div class="customized-select mobile-select-box"
                [ngClass]="{'disabled-control': (subDivisions.length == 0 || disableOnRoleOverwiew || disableOverviewOnPendingWithBFM || ((ParentOrderIdForAmendment || IsAmendment) && mandatoryCountryCheck(defaultValue.country) == true && orderOverviewObj.DeleteCountrySubDivisionState ) )}">
                <span class="caret color-azure"></span>
                <select id="ordertype" role="listbox"
                  [ngClass]="subDivisions.length > 0 && orderOverviewValidationValue.CountrySubDivisionState ? 'orangeborder' : ''"
                  [(ngModel)]="orderOverviewObj.CountrySubDivisionState" (change)="onSubDivisionChange(orderOverviewObj.CountrySubDivisionState)"
                  [disabled]="subDivisions.length == 0 || disableOnRoleOverwiew || disableOverviewOnPendingWithBFM
                  
                   || ((ParentOrderIdForAmendment || IsAmendment) && mandatoryCountryCheck(defaultValue.country) == true && orderOverviewObj.DeleteCountrySubDivisionState ) ">
                  <option value="" disabled hidden>Select</option>
                  <option *ngFor="let subDivision of subDivisions" [value]="subDivision.SysGuid">{{subDivision.Name}}
                  </option>
                </select>
              </div>

              <div class="web-select-box">
                <mat-form-field class="col-12 no_pad float-left">
                  <mat-select disableOptionCentering panelClass="Select-panel-class" class="select-focus mat-select" id="ordertype" role="listbox"
                  [ngClass]="subDivisions.length > 0 && orderOverviewValidationValue.CountrySubDivisionState ? 'orangeborder' : ''"
                  [(ngModel)]="orderOverviewObj.CountrySubDivisionState" (selectionChange)="onSubDivisionChange(orderOverviewObj.CountrySubDivisionState)"
                  [disabled]="subDivisions.length == 0 || disableOnRoleOverwiew || disableOverviewOnPendingWithBFM || 
                  ((ParentOrderIdForAmendment || IsAmendment) && mandatoryCountryCheck(defaultValue.country) == true && orderOverviewObj.DeleteCountrySubDivisionState ) ">
                    <mat-option value="" disabled hidden>Select</mat-option>
                    <mat-option *ngFor="let subDivision of subDivisions" [value]="subDivision.SysGuid">{{subDivision.Name}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <p class="col-12 no_pad float-left validation-text"
                *ngIf="subDivisions.length > 0 && orderOverviewValidationValue.CountrySubDivisionState">Country sub-division
                is mandatory.</p>

            </div>

            <!-- Select Country sub-division dropdown  ends here -->

            <!-- Select City region dropdown  STARTS -->
            <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left plb-60-20 mrnbot-10 height90">
              <label for="ordertype" class="w-100 label-form">City region <span *ngIf="mandatoryCountryCheck(defaultValue.country) == true && cityRegions.length > 0">*</span></label>
              <div class="customized-select mobile-select-box"
                [ngClass]="{'disabled-control': (cityRegions.length == 0 || disableOnRoleOverwiew || disableOverviewOnPendingWithBFM || ((ParentOrderIdForAmendment || IsAmendment) && mandatoryCountryCheck(defaultValue.country) == true && orderOverviewObj.DeleteCityRegion ))}">
                <span class="caret color-azure"></span>
                <select id="ordertype" [ngClass]="cityRegions && orderOverviewValidationValue.CityRegion ? 'orangeborder' : ''"
                  (change)="onSelectCityRegion(orderOverviewObj.CityRegion)" role="listbox"
                  [(ngModel)]="orderOverviewObj.CityRegion"
                  [disabled]="cityRegions.length == 0 || disableOnRoleOverwiew || disableOverviewOnPendingWithBFM || ((ParentOrderIdForAmendment || IsAmendment) && mandatoryCountryCheck(defaultValue.country) == true && orderOverviewObj.DeleteCityRegion ) ">
                     <option value="" disabled hidden>Select</option>

                  <!--<option *ngIf="cityRegions.length > 1" value="" disabled selected>Select</option>-->

                  <option *ngFor="let cityRegion of cityRegions" [value]="cityRegion.SysGuid">{{cityRegion.Name}}
                  </option>
                </select>
              </div>
              <div class="web-select-box">
                <mat-form-field class="col-12 no_pad float-left">
                  <mat-select disableOptionCentering  panelClass="Select-panel-class" class="select-focus mat-select" id="ordertype" [ngClass]="cityRegions && orderOverviewValidationValue.CityRegion ? 'orangeborder' : ''"
                  (selectionChange)="onSelectCityRegion(orderOverviewObj.CityRegion)" role="listbox"
                  [(ngModel)]="orderOverviewObj.CityRegion"
                  [disabled]="cityRegions.length == 0 || disableOnRoleOverwiew || disableOverviewOnPendingWithBFM ||  ((ParentOrderIdForAmendment || IsAmendment) && mandatoryCountryCheck(defaultValue.country) == true && orderOverviewObj.DeleteCityRegion ) ">
                    <mat-option value="" disabled hidden>Select</mat-option>
                    <mat-option *ngFor="let cityRegion of cityRegions" [value]="cityRegion.SysGuid">{{cityRegion.Name}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <p class="col-12 no_pad float-left validation-text"
                *ngIf="cityRegions.length > 0 && orderOverviewValidationValue.CityRegion">City region is mandatory.</p>

            </div>
            <!-- Select City region dropdown  ends here -->

            <!--Vertical sales owner autocomplete starts here-->
            <div
              class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10 height90">

              <form class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="VSO"
                  class="label-form">Vertical sales owner
                  <span class="required"> *
                  </span>
                </label>
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad d-flex">

                  <div class="flex-grow-1">

                    <app-auto-complete-select [requiredField]="true" [source]="verticalCodeArr" [dataHeader]="VSOdataHeader"
                      [selectedObj]="selectedVSOObj" (content)="verticalCode($event)" [labelName]="'VSO'"
                      [MandtErrorFlag]="orderOverviewValidationValue.VerticalSalesOwnerId" [Placeholder]="'Select'"
                      [IsinitialsView]=false [IsApiCall]=true (advanceLookUp)="advanceLookUpSearch($event)"
                      (SelectedData)="selectedVSO($event)" [details]="defaultValue.verticalOwner"
                      [detailsId]="orderOverviewObj.VerticalSalesOwnerId" [isSearchLoader]='isSearchLoader'
                      [Isdisabled]="disableOnRoleOverwiew || disableOverviewOnPendingWithBFM">
                    </app-auto-complete-select>

                  </div>
                </div>
              </form>
              <p class="col-12 no_pad float-left validation-text"
                *ngIf="orderOverviewValidationValue.VerticalSalesOwnerId">Vertical sales owner is mandatory.</p>

            </div>
            <!--Vertical sales owner autocomplete ends here-->

            <!--Advisor autocomplete starts here-->
            <div
              class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10 height90"
              *ngIf="!oppDataIsSimpleDeal">

              <form class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="Advisor"
                  class="label-form">Advisor
                  <span class="required"> *
                  </span>
                </label>
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad d-flex">

                  <div class="flex-grow-1">

                    <app-auto-complete-select [requiredField]="true" [source]="advisorCodeArr" [dataHeader]="AdvisordataHeader"
                      [selectedObj]="selectedAdvisorObj" (content)="advisorCode($event)" [labelName]="'Advisor'"
                      [MandtErrorFlag]="orderOverviewValidationValue.AdvisorId" [Placeholder]="'Select'"
                      [IsinitialsView]=false [IsApiCall]=true (advanceLookUp)="advanceLookUpSearch($event)"
                      (SelectedData)="selectedValueAdvisor($event)" [details]="defaultValue.advisorName"
                      [detailsId]="orderOverviewObj.AdvisorId" [isSearchLoader]='isSearchLoader'
                      [Isdisabled]="disableOnRoleOverwiew || disableOverviewOnPendingWithBFM">
                    </app-auto-complete-select>

                  </div>
                </div>
              </form>
              <p class="col-12 no_pad float-left validation-text" *ngIf="orderOverviewValidationValue.AdvisorId">Advisor
                is mandatory.</p>

            </div>
            <!-- Advisor autocomplete ends here-->
            <!-- Select Pricing type dropdown  STARTS -->

            <!-- Select Pricing type dropdown  ends here -->

            <!-- Select radio Authorization type STARTS -->
            <div
              class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left plb-60-5 mrnbot-10 pad-0 mbtm-10 height-105">

              <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad label-form" id="key"
                matTooltip="Lowest binding contractual document received from client against which the Order will be booked">
                Authorization type*</label>
              <mat-radio-group class="float-left mt5 radio-fontfamly " name="AuthorizationRadio"
                [(ngModel)]="orderOverviewObj.Authorization" (change)="changeAuthOrContSigned('auth')"
                aria-labelledby="key"
                [disabled]="disableOnRoleOverwiew || orderOverviewObj.OrderTypeId == 184450002 || orderOverviewObj.OrderTypeId == 184450004">
                <mat-radio-button [value]=true class="pr30 label-form-blue">SOW</mat-radio-button>
                <mat-radio-button [value]=false class="label-form-blue ">PO
                </mat-radio-button>
              </mat-radio-group>

              <p class="float-right mt8 radio-fontfamly mar-btm25 po-detail" role="button" tabindex="0"
                *ngIf="!orderOverviewObj.Authorization && ContrcatSigned"
                (click)="podetailspopup()">PO details
                ({{poDetailsData.length ? poDetailsData.length : 0}})</p>
              <br>
              <p class="col-12 no_pad float-left validation-text margin_left" [ngClass]="service.Summary_window?'marginleftsum':''"
                *ngIf="orderOverviewValidationValue.poDetails && !orderOverviewObj.Authorization && ContrcatSigned">
                Fill PO Details</p>

              <p class="col-12 no_pad float-left validation-text" *ngIf="orderOverviewValidationValue.Authorization">
                Authorization type is mandatory.</p>

            </div>


            <!-- Select radio Authorization type STARTS -->

            <!-- Select Contract signed STARTS -->
            <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left plb-60-0 mrnbot-10 mbtm-10">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad label-form mb3" id="key">
                Contract signed*</div>

              <mat-radio-group class="float-left mt5 radio-fontfamly " name="ContrcatSignedRadio"
                [(ngModel)]="ContrcatSigned" (change)="changeAuthOrContSigned('signed')" aria-labelledby="key"
                [disabled]="disableOnRoleOverwiew || disableOverviewOnPendingWithBFM || orderOverviewObj.OrderTypeId == 184450002 || orderOverviewObj.OrderTypeId == 184450004">
                <!-- <mat-radio-button value="tcv" class="pr30 label-form-blue" (click)="opentcvpopup()">% of TCV</mat-radio-button> -->
                <mat-radio-button [value]=true class="pr30 label-form-blue" [ngClass]="service.Summary_window?'padright10':''">Yes</mat-radio-button>
                <mat-radio-button [value]=false class="label-form-blue ">No
                </mat-radio-button>
              </mat-radio-group>

              <button type="button" class=" d-flex align-items-center h-40 float-right primary-button pad-arround loiButtonClass"
              matTooltip="Upload a letter of intent which customer would have shared to start the project in lieu of signed contract"
                *ngIf="!ContrcatSigned" [disabled]="disableOnRoleOverwiew || disableOverviewOnPendingWithBFM" (click)="openUploadLOIPopup()">
                <span class="mdi mdi-attachment attach-icon">
                </span>{{((loiAttachedDocuments && loiAttachedDocuments.length > 0) || loiValidity || loiReceivedDate || loiValue) ? 'Edit' : 'Upload'}}</button>
              <button aria-label="Upload contract" type="button" [ngClass]="service.Summary_window?'padleftright8':''"  class=" d-flex align-items-center h-40 float-right primary-button pad-arround loiButtonClass float-left_Ip5 mb-10"
                *ngIf="ContrcatSigned && IsICMAccount == false" (click)="openUploadContractPopup()"
                [disabled]="disableOnRoleOverwiew || disableOverviewOnPendingWithBFM">
                <span class="mdi mdi-attachment attach-icon"> </span>Upload contract</button>


              <span class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                *ngIf="ContrcatSigned && IsICMAccount == true && OrderId">
                <!--  <p *ngIf="!OrderId" class="radio-cmnt mb0">Please ensure contracts are executed. You can view contracts post Order creation</p> -->
                <p class="radio-cmnt mb0">Please ensure the contracts are executed <span class="color-azure"
                    (click)="viewContracts()">
                    <a href="{{viewContractNavigate}}" target="_blank">View contracts</a></span></p>
              </span>
              <span class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" *ngIf="!ContrcatSigned">
                <p class="radio-cmnt2 mb0">An LOI/ LOE or an equivalent document is required to be
                  uploaded if a signed contract is unavailable.</p>
              </span>
              <!-- [ngClass]="!service.Summary_window ? '' : 'table-responsive'" -->

              <!-- for upload loi -->
              <perfect-scrollbar *ngIf="!ContrcatSigned && loiAttachedDocuments && loiAttachedDocuments.length > 0"
                style="max-height:200px; margin-bottom: 10px;">
                <section class="float-left col-12 no_pad mt-10" *ngFor="let files of loiAttachedDocuments;let i=index">
                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 pl-0 float-left d-flex download-uploaded-file mx-width-90per">
                    <span 
                      class="col-xl-2 col-lg-2 col-md-2 col-sm-2 col-2 float-left naming-tags-square pad-7 child-middle bg-azure cp">
                      <span class="initials mdi mdi-file-document font-20" id="inti_name-kb"></span>
                      <span class="initials mdi mdi-download font-20" role="button" tabindex="0"
                        aria-label="Download file" id="inti_name-kb1" (click)="downloFile(i)" matTooltip="Download file"></span>
                    </span>
                    <label for="inti_name-kb "
                      class="col-xl-10 col-lg-10 col-md-10 col-sm-10 col-10 float-left pos-rel name-sq padLR-10 border-std color-azure mx-width-90per">
                      <span  (click)="downloFile(i)"
                        class="col-xl-10 col-lg-10 col-md-10 col-sm-10 col-10 no_pad color-label_gray hover-attach padding-left5 ellipses w-160 cp"
                        matTooltip="{{files.UploadFileName}}">
                        <!-- (click)="downloadsingle(i)" -->
                        {{files.UploadFileName}}</span>
                      <button type="button" aria-label="close" *ngIf="!disableOnRoleOverwiew && !disableOverviewOnPendingWithBFM" [disabled]="disableOnRoleOverwiew || disableOverviewOnPendingWithBFM"
                        (click)="deleteLOIFile(files,i)" matTooltip="Cancel" class="col-xl-2 col-lg-2 col-md-2 col-sm-2 col-2 float-right no_pad btn-none color-azure onone cp loiButtonClass">
                        <!-- (click)="delinkAttach(files)" -->
                        <span class="mdi mdi-window-close">
                        </span>
                      </button>
                    </label>
                  </div>
                </section>
              </perfect-scrollbar>

              <!-- upload contract -->
              <perfect-scrollbar *ngIf="ContrcatSigned && IsICMAccount == false"
                style="max-height:200px; margin-bottom: 10px;">
                <section class="float-left col-12 no_pad mt-10"
                  *ngFor="let contractfiles of UploadContract.UploadContractFiles;let i=index">
                  <div class="col-xl-8 col-lg-8 col-md-10 col-sm-10 col-10 pl-0 mr10 float-left d-flex download-uploaded-file mobile-no_pad">
                    <span 
                      class="float-left naming-tags-square pad-7 child-middle bg-azure cp">
                      <span class="initials mdi mdi-file-document font-20" id="inti_name-kb"></span>
                      <span class="initials mdi mdi-download font-20" role="button" tabindex="0"
                        aria-label="Download file" id="inti_name-kb1" (click)="downloadFile(i)" matTooltip="Download file"></span>
                    </span>
                    <label for="inti_name-kb "
                      class="float-left pos-rel name-sq padLR-10 border-std color-azure mx-width-90per">
                      <span (click)="downloadFile(i)"
                        class="color-label_gray hover-attach padding-left5 ellipses width-90 cp"
                        matTooltip="{{contractfiles.UploadFileName}}">
                        <!-- (click)="downloadsingle(i)" -->
                        {{contractfiles.UploadFileName}}</span>
                  
                      <button type="button" aria-label="close" *ngIf="!disableOnRoleOverwiew && !disableOverviewOnPendingWithBFM" [disabled]="disableOnRoleOverwiew || disableOverviewOnPendingWithBFM" (click)="deleteContractattachments(contractfiles,i)"

                        class="float-right btn-none color-azure onone cp loiButtonClass">
                        <!-- (click)="delinkAttach(files)" -->
                        <span class="mdi mdi-window-close">
                        </span>
                      </button>
                    </label>
                  </div>
                </section>
              </perfect-scrollbar>


              <!-- upload contract -->


            </div>
            <!-- Select Contract signed ends here -->

            <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left plb-60-20 pb21 mrnbot-10 height-105"
              [ngClass]="(ContrcatSigned && orderOverviewObj.Authorization) ?'pad-btm10':''">
              <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left label-form no_pad" for="Enddate">
                {{ContrcatSigned ? 'Signed date*' : 'Expected PO/SOW signed date*' }}</label>
              <div class="no_pad col-12 col-xs-12 col-sm-12 col-xl-12 col-lg-12 pos-rel">

                <!-- <div class="col-10 col-lg-10 col-sm-10 col-md-10 float-left no_pad cal_brdr">
                      <div class="col-12 col-lg-12 col-sm-12 col-md-12 float-left no_pad cust_calan customized-input">
                          <div class="col-12 col-lg-12 col-sm-12 col-md-12 float-left no_pad cust_calan customized-input">
                            <input class="col-12 col-lg-12 col-sm-12 col-md-12 float-left " name="PSDCurr"      
                      [(ngModel)]="modifyOrderDetailsObj.currentOrderPSD"  id="CurrStartdate" [matDatepicker]="picker21"
                              title="DD-MMM-YYYY" placeholder="Select date">
                            <mat-datepicker-toggle matSuffix [for]="picker21" tabindex="0" aria-label="calender" (click)="picker21.open()" (keypress)="picker21.open()" >
                              <span class="mdi mdi-calendar-blank float-right no_pad" matDatepickerToggleIcon></span>
                            </mat-datepicker-toggle>
                            <mat-datepicker #picker21></mat-datepicker>
                          </div>
                      </div>
                </div>   -->

                <div class=" col-md-10 float-left no_pad cal_brdr"  [ngClass]="showDelayReasonTab? 'col-10 col-sm-10 col-lg-10 col-xl-10' : 'col-12 col-sm-12 col-lg-12 col-xl-12'">
                  <div class="col-12 col-lg-12 col-sm-12 col-md-12 float-left no_pad cust_calan customized-input">
                    <input class="col-12 col-lg-12 col-sm-12 col-md-12 float-left" id="SignedDateID"
                      name="SignedDatename" (click)="picker3.open()"
                      [ngClass]="(!orderOverviewObj.Authorization ? orderOverviewValidationValue.PurchaseOrderSignedDate : orderOverviewValidationValue.SOWSignedDate) ? 'orangeborder' : ''"
                      (dateChange)="changeContractSignedDate(contractSignedDate)" [(ngModel)]="contractSignedDate"
                      (keypress)="picker3.open()" [matDatepicker]="picker3" title="DD-MMM-YYYY"
                      [disabled]="disableOnRoleOverwiew || (ContrcatSigned && !orderOverviewObj.Authorization) || (!ContrcatSigned && (!projectStartDate || ExpectedSignedDateChangeCount > 1))"
                      placeholder="DD-MMM-YYYY" [min]="signedMinDateVal" [max]="signedMaxDateVal">

                    <mat-datepicker-toggle matSuffix [for]="picker3" disabled (click)="picker3.open()"
                      (keypress)="picker3.open()">
                      <span class="mdi mdi-calendar-blank float-right no_pad" matDatepickerToggleIcon></span>
                    </mat-datepicker-toggle>
                    <mat-datepicker #picker3></mat-datepicker>
                  </div>
                </div>


                <!--new message pop-->
                <div class="col-2 col-lg-2 col-sm-2 col-md-2 float-left padleft " *ngIf="showDelayReasonTab">
                  <button type="button" aria-label="comment" class="order-comment" (click)="openDelayReason()">
                    <span class="mdi mdi-comment-processing-outline btn-coment"></span>
                  </button>
                </div>
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left message-order"
                  *ngIf="openDelayMessage">
                  <span class="arrow-right"></span>
                  <span class="col-12 float-left headr-pop no_pad">Delay reason *</span>
                  <textarea class="col-12 float-left textarea-pop mt10" [(ngModel)]="delayReasonData"
                    (ngModelChange)="changeDelayReasonData()"></textarea>
                  <p *ngIf="showDelayErrorFlag" class="validation_text float-left no_pad mb-0">Delay reason is mandatory
                  </p>
                  <div class="col-12 float-left no_pad mt10">
                    <button type="button" aria-label="Cancel" class="cancel-pop-order float-left" (click)="closeDelayReason()">Cancel</button>
                    <button type="button" aria-label="save" class="save-pop-order float-left" [disabled] = "savedis" (click)="saveDelayReason()">save</button>
                  </div>

                </div>
                <!--new message pop-->

              </div>
              <p class="col-12 no_pad float-left validation-text"
                *ngIf="!orderOverviewObj.Authorization ? orderOverviewValidationValue.PurchaseOrderSignedDate : orderOverviewValidationValue.SOWSignedDate">
                {{ContrcatSigned ? 'Signed date' : 'Expected PO/SOW signed date'}} is mandatory.</p>
            </div>

            <!-- Select POA search  STARTS here-->
            <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left plb-60-20 mrnbot-10 height-105"
              *ngIf="orderOverviewObj.Authorization && ContrcatSigned">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="search"
                matTooltip="Power of Attorney(POA) is authorized to sign a contract on behalf of Wipro including a MSA SOW, NDA etc.. Before you execute any agreement please ensure that your respective POA authorizes you to do so for the Wipro entity on whose behalf the document is to be executed.
                  Please note that as a company policy, order will not be allowed to be submitted unless the correct POA has signed on the executable document (MSA, SOW, and NDA) and the same has been identified at the time of order submission. Kindly refer to the list of authorized Power of Attorneys given below and ensure that the contract documents are signed by one of the POA's in the list" matTooltipPosition="right" 
                  class="label-form" >{{POAOrder ? 'POA*' : 'POA'}}</label>
                <input readonly [value]="defaultValue.POAName"
                  [ngClass]="orderOverviewValidationValue.POAHolderId ? 'orangeborder' : ''"
                  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input cp" id="search"
                  name="search" autocomplete="off" type="text" placeholder="Search" (click)="NavigateToPOHeader()"
                  [disabled]="disableOnRoleOverwiew || !contractSignedDate">
                <span class="mdi mdi-magnify"></span>
              </div>
              <p class="col-12 no_pad float-left validation-text" *ngIf="orderOverviewValidationValue.POAHolderId">POA
                is mandatory.</p>
            </div>
            <!-- Select orderPOA search ends here -->


            <!-- TCV Compare -->
            <!-- [ngClass]="!service.Summary_window ? '' : 'table-responsive'"
            col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8 float-left plb-60-20 -->
            <div class="col-12 bg-azurefield float-left plb-60-20"
              [ngClass]="!service.Summary_window ? 'col-sm-12 col-md-12 col-lg-8 col-xl-8' : 'col-sm-12 col-md-12 col-lg-12 col-xl-12'">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 flaot-left tcv-compare mt10">
                <div class="col-12 no_pad float-left">
                  <span class="accordian-title float-left tcv-head col-12 no_pad">
                    TCV comparison</span>

                </div>
                <!-- {{defaultValue.PricingTCVDisplay}} -->
                <div class="col-12 col-sm-12 col-md-3 col-xl-3 col-lg-3 no_pad ob-style float-left mt20">
                  <!--<label *ngIf ="orderApprovalStatus.WT" class="col-12 float-left no_pad ">
                    Pricing TCV</label>
                    <label *ngIf ="!orderApprovalStatus.WT" class="col-12 float-left no_pad ">
                     Opportunity TCV</label>-->
                  <label class="col-12 float-left no_pad "
                    [matTooltip]="WTFlag ? 'Total Contract Value as per the OB allocation section': (!WTFlag && !orderCreated) ? 'Total Contract Value as per the OB allocation section' : (!WTFlag && orderCreated) ? 'Total Contract Value as per the OB allocation section' : '' ">OB
                    TCV </label>
                  <span class="col-12 float-left no_pad mt10">
                    <!--$ 30,000,000.00-->{{CurrencySymbol}} {{orderOverviewObj.OrderTCV }}
                  </span>
                  <!-- <span *ngIf ="!WTFlag" class="col-12 float-left no_pad mt10"> -->
                  <!--$ 30,000,000.00-->
                  <!-- </span> -->
                </div>
                <div class="col-12 col-sm-12 col-md-7 col-xl-7 col-lg-7 no_pad ob-style float-left mt20">
                  <form class="col-12 float-left no_pad">
                    <label class="col-12 float-left no_pad " for="ContractTCV"
                      matTooltip="Enter the Total Contract value mentioned in the Contract received from Customer">
                      Contract TCV *</label>

                    <div class="col-6 float-left no_pad ">
                      <div class="flex-grow-1 col-12 no_pad">
                        <app-auto-complete-select [requiredField]="true" [source]="currencyCodeArr" [dataHeader]="CurrencydataHeader"
                          [selectedObj]="selectedContractCurrencyObj" (content)="currencyCode($event)"
                          [labelName]="'ContractCurrency'"
                          [MandtErrorFlag]="orderOverviewValidationValue.Wipro_ContractCurrency"
                          [Placeholder]="'Select'" [IsinitialsView]=false [IsApiCall]=true
                          (advanceLookUp)="advanceLookUpSearch($event)"
                          (SelectedData)="selectedConrtactCurrency($event)"
                          [details]="defaultValue.Wipro_ContractCurrency"
                          [detailsId]="orderOverviewObj.Wipro_ContractCurrency" [isSearchLoader]='isSearchLoader'
                          [Isdisabled]="disableOnRoleOverwiew || !ContrcatSigned ||(ContrcatSigned && !orderOverviewObj.Authorization)">
                        </app-auto-complete-select>
                        <p class="col-12 no_pad float-left validation-text"
                          *ngIf="orderOverviewValidationValue.Wipro_ContractCurrency"> Contract TCV is mandatory.</p>
                      </div>


                    </div>
                    <div class="col-6 float-left">
                      <input class="col-12 float-left  h-40 label-input pad_10" id="input" name="SOWTCV" label="" type="text"
                        placeholder="0.00" [(ngModel)]="orderOverviewObj.SOWTCV"
                        #contcv [decimalnumbersOnly]="acceptNegative" [oldValue]="contcv.value"
                        [ngClass]="orderOverviewValidationValue.SOWTCV ? 'orangeborder' : ''"
                        (blur)="getTCVdifference(contcv.value)"
                        [disabled]="disableOnRoleOverwiew || !ContrcatSigned || (ContrcatSigned && !orderOverviewObj.Authorization)">
                      <p class="col-12 no_pad float-left validation-text" *ngIf="orderOverviewValidationValue.SOWTCV">
                        field is mandatory.</p>

                    </div>
                  </form>

                </div>

                <div class="col-12 col-sm-12 col-md-2 col-xl-2 col-lg-2 no_pad ob-style float-left mt20">
                  <label class="col-12 float-left no_pad ">
                    TCV Difference</label>
                  <span *ngIf="currencyMismatch" class="col-12 float-left no_pad mt10 radio-cmnt ">
                    Currency mismatch
                  </span>
                  <span class="col-12 float-left no_pad mt10" *ngIf="!currencyMismatch" [ngClass]="{'radio-cmnt': orderOverviewObj.TCVDifferenceAmount && orderOverviewObj.TCVDifferenceAmount != 0}">
                    {{CurrencySymbol}}
                    {{ orderOverviewObj.TCVDifferenceAmount ?  orderOverviewObj.TCVDifferenceAmount : '0.00'}}
                    <!--USD {{ orderOverviewObj.TCVDifferenceAmount }}.00-->

                  </span>
                </div>
                <span
                *ngIf="WTFlag && currencyMismatch"
                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad mt10">
                <p class="radio-cmnt mb0">Note: This order will be put on-hold until TCV as per RLS and contract
                  matches. It will be pushed for BFM approval
                  once the value and currency matches.</p>
              </span>

                <!-- <span
                  *ngIf="WTFlag && (currencyMismatch || showTolerence)"
                  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad mt10">
                  <p class="radio-cmnt mb0">Note: This order will be put on-hold until TCV as per RLS and contract
                    matches. It will be pushed for BFM approval
                    once the value and currency matches.</p>
                </span> -->
                <!-- <span *ngIf="WTFlag && showTolerenceInLimit"
                  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad mt10">
                  <p class="radio-cmnt mb0">Note: This order can be submitted for approval since the difference is under
                    acceptable threshold</p>
                </span> -->

                <span *ngIf="!WTFlag && currencyMismatch"
                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad mt10">
                <p class="radio-cmnt mb0">Note: Order cant be submitted for approval as there is mismatch of currency between Order TCV & Contract TCV</p>
              </span>

              <!-- <span *ngIf="!WTFlag && showTolerence"
              class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad mt10">
              <p class="radio-cmnt mb0">Note: Order cannot be submitted for approval till Order TCV and Contract TCV matches</p>
            </span> -->

              </div>
            </div>
          </div>

          <div *ngIf="!projectService.editProject && !projectService.approvalStatus">
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 no_pad" *ngFor="let item of orderOverviewArray">
              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10">
                <section class=" converstion-name  pad_15">
                  <label for="InitiatedOn" class="col-12 no_pad">Order type</label>
                  <span class="td_color col-12 no_pad" id="InitiatedOn"> {{item.ordertype}}</span>
                </section>
              </div>
              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10">
                <section class="converstion-name  pad_15">
                  <label for="sapCustomerCode" class="col-12 no_pad">Order classification</label>
                  <span class="td_color col-12 no_pad" id="sapCustomerCode"> {{item.classification}}</span>
                </section>
              </div>
              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10">
                <section class=" converstion-name  pad_15">
                  <label for="classification" class="col-12 no_pad">SAP customer code</label>
                  <span class="td_color col-12 no_pad" id="classification"> {{item.customercode}}</span>
                </section>
              </div>
              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10">
                <section class=" converstion-name  pad_15">
                  <label for="startDate" class="col-12 no_pad">Project start date</label>
                  <span class="td_color col-12 no_pad" id="startDate"> {{item.startDate}}</span>
                </section>
              </div>
              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10">
                <section class=" converstion-name  pad_15">
                  <label for="endDate"  class="col-12 no_pad">Project end date</label>
                  <span class="td_color col-12 no_pad" id="endDate"> {{item.endDate}}</span>
                </section>
              </div>
              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10">
                <section class=" converstion-name  pad_15">
                  <label for="contractingCountry" class="col-12 no_pad">Currency</label>
                  <span class="td_color col-12 no_pad" id="contractingCountry"> {{item.currency}}</span>
                </section>
              </div>
              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10">
                <section class=" converstion-name  pad_15">
                  <label for="verticalSalesOwner" class="col-12 no_pad">Contracting country</label>
                  <span class="td_color col-12 no_pad" id="verticalSalesOwner"> {{item.contractingcountry}}</span>
                </section>
              </div>
              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10">
                <section class=" converstion-name  pad_15">
                  <label for="advisor" class="col-12 no_pad">Country sub-division</label>
                  <span class="td_color col-12 no_pad" id="advisor"> {{item.subdivision}}</span>
                </section>
              </div>
              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10">
                <section class=" converstion-name  pad_15">
                  <label for="currency" class="col-12 no_pad">City region</label>
                  <span class="td_color col-12 no_pad" id="currency"> {{item.region}}</span>
                </section>
              </div>
              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10">
                <section class=" converstion-name  pad_15">
                  <label for="pricingId" class="col-12 no_pad">Vertical sales owner</label>
                  <span class="td_color col-12 no_pad" id="pricingId"> {{item.salesowner}}</span>
                </section>
              </div>
              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10">
                <section class=" converstion-name  pad_15">
                  <label for="salesBookingId" class="col-12 no_pad">Advisor</label>
                  <span class="td_color col-12 no_pad" id="salesBookingId"> {{item.Advisor}}</span>
                </section>
              </div>
              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10">
                <section class=" converstion-name  pad_15">
                  <label for="customerConfirmation" class="col-12 no_pad">Pricing type</label>
                  <span class="td_color col-12 no_pad" id="customerConfirmation"> {{item.Pricingtype}}</span>
                </section>
              </div>
              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10">
                <section class=" converstion-name  pad_15">
                  <label for="sowSigned" class="col-12 no_pad">Authorization type</label>
                  <span class="td_color col-12 no_pad" id="sowSigned"> {{item.authtype}}</span>
                </section>
              </div>
              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10">
                <section class=" converstion-name  pad_15">
                  <label for="sowSigned" class="col-12 no_pad">Contract signed</label>
                  <span class="td_color col-12 no_pad" id="sowSigned"> {{item.contractsign}}</span>
                </section>
              </div>
              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10">
                <section class=" converstion-name  pad_15">
                  <label for="sowSigned" class="col-12 no_pad">Signed date</label>
                  <span class="td_color col-12 no_pad" id="sowSigned"> {{item.signtype}}</span>
                </section>
              </div>
              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mrnbot-10">
                <section class=" converstion-name  pad_15">
                  <label for="sowSigned" class="col-12 no_pad">POA</label>
                  <span class="td_color col-12 no_pad" id="sowSigned"> {{item.POA}}</span>
                </section>
              </div>
              <!-- TCV Compare -->
              <div class="col-12 col-sm-12 col-md-6 col-lg-8 col-xl-8 float-left plb-60-20">
                <div class="col-12 col-sm-12 flaot-left tcv-compare1">
                  <div class="col-12 no_pad float-left">
                    <span class="accordian-title float-left tcv-head col-12 no_pad">
                      TCV comparison</span>
                  </div>
                  <div class="col-4 no_pad ob-style float-left mt20">
                    <label class="col-12 float-left no_pad ">
                      Pricing TCV</label>
                    <span class="col-12 float-left no_pad mt10">
                      $ 30,000,000.00
                    </span>
                  </div>

                  <div class="col-4 no_pad ob-style float-left mt20">
                    <label class="col-12 float-left no_pad ">
                      Contract TCV</label>
                    <span class="col-12 float-left no_pad mt10">
                      $ 30,000,000.00
                    </span>
                  </div>
                  <div class="col-3 no_pad ob-style float-left mt20">
                    <label class="col-12 float-left no_pad ">
                      TCV Difference</label>
                    <span class="col-12 float-left no_pad mt10">
                      $ 0
                    </span>
                  </div>
                </div>
              </div>
              <!-- TCV Comparison ends -->

            </div>
          </div>

        </mat-expansion-panel>
      </mat-accordion>
    </div>
    <!-- Order-overview panel ends here -->

    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt20 order-hierarchy-mob">
      <div class="col-12 col-sm-8 col-md-8 col-lg-8 col-xl-8 padL-56 float-left">
        <span class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad upper-text">OB allocation </span>
        <span class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad lower-text mb10">Please validate
          the
          projection values. You can make changes till 3 days from Order Approved by BFM.
 </span>
      </div>
      <div class="col-12 float-left paddg10 mb20 card-details" *ngIf="WTFlag && businessSOlutionData.length>0">
        <div class="col-xl-3 col-lg-3 col-md-4 col-sm-12 col-12 no_pad float-left mt10">
          <label for="" class="col-12 no_pad float-left">SL TCV ({{CurrencySymbol}})</label>
          <span class="col-12 no_pad float-left">{{CurrencySymbol}}
            {{(businessSOlutionData[0].Sltcv)?businessSOlutionData[0].Sltcv:'0.00'}}</span>
        </div>
        <div class="col-xl-3 col-lg-3 col-md-4 col-sm-12 col-12 no_pad float-left mt10">
          <label for="" class="col-12 no_pad float-left">IP TCV ({{CurrencySymbol}})</label>
          <span class="col-12 no_pad float-left">{{CurrencySymbol}}
            {{(businessSOlutionData[0].IpTcv)?businessSOlutionData[0].IpTcv:'0.00'}}</span>
        </div>
        <div class="col-xl-3 col-lg-3 col-md-4 col-sm-12 col-12 no_pad float-left mt10">
          <label for="" class="col-12 no_pad float-left">Overall TCV ({{CurrencySymbol}})</label>
          <span class="col-12 no_pad float-left">{{CurrencySymbol}}
            {{(businessSOlutionData[0].OverallTcv)?businessSOlutionData[0].OverallTcv:'0.00'}}</span>
        </div>
        <div class="col-xl-3 col-lg-3 col-md-4 col-sm-12 col-12 no_pad float-left mt10">
          <label for="" class="col-12 no_pad float-left">Pricing updated on</label>
          <span
            class="col-12 no_pad float-left">{{PricingUpdateOn ? (PricingUpdateOn | date : 'dd-MMM-yyyy') : 'NA'}}</span>
        </div>
      </div>
      <div class="col-12 col-sm-12 col-md-12 col-lg-4 col-xl-4 no_pad float-left mt20 threebtn" *ngIf="showModification">
        <div
          class=" col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-right disp-flex web-action-button no_pad">
          <!-- Modified projectiion dropdown btn start -->
          <!--commenting for qa-->
          <div class="cust-dropdown-btn col-12 col-lg-6 col-xl-6 col-sm-12 col-md-12 mobile-no_pad">
            <mat-form-field class="col-12 no_pad float-left">
              <mat-select disableOptionCentering panelClass="Select-panel-class" name="Projection"
                [(ngModel)]="Projectionvalue" (selectionChange)="changeProjection(Projectionvalue)"
                class="select-focus mat-select {{service.getSelectedClass(Projectionvalue)}}" role="listbox">
                <mat-option hidden value="">Select</mat-option>
                <mat-option value="1">Modified OB allocation</mat-option>
                <mat-option value="2">Original OB allocation</mat-option>
                <!-- <mat-option *ngFor="let reasonname of selectedReasonValue" [value]="reasonname.Id">{{reasonname.Name}}</mat-option> -->
              </mat-select>
            </mat-form-field>

          </div>
          <button aria-label="Reject" *ngIf="ModificationOBAllocation" type="button"
            class="primary-button h-40 mr10 save-responsive-btn button-wd50 btnwidth100 mrgnBtm-15 min-90 " [ngClass]="{'reject_btn': OBAllocationAction == 'Rejected'}"
            (click)="orderrejectpopup('Rejected')"><span class="mdi mdi-close"></span>
            Reject</button>
          <button aria-label="Approve" *ngIf="ModificationOBAllocation" type="button"
            class="primary-button h-40 mr10 save-responsive-btn button-wd50 btnwidth100 mrgnBtm-15 min-90 " [ngClass]="{'approve_btn':OBAllocationAction == 'Approved'}"
            (click)="orderrejectpopup('Approved')"><span class="mdi mdi-check"></span>Approve </button>
        </div>
      </div>

      <form #myOrderForm="ngForm">
        <!-- business solution panel starts here -->
        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" *ngIf="!WTFlag">
          <mat-expansion-panel hideToggle="true" [expanded]="panelOpenState7" class="no_pad"
            (opened)="panelOpenState7 = true" (closed)="panelOpenState7 = false">
            <mat-expansion-panel-header class="min_height60">
              <div class="min_height60 col-12 no_pad">
                <div class="accord-heading col-12">
                  <span
                    [ngClass]="panelOpenState7 ? 'mdi mdi-chevron-down chevron-right float-left':'mdi mdi-chevron-up chevron-right float-left'"></span>
                  <div class="float-left no_pad"> <span class="accordian-title cardsHead col-6 no_pad">
                      Business solution panel</span>

                  </div>
                </div>
              </div>
            </mat-expansion-panel-header>
            <div class="col-12 no_pad float-left border_top" *ngIf="businessSOlutionData.length>0">
              <!--search starts here-->
              <div
                class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8  float-left plb-60-20 customized-input cust_autoComplete pos-rel mb1">
                <!-- <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                  <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="search"
                    class="label-form mt20">Smart Search</label>
                  <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input" id="search"
                    (click)="navigatetobusinesssolutionsearch()" name="search" autocomplete="off" type="text"
                    placeholder="Search (service line, solution, alliance, platform solutions and holmes)"
                    [disabled]="disableOnRoleBSPanel">
                  <span class="mdi mdi-magnify"></span>
                </div> -->
              </div>
              <!--search ends here-->

              <div class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8  float-left plb-60-20">

                <!-- select method radio buttons -->
                <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6  float-left plb-60-20">
                  <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                    <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad label-form">Select method of TCV calculation*</label>
                    <mat-radio-group class="float-left pt-10" name="BSPradio"
                      [(ngModel)]="businessSOlutionData[0].TCVCalculation" aria-labelledby="key"
                      [disabled]="disableOnRoleBSPanel || WTFlag">
                      <!-- <mat-radio-button value="tcv" class="pr30 label-form-blue" (click)="opentcvpopup()">% of TCV</mat-radio-button> -->
                      <mat-radio-button [value]=true class="pr30 label-form-blue">% of TCV</mat-radio-button>
                      <mat-radio-button [value]=false class="label-form-blue ">Revenue
                      </mat-radio-button>
                    </mat-radio-group>
                  </div>
                </div>
                <!-- select method radio buttons -->
                <div class="col-12 col-sm-12 col-md-3 col-lg-3 col-xl-3  float-left mobile-no_pad"
                  [ngClass]="(!businessSOlutionData[0].TCVCalculation || disableOnRoleBSPanel || WTFlag)? '' :''">
                  <div class="customized-input">
                    <label for="license" class="label-form">SL TCV ({{CurrencySymbol}})</label>
                    <input id="license" name="BSPSLTCV" type="text" class="border-gray w-100"
                      [(ngModel)]="businessSOlutionData[0].Sltcv" 
                      #bspsltcv [decimalnumbersOnly]="acceptNegative" [oldValue]="bspsltcv.value"
                      placeholder="00.00"
                      onpaste="return false;" ondrop="return false;" 
                      (blur)="OnBSPanelSLTCVBlur(bspsltcv.value)"
                      [disabled]="!businessSOlutionData[0].TCVCalculation || disableOnRoleBSPanel || WTFlag">
                  </div>
                </div>

                <div class="col-12 col-sm-12 col-md-3 col-lg-3 col-xl-3  float-left mobile-no_pad">
                  <div class="customized-input">
                    <label for="license" class="label-form">IP TCV ({{CurrencySymbol}})</label>
                    <input id="license" name="BSPIPTCV" type="text" class="border-gray w-100"
                      [(ngModel)]="businessSOlutionData[0].IpTcv" placeholder="00.00" disabled>
                  </div>
                </div>

              </div>
              <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4 float-left plb-60-20">
                <div class="col-12 no_pad float-left">
                  <label class="col-12 no_pad float-left label-form">Overall TCV ({{CurrencySymbol}})</label>
                  <span
                    class="col-12 no_pad float-left subtext1 pt-10">{{(businessSOlutionData[0].OverallTcv)?businessSOlutionData[0].OverallTcv:'0.00'}}</span>
                </div>
              </div>

            </div>
          </mat-expansion-panel>
        </div>
        <!-- business solution panel ends here -->

        <!-- service lines panel starts here -->
        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt20 normal_table mb0 no_pad mobile-no_pad">
          <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left pad-26 service-tab padt0">
            <mat-expansion-panel hideToggle="true" [expanded]="panelOpenState3" class="no_pad"
              (opened)="panelOpenState3 = true" (closed)="panelOpenState3 = false">
              <mat-expansion-panel-header class="min_height60">
                <div class="min_height60 col-12 no_pad">
                  <div class="accord-heading col-12">
                    
                    <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 float-left no_pad"> 
                      <span
                      [ngClass]="panelOpenState3 ? 'mdi mdi-chevron-down chevron-right float-left':'mdi mdi-chevron-up chevron-right float-left'"></span>
                      <span class="accordian-title cardsHead col-6 no_pad">
                        Service lines</span></div>
                    <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 float-right no_pad mobpad15 bot10 mobile-button-width"
                      *ngIf="!disableOnRoleBSSL && !WTFlag && !disableonApproverDate">
                      <button aria-label="Add service line" type="button" (click)="addNewSL();$event.stopPropagation()"
                        class="primary-button h-40 std save-responsive-btn float-right pad_10"
                        [disabled]="disableOnRoleBSSL || WTFlag || disableonApproverDate">+ Add
                        service line</button>
                    </div>
                    <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 float-right no_pad mobpad15 float-right no_pad bot10 mobile-button-width"
                      *ngIf="!disableOnRoleBSSL && WTFlag && !disableonApproverDate && showDualCreditButton">
                      <button aria-label="Add dual credit" type="button" (click)="addNewDualCreditSL();$event.stopPropagation()"
                        class="primary-button h-40 std save-responsive-btn float-right pad_10">+ Add
                        dual credit</button>
                    </div>
                  </div>
                </div>
              </mat-expansion-panel-header>

              <!-- expansion data starts here -->
              <div class="col-12 no_pad float-left btop_withoutpadding">
                <!-- Table starts here -->
                <!-- <perfect-scrollbar style="max-height:250px" class="z-ind-9"> -->
                <div id="order-servicetable" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                  [ngClass]="!service.Summary_window ? '' : 'table-responsive'">
                  <table class="table table-borderless padd-btm0">
                    <thead>
                      <tr>
                        <th matTooltip="Service line*">Service line*</th>
                        <th matTooltip="Practice">Practice</th>
                        <th matTooltip="Sub practice">Sub practice</th>
                        <th [matTooltip]="WTFlag ? 'SL BDM' : 'SL BDM*'">{{WTFlag ? 'SL BDM' : 'SL BDM*'}}</th>
                        <th matTooltip="% of TCV*">% of TCV*</th>
                        <th matTooltip="Est. SL TCV*">Est. SL TCV*</th>
                        <th matTooltip="Cloud">Cloud</th>
                        <th matTooltip="Pricing type">Pricing type*</th>
                        <th class="no-wrap" [matTooltip]="WTFlag ? 'Engagement model' : 'Engagement model*'">
                          {{WTFlag ? 'Engagement model' : 'Engagement model*'}}</th>
                        <th matTooltip="Dual credit">Dual credit</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody>
                      <!-- <tr [ngClass]="data.errortext?'td-mb':''" *ngFor="let BSSLdata of BSSLDetails"> -->
                      <tr *ngFor="let BSSLdata of BSSLDetails;let p=index">
                        <td class="display-none"></td>
                        <td [attr.data-label]="'Service line*'">
                          <!-- Select DROPDOWN STARTS -->
                          <div class="customized-select mobile-select-box" [ngClass]="{'disabled-control' : disableOnRoleBSSL || (WTFlag && !BSSLdata.addedByDualCreditbtn) || disableonApproverDate}">
                        <span class="caret color-azure"></span>
                        <select role="listbox" [name]="BSSLdata.SLSLName"
                        [title]="BSSLdata.BSServiceLine.WiproServicelineidValueName"
                        [ngClass]="{'orangeborder':!BSSLdata.BSServiceLine.WiproServicelineidValue}"
                        [(ngModel)]="BSSLdata.BSServiceLine.WiproServicelineidValue"
                        (change)="getBSSLPracticeData(BSSLdata.BSServiceLine,p)"
                        [disabled]="disableOnRoleBSSL || (WTFlag && !BSSLdata.addedByDualCreditbtn) || disableonApproverDate">
                          <option hidden disabled value="">Select</option>
                          <option *ngFor="let SLData of IpandServiceLinelDD"
                          [hidden]="disableBSServiceLine(BSSLdata,SLData)== true"
                          [disabled]= "disableBSServiceLine(BSSLdata,SLData)== true"
                          [value]="SLData.SysGuid">
                          {{SLData.Name}}</option>
                        </select>
                      </div>

                          <!-- updated mat select starts here -->
                          <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad web-select-box">
                            <mat-form-field class="col-12 no_pad float-left inputfixed-width">
                              <mat-select disableOptionCentering panelClass="Select-panel-class"
                                class="select-focus mat-select {{service.getSelectedClass(BSSLdata.BSServiceLine.WiproServicelineidValue)}}"
                                role="listbox" [name]="BSSLdata.SLSLName"
                                [title]="BSSLdata.BSServiceLine.WiproServicelineidValueName"
                                [ngClass]="{'width95' : service.Summary_window ,'orangeborder':!BSSLdata.BSServiceLine.WiproServicelineidValue}"
                                [(ngModel)]="BSSLdata.BSServiceLine.WiproServicelineidValue"
                                (selectionChange)="getBSSLPracticeData(BSSLdata.BSServiceLine,p)"
                                [disabled]="disableOnRoleBSSL || (WTFlag && !BSSLdata.addedByDualCreditbtn) || disableonApproverDate">
                                <mat-option hidden disabled value="">Select</mat-option>
                                <mat-option *ngFor="let SLData of IpandServiceLinelDD"
                                  [hidden]="disableBSServiceLine(BSSLdata,SLData)== true"
                                  [disabled]= "disableBSServiceLine(BSSLdata,SLData)== true"
                                  [value]="SLData.SysGuid">
                                  {{SLData.Name}}</mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <!-- updated mat select ends here -->
                          <!-- Select DROPDOWN STARTS -->
                          <!-- <p *ngIf="data.errortext" class="col-6 no_pad float-left validation-text">* Cloud details are mandatory for this combination of service line/ practice/ sub-practice.</p> -->
                        </td>
                        <td [attr.data-label]="'Practice'">
                          <!-- Select DROPDOWN STARTS -->
                          <div class="customized-select mobile-select-box" [ngClass]="{'disabled-control' : !BSSLdata.BSServiceLine.WiproServicelineidValue || disableOnRoleBSSL || disableonApproverDate || (BSSLdata.BSServiceLine.WiproServicelineidValue && checkActivePractice(BSSLdata.SlpracticeDD) == 0) || (WTFlag && !BSSLdata.addedByDualCreditbtn)}">
                        <span class="caret color-azure"></span>
                        <select role="listbox" [name]="BSSLdata.SLPracticeName"
                        [title]="BSSLdata.BSServiceLine.WiproPracticeName"
                        [ngClass]="{'orangeborder':(!BSSLdata.BSServiceLine.WiproPracticeId && checkActivePractice(BSSLdata.SlpracticeDD)>0)}"
                        [(ngModel)]="BSSLdata.BSServiceLine.WiproPracticeId"
                        (change)="getBSSLSubPracticeData(BSSLdata.BSServiceLine,p)"
                        [disabled]="!BSSLdata.BSServiceLine.WiproServicelineidValue || disableOnRoleBSSL || disableonApproverDate || (BSSLdata.BSServiceLine.WiproServicelineidValue && checkActivePractice(BSSLdata.SlpracticeDD) == 0) || (WTFlag && !BSSLdata.addedByDualCreditbtn)">
                          <option hidden disabled value="">Select</option>
                          <option *ngFor="let practiceData of BSSLdata.SlpracticeDD"
                          [hidden]="practiceData.Name == ACS || !practiceData.IsVisible"
                          [disabled]="practiceData.Name == ACS || !practiceData.IsVisible"
                          [value]="practiceData.SysGuid">
                            {{practiceData.Name}}</option>
                        </select>
                      </div>

                          <!-- updated mat select starts here -->
                          <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad web-select-box">
                            <mat-form-field class="col-12 no_pad float-left inputfixed-width">
                              <mat-select disableOptionCentering panelClass="Select-panel-class"
                                class="select-focus mat-select {{service.getSelectedClass(BSSLdata.BSServiceLine.WiproPracticeId)}}"
                                role="listbox" [name]="BSSLdata.SLPracticeName"
                                [title]="BSSLdata.BSServiceLine.WiproPracticeName"
                                [ngClass]="{'width95' : service.Summary_window ,'orangeborder':(!BSSLdata.BSServiceLine.WiproPracticeId && checkActivePractice(BSSLdata.SlpracticeDD)>0)}"
                                [(ngModel)]="BSSLdata.BSServiceLine.WiproPracticeId"
                                (selectionChange)="getBSSLSubPracticeData(BSSLdata.BSServiceLine,p)"
                                [disabled]="!BSSLdata.BSServiceLine.WiproServicelineidValue || disableOnRoleBSSL || disableonApproverDate || (BSSLdata.BSServiceLine.WiproServicelineidValue && checkActivePractice(BSSLdata.SlpracticeDD) == 0) || (WTFlag && !BSSLdata.addedByDualCreditbtn)">
                                <mat-option hidden disabled value="">Select</mat-option>
                                <mat-option *ngFor="let practiceData of BSSLdata.SlpracticeDD"
                                [hidden]="practiceData.Name == ACS || !practiceData.IsVisible"
                                [disabled]="practiceData.Name == ACS || !practiceData.IsVisible"
                                [value]="practiceData.SysGuid">
                                  {{practiceData.Name}}</mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <!-- updated mat select ends here -->
                          <!-- Select DROPDOWN STARTS -->
                        </td>
                        <td [attr.data-label]="'Sub practice'">
                          <!-- Select DROPDOWN STARTS -->
                          <div class="customized-select mobile-select-box" [ngClass]="{'disabled-control' : !BSSLdata.BSServiceLine.WiproServicelineidValue || !BSSLdata.BSServiceLine.WiproPracticeId || disableOnRoleBSSL || disableonApproverDate || (BSSLdata.BSServiceLine.WiproPracticeId && checkActiveSubPractice(BSSLdata.SlSubpracticeDD) == 0) || (WTFlag && !BSSLdata.addedByDualCreditbtn)}">
                        <span class="caret color-azure"></span >

                        <select role="listbox" [name]="BSSLdata.SLSubPracticeName"
                        [title]="BSSLdata.BSServiceLine.WiproSubpracticeName"
                        [ngClass]="{'orangeborder':(!BSSLdata.BSServiceLine.WiproSubpracticeid && checkActiveSubPractice(BSSLdata.SlSubpracticeDD)>0)}"
                        [(ngModel)]="BSSLdata.BSServiceLine.WiproSubpracticeid"
                        (change)="duplicateSubPracticeCheck(BSSLdata.BSServiceLine,p)"
                        [disabled]="!BSSLdata.BSServiceLine.WiproServicelineidValue || !BSSLdata.BSServiceLine.WiproPracticeId || disableOnRoleBSSL || disableonApproverDate || (BSSLdata.BSServiceLine.WiproPracticeId && checkActiveSubPractice(BSSLdata.SlSubpracticeDD) == 0) || (WTFlag && !BSSLdata.addedByDualCreditbtn)">
                          <option hidden disabled value="">Select</option>
                          <option *ngFor="let subPracticeData of BSSLdata.SlSubpracticeDD"
                          [hidden]="!subPracticeData.IsVisible"
                          [disabled]="!subPracticeData.IsVisible"
                          [value]="subPracticeData.SubPracticeId">
                          {{subPracticeData.Name}}</option>
                        </select>
                      </div>

                          <!-- updated mat select starts here -->
                          <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad web-select-box">
                            <mat-form-field class="col-12 no_pad float-left inputfixed-width">
                              <mat-select disableOptionCentering panelClass="Select-panel-class"
                                class="select-focus mat-select {{service.getSelectedClass(BSSLdata.BSServiceLine.WiproSubpracticeid)}}"
                                role="listbox" [name]="BSSLdata.SLSubPracticeName"
                                [title]="BSSLdata.BSServiceLine.WiproSubpracticeName"
                                [ngClass]="{'width95' : service.Summary_window ,'orangeborder':(!BSSLdata.BSServiceLine.WiproSubpracticeid && checkActiveSubPractice(BSSLdata.SlSubpracticeDD)>0)}"
                                [(ngModel)]="BSSLdata.BSServiceLine.WiproSubpracticeid"
                                (selectionChange)="duplicateSubPracticeCheck(BSSLdata.BSServiceLine,p)"
                                [disabled]="!BSSLdata.BSServiceLine.WiproServicelineidValue || !BSSLdata.BSServiceLine.WiproPracticeId || disableOnRoleBSSL || disableonApproverDate || (BSSLdata.BSServiceLine.WiproPracticeId && checkActiveSubPractice(BSSLdata.SlSubpracticeDD) == 0) || (WTFlag && !BSSLdata.addedByDualCreditbtn)">
                                <mat-option hidden disabled value="">Select</mat-option>
                                <mat-option *ngFor="let subPracticeData of BSSLdata.SlSubpracticeDD"
                                [hidden]="!subPracticeData.IsVisible"
                                [disabled]="!subPracticeData.IsVisible"
                                  [value]="subPracticeData.SubPracticeId">
                                  {{subPracticeData.Name}}</mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <!-- updated mat select ends here -->
                          <!-- Select DROPDOWN STARTS -->
                        </td>
                        <td class="no_pad" [attr.data-label]="WTFlag ? 'SL BDM' : 'SL BDM*'">
                          <!-- SL BDM autocomplete starts here-->
                          <div
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left customized-input cust_autoComplete pos-rel no_pad">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">

                              <input
                                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left ellipses h-40 label-input sl-bdm-padd inputfixed-width"
                                [name]="BSSLdata.SLSLBDMName" autocomplete="off" type="text"
                                [ngClass]="{'width95' : service.Summary_window ,'orangeborder':(!BSSLdata.BSServiceLine.WiproSlbdmidValueName && !WTFlag && orderOverviewObj.OrderTypeId != 184450006)}"
                                [(ngModel)]="BSSLdata.BSServiceLine.WiproSlbdmidValueName"
                                (ngModelChange)="OnChangegetBSSLSlBDMData(BSSLdata.BSServiceLine,p,BSSLdata.BSServiceLine.WiproSlbdmidValueName)"
                                placeholder="Search"
                                (click)="BSSLdata.SLSLBDMSwitchName = true;OnChangegetBSSLSlBDMData(BSSLdata.BSServiceLine,p,BSSLdata.BSServiceLine.WiproSlbdmidValueName)"
                                [title]="BSSLdata.BSServiceLine.WiproSlbdmidValueName"
                                (blur)="BSSLbdmNameclose(BSSLdata.BSServiceLine,p,$event)"
                                [disabled]="!BSSLdata.BSServiceLine.WiproServicelineidValue || (!BSSLdata.BSServiceLine.WiproPracticeId && BSSLdata.SlpracticeDD.length > 0) || disableOnRoleBSSL">
                              <span class="mdi mdi-magnify"></span>
                              <div
                                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm border float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                                *ngIf="BSSLdata.SLSLBDMSwitchName">
                                <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                                  <ul tabindex="0" class=" list-group sort-dropdown">
                                    <li class="list-group-item no_pad "
                                      (keypress)="changeBSSLBDMData(item,BSSLdata.BSServiceLine,p)"
                                      (click)="changeBSSLBDMData(item,BSSLdata.BSServiceLine,p)"
                                      *ngFor="let item of BSSLdata.SlSLBDMDD">
                                      <label for="inti_name" class="float-left name mb-0">
                                        <span class="d-block list-name">{{item.Name}}</span>
                                        <!-- <span class="d-block sub-list">{{item.subtitle}}</span> -->
                                      </label>
                                    </li>
                                    <li class="d-block list-name no_pad" *ngIf="(BSSLdata.SlSLBDMDD).length == 0">
                                      No record found </li>
                                    <span class="db-search"
                                      (click)="openadvancetabsSearch(BSSLdata.BSServiceLine,'BSSLSLBDM',BSSLdata.SlSLBDMDD,BSSLdata.selectedSLBDM,BSSLdata.BSServiceLine.WiproSlbdmidValueName,p)">
                                      <button id="advanceBSSLSLBDMSearch{{p}}" role="option" tabindex="0"
                                        aria-disabled="false" aria-label="Advance look up" type="button" class="button-search">
                                        <span class="mdi mdi-file-outline"></span> Advance look up
                                      </button>
                                    </span>
                                  </ul>
                                </perfect-scrollbar>
                              </div>
                            </div>
                          </div>

                        </td>
                        <td class="" [attr.data-label]="'% of TCV*'">
                          <div class="customized-input">
                            <!-- <label for="field1" class=""> </label> -->
                            <input id="field1" type="text" class="border-gray w-100 inputfixed-width"
                              [name]="BSSLdata.PercTCVName"
                              [ngClass]="{'width95' : service.Summary_window ,'orangeborder':(!BSSLdata.BSServiceLine.WiproPercentageOftcv && !BSSLdata.BSServiceLine.WiproDualCredit && businessSOlutionData[0].TCVCalculation)}"
                              [(ngModel)]="BSSLdata.BSServiceLine.WiproPercentageOftcv"
                              #slperc [decimalnumbersOnly]="acceptNegative" [oldValue]="slperc.value"
                               onpaste="return false;" ondrop="return false;" 
                               (blur)="OnBSPercTCVBlur(BSSLdata.BSServiceLine,slperc.value,p)"
                              placeholder="00.00"
                              [disabled]="(!businessSOlutionData[0].TCVCalculation) || (BSSLdata.BSServiceLine.WiproDualCredit != '') || disableOnRoleBSSL || (WTFlag && !BSSLdata.addedByDualCreditbtn) || disableonApproverDate">
                          </div>
                        </td>
                        <td class="" [attr.data-label]="'Est. SL TCV*'">
                          <div class="customized-input">
                            <!-- <label for="field1" class=""> </label> -->
                            <input id="field1" type="text" class="border-gray w-100 inputfixed-width"
                              [name]="BSSLdata.SLTCVName"
                              [ngClass]="{'width95' : service.Summary_window ,'orangeborder':((!BSSLdata.BSServiceLine.WiproEstsltcv && !businessSOlutionData[0].TCVCalculation) || (!BSSLdata.BSServiceLine.WiproEstsltcv && businessSOlutionData[0].TCVCalculation && BSSLdata.BSServiceLine.WiproDualCredit))}"
                              [(ngModel)]="BSSLdata.BSServiceLine.WiproEstsltcv"
                              #slsltcv [decimalnumbersOnly]="acceptNegative" [oldValue]="slsltcv.value" 
                              onpaste="return false;"
                              ondrop="return false;" (blur)="OnBSSLTCVBlur(BSSLdata.BSServiceLine,slsltcv.value,p)"
                              placeholder="00.00"
                              [disabled]="((businessSOlutionData[0].TCVCalculation) && (BSSLdata.BSServiceLine.WiproDualCredit == '')) || disableOnRoleBSSL || (WTFlag && !BSSLdata.addedByDualCreditbtn) || disableonApproverDate">
                          </div>
                        </td>
                        <td class="customized-checkbox check-middle vertical-middle checkbox-center" [attr.data-label]="'Cloud'">
                          <mat-checkbox aria-label="select" [name]="BSSLdata.SLCloudName"
                            [ngClass]="{'width95' : service.Summary_window ,'orangeborder checkbox-orange':(!BSSLdata.BSServiceLine.Cloud && BSSLdata.cloudFlag && !disableOnRoleBSSL && !BSSLdata.CloudDisabled)}"
                            [(ngModel)]="BSSLdata.BSServiceLine.Cloud"
                            [disabled]="BSSLdata.CloudDisabled || disableOnRoleBSSL"
                            (click)="checkForBSSLCloud(BSSLdata.BSServiceLine,p,BSSLdata.CloudDisabled)">
                          </mat-checkbox>
                        </td>

                        <td class="" [attr.data-label]="'Pricing type*'">
                          <!-- Pricing type autocomplete starts here-->
                          <div
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left customized-input cust_autoComplete pos-rel no_pad">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">

                              <input
                                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left ellipses h-40 label-input sl-bdm-padd inputfixed-width-pt"
                                [name]="BSSLdata.SLPricingTypeName" autocomplete="off" type="text"
                                [ngClass]="{'width95' : service.Summary_window ,'orangeborder':(!BSSLdata.BSServiceLine.PricingTypeName)}"
                                [(ngModel)]="BSSLdata.BSServiceLine.PricingTypeName"
                                (ngModelChange)="OnChangegetBSSLPricingTypeData(BSSLdata.BSServiceLine,p,BSSLdata.BSServiceLine.PricingTypeName)"
                                placeholder="Search"
                                (click)="BSSLdata.SLPricingTypeSwitchName = true;OnChangegetBSSLPricingTypeData(BSSLdata.BSServiceLine,p,BSSLdata.BSServiceLine.PricingTypeName)"
                                [title]="BSSLdata.BSServiceLine.PricingTypeName"
                                (blur)="BSSLPricingTypeNameclose(BSSLdata.BSServiceLine,p,$event)"
                                [disabled]="disableOnRoleBSSL || (WTFlag && !BSSLdata.addedByDualCreditbtn) || disableonApproverDate">
                              <span class="mdi mdi-magnify"></span>
                              <div
                                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm border float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                                *ngIf="BSSLdata.SLPricingTypeSwitchName">
                                <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                                  <ul tabindex="0" class=" list-group sort-dropdown">
                                    <li class="list-group-item no_pad "
                                      (keypress)="changeBSSLPricingTypeData(item,BSSLdata.BSServiceLine,p)"
                                      (click)="changeBSSLPricingTypeData(item,BSSLdata.BSServiceLine,p)"
                                      *ngFor="let item of BSSLdata.SlPricingTypeDD">
                                      <label for="inti_name" class="float-left name mb-0">
                                        <span class="d-block list-name">{{item.Name}}</span>
                                        <!-- <span class="d-block sub-list">{{item.subtitle}}</span> -->
                                      </label>
                                    </li>
                                    <li class="d-block list-name no_pad" *ngIf="(BSSLdata.SlPricingTypeDD).length == 0">
                                      No record found </li>
                                    <span class="db-search"
                                      (click)="openadvancetabsSearch(BSSLdata.BSServiceLine,'BSSLPricingType',BSSLdata.SlPricingTypeDD,BSSLdata.selectedSLPricingType,BSSLdata.BSServiceLine.PricingTypeName,p)">
                                      <button id="advanceBSSLPricingTypeSearch{{p}}" role="option" tabindex="0"
                                        aria-disabled="false" aria-label="Advance look up" type="button" class="button-search">
                                        <span class="mdi mdi-file-outline"></span> Advance look up
                                      </button>
                                    </span>
                                  </ul>
                                </perfect-scrollbar>
                              </div>
                            </div>
                          </div>   
                          <!-- Pricing type autocomplete ends here-->

                          <!-- Select Pricing type dropdown  STARTS -->
                            <!-- <div class="customized-select mobile-select-box"
                              [ngClass]="{'disabled-control': disableOnRoleBSSL || (WTFlag && !BSSLdata.addedByDualCreditbtn) || disableonApproverDate}">
                              <span class="caret color-azure"></span>
                              <select id="BSSLdata.SLPricingTypeName" role="listbox" [name]="BSSLdata.SLPricingTypeName"
                              [ngClass]="{'orangeborder': !BSSLdata.BSServiceLine.PricingTypeId}"
                                [(ngModel)]="BSSLdata.BSServiceLine.PricingTypeId"
                                [disabled]="disableOnRoleBSSL || (WTFlag && !BSSLdata.addedByDualCreditbtn) || disableonApproverDate"
                                (change)="setpricingTypeSL(BSSLdata.BSServiceLine,p)" required>
                                <option hidden value="">Select</option>
                                <option *ngFor="let pricingType of pricingTypes" [hidden]="!IsIndiaSBU && pricingType.Id == 184450005" [disabled]= "!IsIndiaSBU && pricingType.Id == 184450005"
                                  [value]="pricingType.Id">{{pricingType.Name}}</option>
                              </select>
                            </div>
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad web-select-box ">
                              <mat-form-field class="col-12 no_pad float-left inputfixed-width-pt">
                                <mat-select  panelClass="Select-panel-class" class="select-focus mat-select" id="BSSLdata.SLPricingTypeName" role="listbox" [name]="BSSLdata.SLPricingTypeName" disableOptionCentering
                                [ngClass]="{'orangeborder': !BSSLdata.BSServiceLine.PricingTypeId}"
                                [(ngModel)]="BSSLdata.BSServiceLine.PricingTypeId"
                                [disabled]="disableOnRoleBSSL || (WTFlag && !BSSLdata.addedByDualCreditbtn) || disableonApproverDate"
                                (selectionChange)="setpricingTypeSL(BSSLdata.BSServiceLine,p)" required>
                                  <mat-option hidden value="">Select</mat-option>
                                  <mat-option *ngFor="let pricingType of pricingTypes" [hidden]="!IsIndiaSBU && pricingType.Id == 184450005" [disabled]= "!IsIndiaSBU && pricingType.Id == 184450005"
                                  [value]="pricingType.Id">{{pricingType.Name}}</mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div> -->
                            <!-- <p class="col-12 no_pad float-left validation-text" *ngIf="orderOverviewValidationValue.PricingTypeId">
                              Pricing type is mandatory.</p> -->
                          
                          <!-- Select Pricing type dropdown  ends here -->                          
                        </td>

                        <td [attr.data-label]="'Engagement model*'">
                          <!-- Select DROPDOWN STARTS -->
                          <div class="customized-select mobile-select-box" [ngClass]="{'disabled-control' : !BSSLdata.BSServiceLine.WiproServicelineidValue || disableOnRoleBSSL}">
                        <span class="caret color-azure"></span>
                        <select role="listbox" [name]="BSSLdata.SLEngagementName"
                        [title]="BSSLdata.BSServiceLine.WiproEngagementModelName"
                        [ngClass]="{'orangeborder':(!BSSLdata.BSServiceLine.WiproEngagementModel && !WTFlag && orderOverviewObj.OrderTypeId != 184450006)}"
                        [(ngModel)]="BSSLdata.BSServiceLine.WiproEngagementModel"
                        (change)="setEngagementModelName(BSSLdata.BSServiceLine,p)"
                        [disabled]="!BSSLdata.BSServiceLine.WiproServicelineidValue || disableOnRoleBSSL">
                          <option value="">Select</option>
                          <option *ngFor="let engage of BSSLdata.EngagementModelDD" [value]="engage.Id">
                            {{engage.Name}}
                        </select>
                      </div>

                          <!-- updated mat select starts here -->
                          <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad web-select-box">
                            <mat-form-field class="col-12 no_pad float-left inputfixed-width w-129">
                              <mat-select disableOptionCentering panelClass="Select-panel-class"
                                class="select-focus mat-select {{service.getSelectedClass(BSSLdata.BSServiceLine.WiproEngagementModel)}}"
                                role="listbox" [name]="BSSLdata.SLEngagementName"
                                [title]="BSSLdata.BSServiceLine.WiproEngagementModelName"
                                [ngClass]="{'width95' : service.Summary_window ,'orangeborder':(!BSSLdata.BSServiceLine.WiproEngagementModel && !WTFlag && orderOverviewObj.OrderTypeId != 184450006)}"
                                [(ngModel)]="BSSLdata.BSServiceLine.WiproEngagementModel"
                                (selectionChange)="setEngagementModelName(BSSLdata.BSServiceLine,p)"
                                [disabled]="!BSSLdata.BSServiceLine.WiproServicelineidValue || disableOnRoleBSSL">
                                <mat-option value="">Select</mat-option>
                                <mat-option *ngFor="let engage of BSSLdata.EngagementModelDD" [value]="engage.Id">
                                  {{engage.Name}}</mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <!-- updated mat select ends here -->
                          <!-- Select DROPDOWN STARTS -->
                        </td>
                        <td [attr.data-label]="'Dual credit'">
                          <!-- Select DROPDOWN STARTS -->
                          <div class="customized-select mobile-select-box" [ngClass]="{'disabled-control' : (BSSLdata.BSServiceLine.WiproServicelineidValueName != CIS && BSSLdata.BSServiceLine.WiproServicelineidValueName != CRS) || disableOnRoleBSSL || WTFlag || disableonApproverDate}">
                        <span class="caret color-azure"></span>
                        <select role="listbox"  [name]="BSSLdata.SLDualCreditName"
                        [title]="BSSLdata.BSServiceLine.WiproDualCreditName"
                        [(ngModel)]="BSSLdata.BSServiceLine.WiproDualCredit"
                        (change)="TCVChangeonDulaCredit(BSSLdata.BSServiceLine,p)"
                        [disabled]="(BSSLdata.BSServiceLine.WiproServicelineidValueName != CIS && BSSLdata.BSServiceLine.WiproServicelineidValueName != CRS) || disableOnRoleBSSL || WTFlag || disableonApproverDate">
                          <option value="">Select</option>
                          <option *ngFor="let dualCredit of BSDualCreditDD" [hidden]="!dualCredit.IsVisible" [disabled]="!dualCredit.IsVisible"
                          [value]="dualCredit.Id">{{dualCredit.Name}}</option>
                        </select>
                      </div>
                          <!-- updated mat select starts here -->
                          <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad web-select-box">
                            <mat-form-field class="col-12 no_pad float-left inputfixed-width">
                              <mat-select disableOptionCentering panelClass="Select-panel-class"
                                class="select-focus mat-select {{service.getSelectedClass(BSSLdata.BSServiceLine.WiproDualCredit)}}"
                                role="listbox" [name]="BSSLdata.SLDualCreditName"
                                [title]="BSSLdata.BSServiceLine.WiproDualCreditName"
                                [ngClass]="{'width95' : service.Summary_window}"
                                [(ngModel)]="BSSLdata.BSServiceLine.WiproDualCredit"
                                (selectionChange)="TCVChangeonDulaCredit(BSSLdata.BSServiceLine,p)"
                                [disabled]="(BSSLdata.BSServiceLine.WiproServicelineidValueName != CIS && BSSLdata.BSServiceLine.WiproServicelineidValueName != CRS) || disableOnRoleBSSL || WTFlag || disableonApproverDate">
                                <mat-option value="">Select</mat-option>
                                <mat-option *ngFor="let dualCredit of BSDualCreditDD" [hidden]="!dualCredit.IsVisible" [disabled]="!dualCredit.IsVisible"
                                  [value]="dualCredit.Id">{{dualCredit.Name}}</mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <!-- updated mat select ends here -->

                          <!-- Select DROPDOWN STARTS -->
                        </td>
                        <td class="no_pad display_flex mobile-align">
                          <button type="button" class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn"
                            aria-label="View" matTooltip="View"
                            (click)="navigatetoBSSLCloud(BSSLdata.BSServiceLine,p,BSSLdata.CloudDisabled)">
                            <span class="col-xs-12 nopad blue_circle_replay_img mdi  mdi-dots-horizontal"></span>
                          </button>
                          <button type="button" class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn"
                            *ngIf="!disableOnRoleBSSL && (!WTFlag || (WTFlag && BSSLdata.addedByDualCreditbtn)) && !disableonApproverDate"
                            aria-label="Delete" matTooltip="Delete"
                            (click)="deletBSSLValidation(BSSLdata.BSServiceLine,'serviceline',p)">
                            <span class="col-xs-12 nopad blue_circle_replay_img mdi  mdi-delete"></span>
                          </button>
                          <!-- (click)="openserviceline()" -->
                          <!-- <button class="btn-none float-right more-btn-mobile mr10 cp" role="button" title="more"
                        aria-label="more" tabindex="0" routerLink="/opportunity/servicelineadditionaldetails">
                        <span class="morepop mdi mdi-dots-vertical expand-btn"></span>
                      </button> -->
                        </td>
                        <!-- <td *ngIf="data.errortext" class="col-6 no_pad float-left validation-text">* Cloud details are mandatory for this combination of service line/ practice/ sub-practice.</td> -->
                      </tr>

                      <tr class="nodata_tr" *ngIf="BSSLDetails.length==0">
                        <td class="nodata_td" colSpan="12"> No records found </td>
                      </tr>
                      <!-- <tr  *ngIf="BSSLDetails.length==0">
                    </tr> -->

                    </tbody>
                  </table>
                </div>
                <!-- </perfect-scrollbar> -->
                <!-- Table ends here -->
              </div>
            </mat-expansion-panel>

          </div>
          <!-- service lines panel ends here -->
        </div>
        <!-- service lines panel ends here -->

        <!-- IP panel starts here -->
        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left normal_table mb0 no_pad">
          <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left pad-26 pad_t0 ip-tab">
            <mat-expansion-panel hideToggle="true" [expanded]="panelOpenState4" class="no_pad"
              (opened)="panelOpenState4 = true" (closed)="panelOpenState4 = false">
              <mat-expansion-panel-header class="min_height60">
                <div class="min_height60 col-12 no_pad">
                  <div class="accord-heading col-12">
                    
                    <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 float-left no_pad ">
                      <span
                      [ngClass]="panelOpenState4 ? 'mdi mdi-chevron-down chevron-right float-left':'mdi mdi-chevron-up chevron-right float-left'"></span>
                       <span
                        class="accordian-title cardsHead col-6 no_pad">

                        IP</span></div>
                    <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 float-right no_pad mobpad15 bot10 mobile-button-width"
                      *ngIf="!disableOnRoleBSIp && !WTFlag && !disableonApproverDate">
                      <button aria-label="Add IP" type="button" (click)="addNewIP();$event.stopPropagation()"
                        class="primary-button h-40 std save-responsive-btn float-right pad_10"
                        [disabled]="disableOnRoleBSIp || WTFlag || disableonApproverDate">+ Add
                        IP</button>
                    </div>
                  </div>
                </div>
              </mat-expansion-panel-header>

              <div class="col-12 no_pad float-left btop_withoutpadding">
                <!-- <perfect-scrollbar style="max-height:250px" class="z-ind-9"> -->
                <!-- Table starts here -->
                <div id="order-iptable" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                  [ngClass]="!service.Summary_window ? '' : 'table-responsive'">
                  <table class="table table-borderless">
                    <thead>
                      <tr>
                        <th>IP*</th>
                        <th>Module*</th>
                        <th>Service line</th>
                        <th>Practice</th>
                        <th>SL BDM</th>
                        <th>Pricing type*</th>
                        <th class="no-wrap">License value*</th>
                        <th>AMC value*</th>
                        <th>Cloud</th>
                        <th>Holmes BDM</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody>

                      <tr *ngFor="let Ipdata of IpDetails;let q=index">
                        <td class="display-none"></td>
                        <td class="no_pad" [attr.data-label]="'IP*'">
                          <!-- IP autocomplete starts here-->
                          <div
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left customized-input cust_autoComplete pos-rel no_pad">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                              <!-- <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="ContractingName"
                    class="label-form">Contracting country*</label>  -->
                              <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left h-40 label-input"
                                [name]="Ipdata.IpNmName" [title]="Ipdata.IP.IpName" autocomplete="off" type="text"
                                [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!Ipdata.IP.IpName)}"
                                [(ngModel)]="Ipdata.IP.IpName" placeholder="Search"
                                (ngModelChange)="getIpNameData(Ipdata.IP,Ipdata.IP.IpName,q)"
                                (click)="Ipdata.IpNameSwitch = true;getIpNameData(Ipdata.IP,Ipdata.IP.IpName,q)"
                                (blur)="IpNameclose(Ipdata.IP,q,$event)"
                                [disabled]="disableOnRoleBSIp || WTFlag || disableonApproverDate">
                              <span class="mdi mdi-magnify"></span>
                              <div
                                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm border float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                                *ngIf="Ipdata.IpNameSwitch">
                                <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                                  <ul tabindex="0" class=" list-group sort-dropdown">
                                    <li id="Asd1" class="list-group-item no_pad "
                                      (keypress)="changeIpNameData(item,Ipdata.IP,q)"
                                      (click)="changeIpNameData(item,Ipdata.IP,q)" *ngFor="let item of Ipdata.IpNameDD">
                                      <label for="inti_name" class="float-left name mb-0">
                                        <span class="d-block list-name">{{item.name}}</span>
                                        <!-- <span class="d-block sub-list">{{item.subtitle}}</span> -->
                                      </label>
                                    </li>
                                    <li class="d-block list-name no_pad" *ngIf="(Ipdata.IpNameDD).length == 0">
                                      No record found </li>
                                    <span class="db-search"
                                      (click)="openadvancetabsSearch(Ipdata.IP,'BSIPIP',Ipdata.IpNameDD,Ipdata.selectedIP,Ipdata.IP.IpName,q)">
                                      <button id="advanceIPSearch{{q}}" role="option" tabindex="0" aria-disabled="false" aria-label="Advance look up"
                                        type="button" class="button-search">
                                        <span class="mdi mdi-file-outline"></span> Advance look up
                                      </button>
                                    </span>
                                  </ul>
                                </perfect-scrollbar>
                              </div>
                            </div>
                          </div>
                          <!--IP autocomplete ends here-->

                        </td>

                        <td class="no_pad" [attr.data-label]="'Module*'">
                          <!-- module autocomplete starts here-->
                          <div
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left customized-input cust_autoComplete pos-rel no_pad">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                              <!-- <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="ContractingName"
                  class="label-form">Contracting country*</label>  -->
                              <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                                [name]="Ipdata.IpModuleName" autocomplete="off" type="text"
                                [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!Ipdata.IP.WiproModuleName && Ipdata.IP.IpName && Ipdata.IP.IpId && !Ipdata.ModuleDisabled)}"
                                [(ngModel)]="Ipdata.IP.WiproModuleName"
                                (ngModelChange)="getIpModuleData(Ipdata.IP,Ipdata.IP.WiproModuleName,q)"
                                placeholder="Search" [title]="Ipdata.IP.WiproModuleName"
                                (click)="Ipdata.IpModuleNameSwitch = true;getIpModuleData(Ipdata.IP,Ipdata.IP.WiproModuleName,q)"
                                (blur)="IpModuleclose(Ipdata.IP,q,$event)"
                                [disabled]="!Ipdata.IP.IpName || !Ipdata.IP.IpId || Ipdata.ModuleDisabled || disableOnRoleBSIp || WTFlag || disableonApproverDate">
                              <span class="mdi mdi-magnify"></span>
                              <div
                                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm border float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                                *ngIf="Ipdata.IpModuleNameSwitch">
                                <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                                  <ul tabindex="0" class=" list-group sort-dropdown">
                                    <li class="list-group-item no_pad "
                                      (keypress)="changeIpModuleData(item,Ipdata.IP,q)"
                                      (click)="changeIpModuleData(item,Ipdata.IP,q)"
                                      *ngFor="let item of Ipdata.IpModuleDD">
                                      <label for="inti_name" class="float-left name mb-0">
                                        <span class="d-block list-name">{{item.ModuleName}}</span>
                                        <!-- <span class="d-block sub-list">{{item.subtitle}}</span> -->
                                      </label>
                                    </li>
                                    <li class="d-block list-name no_pad" *ngIf="(Ipdata.IpModuleDD).length == 0">
                                      No record found </li>
                                    <span class="db-search"
                                      (click)="openadvancetabsSearch(Ipdata.IP,'BSIPModule',Ipdata.IpModuleDD,Ipdata.selectedModule,Ipdata.IP.WiproModuleName,q)">
                                      <button id="advanceIPModuleSearch{{q}}" role="option" tabindex="0"
                                        aria-disabled="false" aria-label="Advance look up" type="button" class="button-search">
                                        <span class="mdi mdi-file-outline"></span> Advance look up
                                      </button>
                                    </span>
                                  </ul>
                                </perfect-scrollbar>
                              </div>
                            </div>
                          </div>
                          <!--module autocomplete ends here-->

                        </td>
                        <td [attr.data-label]="'Service line'">
                          <!-- Select DROPDOWN STARTS -->
                          <div class="customized-select mobile-select-box"  [ngClass]="{'disabled-control' : disableOnRoleBSIp || disableonApproverDate}">
                        <span class="caret color-azure"></span>
                        <select role="listbox" [name]="Ipdata.IpSLName" [title]="Ipdata.IP.WiproServicelineName"
                        [(ngModel)]="Ipdata.IP.WiproServiceline"
                        (change)="getIpPracticeData(Ipdata.IP,q)"
                        [disabled]="disableOnRoleBSIp || disableonApproverDate">
                          <option value="">Select</option>
                          <option *ngFor="let IpSL of IpandServiceLinelDD" 
                          [hidden]="!IpSL.IsVisible" [disabled]="!IpSL.IsVisible" [value]="IpSL.SysGuid">
                            {{IpSL.Name}}</option>
                        </select>
                      </div>
                          <!-- updated mat select starts here -->
                          <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad web-select-box">
                            <mat-form-field class="col-12 no_pad float-left inputfixed-width-ip">
                              <mat-select disableOptionCentering panelClass="Select-panel-class"
                                class="select-focus mat-select {{service.getSelectedClass(Ipdata.IP.WiproServiceline)}}"
                                role="listbox" [name]="Ipdata.IpSLName" [title]="Ipdata.IP.WiproServicelineName"
                                [ngClass]="{'width125' : service.Summary_window}"
                                [(ngModel)]="Ipdata.IP.WiproServiceline"
                                (selectionChange)="getIpPracticeData(Ipdata.IP,q)"
                                [disabled]="disableOnRoleBSIp || disableonApproverDate">
                                <mat-option value="">Select</mat-option>
                                <mat-option *ngFor="let IpSL of IpandServiceLinelDD" 
                                [hidden]="!IpSL.IsVisible" [disabled]="!IpSL.IsVisible" [value]="IpSL.SysGuid">
                                  {{IpSL.Name}}</mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <!-- updated mat select ends here -->
                          <!-- Select DROPDOWN STARTS -->
                        </td>
                        <td [attr.data-label]="'Practice'">
                          <!-- Select DROPDOWN STARTS -->
                          <div class="customized-select mobile-select-box" [ngClass]="{'disabled-control' : !Ipdata.IP.WiproServiceline || disableOnRoleBSIp || (Ipdata.IP.WiproServiceline && checkActivePractice(Ipdata.IppracticeDD) == 0) || disableonApproverDate}">
                        <span class="caret color-azure"></span>
                        <select role="listbox"
                        [name]="Ipdata.IpPracticeName" [title]="Ipdata.IP.WiproPracticeName"
                        [(ngModel)]="Ipdata.IP.WiproPractice"
                        (change)="onIPPracticeChange(Ipdata.IP,q)"
                        [disabled]="!Ipdata.IP.WiproServiceline || disableOnRoleBSIp || (Ipdata.IP.WiproServiceline && checkActivePractice(Ipdata.IppracticeDD) == 0) || disableonApproverDate">
                          <option value="">Select</option>
                          <option *ngFor="let IpPractice of Ipdata.IppracticeDD" 
                          [hidden]="IpPractice.Name == ACS || !IpPractice.IsVisible"
                          [disabled]="IpPractice.Name == ACS || !IpPractice.IsVisible"
                          [value]="IpPractice.SysGuid">
                            {{IpPractice.Name}}
                          </option>
                        </select>
                      </div>

                          <!-- updated mat select starts here -->
                          <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad web-select-box">
                            <mat-form-field class="col-12 no_pad float-left inputfixed-width-ip">
                              <mat-select disableOptionCentering panelClass="Select-panel-class"
                                class="select-focus mat-select {{service.getSelectedClass(Ipdata.IP.WiproPractice)}}"
                                role="listbox" [name]="Ipdata.IpPracticeName" [title]="Ipdata.IP.WiproPracticeName"
                                [ngClass]="{'width125' : service.Summary_window}" [(ngModel)]="Ipdata.IP.WiproPractice"
                                (selectionChange)="onIPPracticeChange(Ipdata.IP,q)"
                                [disabled]="!Ipdata.IP.WiproServiceline || disableOnRoleBSIp || (Ipdata.IP.WiproServiceline && checkActivePractice(Ipdata.IppracticeDD) == 0) || disableonApproverDate">
                                <mat-option value="">Select</mat-option>
                                <mat-option *ngFor="let IpPractice of Ipdata.IppracticeDD" 
                                [hidden]="IpPractice.Name == ACS || !IpPractice.IsVisible"
                                [disabled]="IpPractice.Name == ACS || !IpPractice.IsVisible"
                                [value]="IpPractice.SysGuid">
                                  {{IpPractice.Name}}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <!-- updated mat select ends here -->
                          <!-- Select DROPDOWN STARTS -->
                        </td>
                        <td class="no_pad" [attr.data-label]="'SL BDM'">
                          <!-- slbdm2 autocomplete starts here-->
                          <div
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left customized-input cust_autoComplete pos-rel no_pad">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                              <!-- <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="ContractingName"
                  class="label-form">Contracting country*</label>  -->
                              <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                                [name]="Ipdata.IpSLBDmName" autocomplete="off" type="text"
                                [ngClass]="{'width125' : service.Summary_window}" [(ngModel)]="Ipdata.IP.WiproSlbdmName"
                                (ngModelChange)="OnChangegetBSIPSlBDMData(Ipdata.IP,q,Ipdata.IP.WiproSlbdmName)"
                                placeholder="Search" [title]="Ipdata.IP.WiproSlbdmName"
                                (click)="Ipdata.IpSLBDMNameSwitch = true;OnChangegetBSIPSlBDMData(Ipdata.IP,q,Ipdata.IP.WiproSlbdmName)"
                                (blur)="IpSlbdmclose(Ipdata.IP,q,$event)"
                                [disabled]="!Ipdata.IP.WiproServiceline || (!Ipdata.IP.WiproPractice && Ipdata.IppracticeDD.length > 0) || disableOnRoleBSIp">
                              <span class="mdi mdi-magnify"></span>
                              <div
                                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm border float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                                *ngIf="Ipdata.IpSLBDMNameSwitch">
                                <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                                  <ul tabindex="0" class=" list-group sort-dropdown">
                                    <li class="list-group-item no_pad " (keypress)="changeIpSlBDMData(item,Ipdata.IP,q)"
                                      (click)="changeIpSlBDMData(item,Ipdata.IP,q)"
                                      *ngFor="let item of Ipdata.IpslBDMDD">
                                      <label for="inti_name" class="float-left name mb-0">
                                        <span class="d-block list-name">{{item.Name}}</span>
                                        <!-- <span class="d-block sub-list">{{item.subtitle}}</span> -->
                                      </label>
                                    </li>
                                    <li class="d-block list-name no_pad" *ngIf="(Ipdata.IpslBDMDD).length == 0">
                                      No record found </li>
                                    <span class="db-search"
                                      (click)="openadvancetabsSearch(Ipdata.IP,'BSIPSLBDM',Ipdata.IpslBDMDD,Ipdata.selectedIPSLBDM,Ipdata.IP.WiproSlbdmName,q)">
                                      <button id="advanceIPSLBDMSearch{{q}}" role="option" tabindex="0"
                                        aria-disabled="false" aria-label="Advance look up" type="button" class="button-search">
                                        <span class="mdi mdi-file-outline"></span> Advance look up
                                      </button>
                                    </span>
                                  </ul>
                                </perfect-scrollbar>
                              </div>
                            </div>
                          </div>
                          <!--slbdm2 autocomplete ends here-->
                        </td>

                        <td class="" [attr.data-label]="'Pricing type*'">
                          <!-- Pricing type autocomplete starts here-->
                          <div
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left customized-input cust_autoComplete pos-rel no_pad">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                              <!-- <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="ContractingName"
                  class="label-form">Contracting country*</label>  -->
                              <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                                [name]="Ipdata.IpPricingTypeName" autocomplete="off" type="text"
                                [ngClass]="{'width125' : service.Summary_window,'orangeborder':!Ipdata.IP.PricingTypeName}" [(ngModel)]="Ipdata.IP.PricingTypeName"
                                (ngModelChange)="OnChangegetBSIPPricingTypeData(Ipdata.IP,q,Ipdata.IP.PricingTypeName)"
                                placeholder="Search" [title]="Ipdata.IP.PricingTypeName"
                                (click)="Ipdata.IPPricingTypeSwitchName = true;OnChangegetBSIPPricingTypeData(Ipdata.IP,q,Ipdata.IP.PricingTypeName)"
                                (blur)="BSIPPricingTypeNameclose(Ipdata.IP,q,$event)"
                                [disabled]="disableOnRoleBSIp || WTFlag || disableonApproverDate">
                              <span class="mdi mdi-magnify"></span>
                              <div
                                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm border float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                                *ngIf="Ipdata.IPPricingTypeSwitchName">
                                <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                                  <ul tabindex="0" class=" list-group sort-dropdown">
                                    <li class="list-group-item no_pad " (keypress)="changeBSIPPricingTypeData(item,Ipdata.IP,q)"
                                      (click)="changeBSIPPricingTypeData(item,Ipdata.IP,q)"
                                      *ngFor="let item of Ipdata.IPPricingTypeDD">
                                      <label for="inti_name" class="float-left name mb-0">
                                        <span class="d-block list-name">{{item.Name}}</span>
                                        <!-- <span class="d-block sub-list">{{item.subtitle}}</span> -->
                                      </label>
                                    </li>
                                    <li class="d-block list-name no_pad" *ngIf="(Ipdata.IPPricingTypeDD).length == 0">
                                      No record found </li>
                                    <span class="db-search"
                                      (click)="openadvancetabsSearch(Ipdata.IP,'BSIPPricingType',Ipdata.IPPricingTypeDD,Ipdata.selectedIPPricingType,Ipdata.IP.PricingTypeName,q)">
                                      <button id="advanceBSIPPricingTypeSearch{{q}}" role="option" tabindex="0"
                                        aria-disabled="false" aria-label="Advance look up" type="button" class="button-search">
                                        <span class="mdi mdi-file-outline"></span> Advance look up
                                      </button>
                                    </span>
                                  </ul>
                                </perfect-scrollbar>
                              </div>
                            </div>
                          </div>   
                          <!-- Pricing type autocomplete ends here-->

                          <!-- Select Pricing type dropdown  STARTS -->
                            <!-- <div class="customized-select mobile-select-box"
                              [ngClass]="{'disabled-control': disableOnRoleBSIp || WTFlag || disableonApproverDate}">
                              <span class="caret color-azure"></span>
                              <select id="Ipdata.IpPricingTypeName" role="listbox" [name]="Ipdata.IpPricingTypeName"
                              [ngClass]="{'orangeborder':!Ipdata.IP.PricingTypeId }"
                                [(ngModel)]="Ipdata.IP.PricingTypeId"
                                [disabled]="disableOnRoleBSIp || WTFlag || disableonApproverDate"
                                (change)="setpricingTypeIP(Ipdata.IP,q)" required>
                                <option hidden value="">Select</option>
                                <option *ngFor="let pricingType of pricingTypes" [hidden]="!IsIndiaSBU && pricingType.Id == 184450005" [disabled]= "!IsIndiaSBU && pricingType.Id == 184450005"
                                  [value]="pricingType.Id">{{pricingType.Name}}</option>
                              </select>
                            </div>
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad web-select-box ">
                              <mat-form-field class="col-12 no_pad float-left inputfixed-width-pt">
                                <mat-select  panelClass="Select-panel-class" class="select-focus mat-select" id="Ipdata.IpPricingTypeName" role="listbox" [name]="Ipdata.IpPricingTypeName" disableOptionCentering
                                [ngClass]="{'orangeborder':!Ipdata.IP.PricingTypeId }"
                                [(ngModel)]="Ipdata.IP.PricingTypeId"
                                [disabled]="disableOnRoleBSIp || WTFlag || disableonApproverDate"
                                (selectionChange)="setpricingTypeIP(Ipdata.IP,q)" required>
                                  <mat-option hidden value="">Select</mat-option>
                                  <mat-option *ngFor="let pricingType of pricingTypes" [hidden]="!IsIndiaSBU && pricingType.Id == 184450005" [disabled]= "!IsIndiaSBU && pricingType.Id == 184450005"
                                  [value]="pricingType.Id">{{pricingType.Name}}</mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div> -->
                            <!-- <p class="col-12 no_pad float-left validation-text" *ngIf="orderOverviewValidationValue.PricingTypeId">
                              Pricing type is mandatory.</p> -->
                          
                          <!-- Select Pricing type dropdown  ends here -->                          
                        </td>

                        <td [attr.data-label]="'License value*'">
                          <div class="customized-input">
                            <label for="license" class=""> </label>
                            <input id="license" type="text" class="border-gray w-100" [name]="Ipdata.IpLValueName"
                              [ngClass]="{'width125' : service.Summary_window,'orangeborder':(!Ipdata.IP.WiproLicenseValue && !Ipdata.IP.WiproAmcvalue)}"
                              [(ngModel)]="Ipdata.IP.WiproLicenseValue" 
                              #iplv [decimalnumbersOnly]="acceptNegative" [oldValue]="iplv.value"
                              (blur)="sumIpTCVLV(Ipdata.IP,iplv.value,q)"
                               onpaste="return false;"
                              ondrop="return false;" placeholder="00.00"
                              [disabled]="disableOnRoleBSIp || WTFlag || disableonApproverDate">
                          </div>
                        </td>
                        <td [attr.data-label]="'AMC value*'">
                          <div class="customized-input">
                            <label for="amc" class=""> </label>
                            <input id="amc" type="text" class="border-gray w-100" [name]="Ipdata.IpAMCValueName"
                              [ngClass]="{'width125' : service.Summary_window,'orangeborder':(!Ipdata.IP.WiproLicenseValue && !Ipdata.IP.WiproAmcvalue)}"
                              [(ngModel)]="Ipdata.IP.WiproAmcvalue" 
                              #ipamc [decimalnumbersOnly]="acceptNegative" [oldValue]="ipamc.value"
                              (blur)="sumIpTCVAMC(Ipdata.IP,ipamc.value,q)"
                              placeholder="00.00" onpaste="return false;"
                              ondrop="return false;" [disabled]="disableOnRoleBSIp || WTFlag || disableonApproverDate">
                          </div>
                        </td>
                        <td class="customized-checkbox vertical-middle checkbox-center" [attr.data-label]="'Cloud'">
                          <mat-checkbox aria-label="select" [name]="Ipdata.IpCloudName"
                            [(ngModel)]="Ipdata.IP.WiproCloud" [disabled]="Ipdata.CloudDisabled || disableOnRoleBSIp"
                            (click)="checkForCloud(Ipdata.IP,q,Ipdata.CloudDisabled)">
                          </mat-checkbox>
                        </td>
                        <!--<td class="customized-checkbox">
                      <mat-checkbox aria-label="select" [name]="Ipdata.IpAcceptIpName" [(ngModel)]="Ipdata.IP.AcceptIpUI" [disabled]="Ipdata.AcceptIpDisable || disableOnRoleBSIp">
                      </mat-checkbox>
                    </td>-->

                        <td class="no_pad" [attr.data-label]="'Holmes BDM'">
                          <!-- Holmes BDM autocomplete starts here-->
                          <div
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left customized-input cust_autoComplete pos-rel no_pad">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                              <!-- <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="ContractingName"
                      class="label-form">Contracting country*</label>  -->
                              <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                                [name]="Ipdata.IpHolmesBDMName" autocomplete="off" type="text"
                                [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!Ipdata.IP.WiproHolmesbdmName && !Ipdata.HolmesDisable)}"
                                [title]="Ipdata.IP.WiproHolmesbdmName" [(ngModel)]="Ipdata.IP.WiproHolmesbdmName"
                                [disabled]="!Ipdata.IP.IpName || !Ipdata.IP.IpId || Ipdata.HolmesDisable || disableOnRoleBSIp || disableonApproverDate"
                                placeholder="Search"
                                (ngModelChange)="getIpHolmesData(Ipdata.IP,Ipdata.IP.WiproHolmesbdmName,q)"
                                (click)="Ipdata.IpHolmesbdmNameSwitch = true;getIpHolmesData(Ipdata.IP,Ipdata.IP.WiproHolmesbdmName,q)"
                                (blur)="IpHolmesBDMclose(Ipdata.IP,q,$event)">
                              <span class="mdi mdi-magnify"></span>
                              <div
                                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm border float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                                *ngIf="Ipdata.IpHolmesbdmNameSwitch">
                                <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                                  <ul tabindex="0" class=" list-group sort-dropdown">
                                    <li class="list-group-item no_pad "
                                      (keypress)="changeIpHolmesBDMData(item,Ipdata.IP,q)"
                                      (click)="changeIpHolmesBDMData(item,Ipdata.IP,q)"
                                      *ngFor="let item of Ipdata.IpHolmesDD">
                                      <label for="inti_name" class="float-left name mb-0">
                                        <span class="d-block list-name">{{item.Name}}</span>
                                        <!-- <span class="d-block sub-list">{{item.subtitle}}</span> -->
                                      </label>
                                    </li>
                                    <li class="d-block list-name no_pad" *ngIf="(Ipdata.IpHolmesDD).length == 0">
                                      No record found </li>
                                    <span class="db-search"
                                      (click)="openadvancetabsSearch(Ipdata.IP,'BSIPHolmesBDM',Ipdata.IpHolmesDD,Ipdata.selectedHomesBDM,Ipdata.IP.WiproHolmesbdmName,q)">
                                      <button id="advanceIPHolmesBDmSearch{{q}}" role="option" tabindex="0"
                                        aria-disabled="false" aria-label="Advance look up" type="button" class="button-search">
                                        <span class="mdi mdi-file-outline"></span> Advance look up
                                      </button>
                                    </span>
                                  </ul>
                                </perfect-scrollbar>
                              </div>
                            </div>
                          </div>
                          <!--Holmes BDM autocomplete ends here-->

                        </td>

                        <td class="no_pad display_flex mobile-align">
                          <!-- <button class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn" aria-label="view"
                        matTooltip="view">
                        <span class="col-xs-12 nopad blue_circle_replay_img mdi mdi-eye"></span>
                      </button> -->
                          <button type="button" class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn"
                            aria-label="view" matTooltip="view"
                            (click)="navigatetoIPCloud(Ipdata.IP,q,Ipdata.CloudDisabled)">
                            <span class="col-xs-12 nopad blue_circle_replay_img mdi mdi-dots-horizontal"></span>
                          </button>
                          <button type="button" class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn"
                            *ngIf="!disableOnRoleBSIp && !WTFlag && !disableonApproverDate" aria-label="Delete"
                            matTooltip="Delete" (click)="deletBSIpValidation(Ipdata.IP,'ip',q)">
                            <span class="col-xs-12 nopad blue_circle_replay_img mdi  mdi-delete"></span>
                          </button>
                          <!-- (click)="openip()" -->
                          <!-- <button class="btn-none float-right more-btn-mobile mr10 cp" role="button" title="more"
                         aria-label="more" tabindex="0"  routerLink="/opportunity/ipadditionaldetails">
                        <span class="morepop mdi mdi-dots-vertical expand-btn"></span>
                      </button> -->
                        </td>
                      </tr>
                      <tr class="nodata_tr" *ngIf="IpDetails.length==0">
                        <td class="nodata_td" colSpan="12"> No records found </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <!-- Table ends here -->
                <!-- </perfect-scrollbar> -->
              </div>
            </mat-expansion-panel>

          </div>
        </div>
        <!-- IP panel ends here -->

        <!-- Solution panel starts here -->
        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left normal_table mb0 no_pad">
          <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left pad-26 pad_t0 solution-tab ">
            <mat-expansion-panel hideToggle="true" [expanded]="panelOpenState5" class="no_pad"
              (opened)="panelOpenState5 = true" (closed)="panelOpenState5 = false">
              <mat-expansion-panel-header class="min_height60">
                <div class="min_height60 col-12 no_pad">
                  <div class="accord-heading col-12">
                    <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 float-left no_pad "> 
                      <span
                        [ngClass]="panelOpenState5 ? 'mdi mdi-chevron-down chevron-right float-left':'mdi mdi-chevron-up chevron-right float-left'"></span>
                      <span class="accordian-title cardsHead col-6 no_pad">
                          Solution</span>
                      </div>
                    <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 float-right no_pad mobpad15 bot10 mobile-button-width" *ngIf="!disableOnRoleBSSolution">
                      <button aria-label="Add solution" type="button" (click)="addsolution();$event.stopPropagation()"
                        class="primary-button h-40 std save-responsive-btn float-right pad_10"
                        [disabled]="disableOnRoleBSSolution">+ Add
                        solution</button>
                    </div>
                  </div>
                </div>
              </mat-expansion-panel-header>

              <div class="col-12 no_pad float-left btop_withoutpadding">
                <!-- <perfect-scrollbar style="max-height:250px" class="z-ind-9"> -->
                <!-- Table starts here -->
                <!-- <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad scroll-tabs overflowscroll table-responsive"> -->
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                  [ngClass]="!service.Summary_window ? '' : 'table-responsive'">
                  <table class="table table-borderless">
                    <thead>
                      <tr>
                        <!-- <th class="customized-checkbox">
                      <mat-checkbox aria-label="select all" name="checkbox" (change)="selectAllsol()" [(ngModel)]="selectedAllsol">
                      </mat-checkbox>
                    </th> -->
                        <th>Type*</th>
                        <th>Name*</th>
                        <th>Owner</th>
                        <th>%</th>
                        <th>% of TCV*</th>
                        <th class="no-wrap">Solution value*</th>
                        <th>Solution BDM</th>
                        <th>Influence type</th>
                        <th>Service type*</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody *ngFor="let solData of SolutionDetails;let j =index">

                      <tr>
                        <!-- <td class="customized-checkbox">
                      <mat-checkbox aria-label="select" name="checkbox" (change)="checkIfAllSelectedsol(data)"
                        [(ngModel)]="data.isCheccked">
                      </mat-checkbox>
                    </td> -->
                        <td class="display-none"></td>
                        <td [attr.data-label]="'Type*'">
                          <!-- Select DROPDOWN STARTS -->
                          <div class="customized-select mobile-select-box" [ngClass]="{'disabled-control' : disableOnRoleBSSolution}">
                        <span class="caret color-azure"></span>
                        <select role="listbox" [name]="solData.solutionTypeName"
                        [title]="solData.solutions.WiproTypeName"
                        [ngClass]="{'orangeborder':(!solData.solutions.WiproType)}"
                        [(ngModel)]="solData.solutions.WiproType"
                        (change)="getnamearray(solData.solutions,j)"
                        [disabled]="disableOnRoleBSSolution">
                          <option hidden disabled value="">Select</option>
                          <option *ngFor="let type of solutionTypeDD" [value]="type.Id">{{type.Name}}</option>
                        </select>
                      </div>

                          <!-- updated mat select starts here -->
                          <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad web-select-box">
                            <mat-form-field class="col-12 no_pad float-left">
                              <mat-select disableOptionCentering panelClass="Select-panel-class"
                                class="select-focus mat-select {{service.getSelectedClass(solData.solutions.WiproType)}}"
                                role="listbox" [name]="solData.solutionTypeName"
                                [title]="solData.solutions.WiproTypeName"
                                [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!solData.solutions.WiproType)}"
                                [(ngModel)]="solData.solutions.WiproType"
                                (selectionChange)="getnamearray(solData.solutions,j)"
                                [disabled]="disableOnRoleBSSolution">
                                <mat-option hidden disabled value="">Select</mat-option>
                                <mat-option *ngFor="let type of solutionTypeDD" [value]="type.Id">{{type.Name}}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <!-- updated mat select ends here -->
                          <!-- Select DROPDOWN STARTS -->
                        </td>
                        <td class="no_pad" [attr.data-label]="'Name*'">
                          <!-- name autocomplete starts here-->
                          <div
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left customized-input cust_autoComplete pos-rel no_pad">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                              <!-- <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="ContractingName"
                  class="label-form">Contracting country*</label>  -->
                              <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                                [name]="solData.solutionNmName" autocomplete="off" type="text"
                                [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!solData.solutions.WiproAccountname)}"
                                [(ngModel)]="solData.solutions.WiproAccountname"
                                (ngModelChange)="getnameArrayDataonType(solData.solutions,j,solData.solutions.WiproAccountname)"
                                placeholder="Search" [title]="solData.solutions.WiproAccountname"
                                (click)="solData.solNameSwitch = true;getnameArrayDataonType(solData.solutions,j,solData.solutions.WiproAccountname)"
                                (blur)="solNameclose(solData.solutions,j,$event)"
                                [disabled]="!solData.solutions.WiproType || disableOnRoleBSSolution">
                              <span class="mdi mdi-magnify"></span>
                              <div
                                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm border float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                                *ngIf="solData.solNameSwitch">
                                <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                                  <ul tabindex="0" class=" list-group sort-dropdown">
                                    <li class="list-group-item no_pad "
                                      (keypress)="appendsolutionname(item, solData.solutions, j)"
                                      (click)="appendsolutionname(item, solData.solutions, j)"
                                      *ngFor="let item of solData.nameDD">
                                      <label for="inti_name" class="float-left name mb-0">
                                        <span class="d-block list-name">{{item.AccountName}}</span>
                                        <!-- <span class="d-block sub-list">{{item.Name}}</span> -->
                                      </label>
                                    </li>
                                    <li class="d-block list-name no_pad" *ngIf="(solData.nameDD).length == 0">
                                      No record found </li>
                                    <span class="db-search"
                                      (click)="openadvancetabsSearch(solData.solutions,'BSSolutionName',solData.nameDD,solData.selectedSolName,solData.solutions.WiproAccountname,j)">
                                      <button id="advanceSolutionNameSearch{{j}}" role="option" tabindex="0"
                                        aria-disabled="false" aria-label="Advance look up" type="button" class="button-search">
                                        <span class="mdi mdi-file-outline"></span> Advance look up
                                      </button>
                                    </span>
                                  </ul>
                                </perfect-scrollbar>
                              </div>
                            </div>
                          </div>
                          <!--name autocomplete ends here-->

                        </td>

                        <td class="no_pad" [attr.data-label]="'Owner'">
                          <!-- owner autocomplete starts here-->
                          <div
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left customized-input cust_autoComplete pos-rel no_pad">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                              <!-- <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="ContractingName"
                  class="label-form">Contracting country*</label>  -->

                              <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                                [name]="solData.solutionOwnerName" autocomplete="off" type="text"
                                [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!solData.solutions.OwnerIdValueName && solData.solutions.WiproType && solData.solutions.WiproType != '184450001')}"
                                [title]="solData.solutions.OwnerIdValueName"
                                [(ngModel)]="solData.solutions.OwnerIdValueName" 
                                (ngModelChange)="getOwnerArray(solData.solutions,j,solData.solutions.OwnerIdValueName)"
                                placeholder="Search"
                                (click)="solData.solOwnerSwitch = true;getOwnerArray(solData.solutions,j,solData.solutions.OwnerIdValueName)"
                                (blur)="solOwnerclose(solData.solutions,j,$event)"
                                [disabled]="!solData.solutions.WiproAccountname || disableOnRoleBSSolution ||solData.solutions.WiproType == '184450001'">
                              <span class="mdi mdi-magnify"></span>
                             
                          <div
                          class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm border float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                          *ngIf="solData.solOwnerSwitch">
                          <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                            <ul tabindex="0" class=" list-group sort-dropdown">
                              <li class="list-group-item no_pad "
                                (keypress)="appendOwnername(item, solData.solutions, j)"
                                (click)="appendOwnername(item, solData.solutions, j)"
                                *ngFor="let item of solData.ownerDD">
                                <label for="inti_name" class="float-left name mb-0">
                                  <span class="d-block list-name">{{item.Name}}</span>
                                  <!-- <span class="d-block sub-list">{{item.Name}}</span> -->
                                </label>
                              </li>
                              <li class="d-block list-name no_pad" *ngIf="(solData.ownerDD).length == 0">
                                No record found </li>
                              <span class="db-search"
                                (click)="openadvancetabsSearch(solData.solutions,'BSSolutionOwnerName',solData.ownerDD,solData.selectedOwnerName,solData.solutions.OwnerIdValueName,j)">
                                <button id="advanceSolutionOwnerNameSearch{{j}}" role="option" tabindex="0"
                                  aria-disabled="false" aria-label="Advance look up" type="button" class="button-search">
                                  <span class="mdi mdi-file-outline"></span> Advance look up
                                </button>
                              </span>
                            </ul>
                          </perfect-scrollbar>
                        </div>

                            </div>
                          </div>
                          <!--owner autocomplete ends here-->

                        </td>
                        <td class="customized-checkbox vertical-middle " [attr.data-label]="'%'">
                          <mat-checkbox aria-label="select" [name]="solData.solutionPerName"
                            [(ngModel)]="solData.solutions.WiproPercentage" [disabled]="disableOnRoleBSSolution">
                          </mat-checkbox>
                        </td>
                        <td [attr.data-label]="'% of TCV*'">
                          <div class="customized-input">
                            <!-- <label [for]="solData.solutionTCVName" class=""> </label> -->
                            <input type="text" class="border-gray w-100" [name]="solData.solutionTCVName"
                              [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!solData.solutions.WiproPercentageOfTCV && solData.solutions.WiproPercentage)}"
                              [(ngModel)]="solData.solutions.WiproPercentageOfTCV" 
                              #solperc [decimalnumbersOnly]="acceptNegative" [oldValue]="solperc.value"
                              placeholder="00.00" onpaste="return false;" ondrop="return false;" 
                               (blur)="checkTCVPercBlur(solData.solutions,solperc.value,j)"
                              [disabled]='solData.solutions.WiproPercentage == false || disableOnRoleBSSolution'>
                          </div>
                        </td>
                        <td [attr.data-label]="'Solution value*'">
                          <div class="customized-input">
                            <label for="solval" class=""> </label>
                            <input id="solval" type="text" class="border-gray w-100" [name]="solData.solutionValueName"
                              [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!solData.solutions.WiproValue && !solData.solutions.WiproPercentage)}"
                              [(ngModel)]="solData.solutions.WiproValue"
                              #solval [decimalnumbersOnly]="acceptNegative" [oldValue]="solval.value"
                               onpaste="return false;" ondrop="return false;" 
                              (blur)="checkSolValueBlur(solData.solutions,solval.value,j)" placeholder="00.00"
                              [disabled]='solData.solutions.WiproPercentage == true || disableOnRoleBSSolution'>
                          </div>
                        </td>
                        <td class="no_pad" [attr.data-label]="'Solution BDM'">
                          <!-- solbdm autocomplete starts here-->
                          <div
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left customized-input cust_autoComplete pos-rel no_pad">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                              <!-- <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="ContractingName"
                  class="label-form">Contracting country*</label>  -->
                              <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                                [name]="solData.solutionBDMName" autocomplete="off" type="text"
                                [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!solData.solutions.WiproSolutionBDMName && solData.solutions.WiproType == '184450001')}"
                                [(ngModel)]="solData.solutions.WiproSolutionBDMName"
                                (ngModelChange)="getsolutionBDMArray(solData.solutions,j,solData.solutions.WiproSolutionBDMName)"
                                placeholder="Search" [title]="solData.solutions.WiproSolutionBDMName"
                                (click)="solData.solbdmNameSwitch = true;getsolutionBDMArray(solData.solutions,j,solData.solutions.WiproSolutionBDMName)"
                                (blur)="solutionBDMclose(solData.solutions,j,$event)"
                                [disabled]="solData.solutions.WiproType != '184450001' || !solData.solutions.WiproAccountname || !solData.solutions.WiproAccountNameValue || disableOnRoleBSSolution">
                              <span class="mdi mdi-magnify"></span>
                              <div
                                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm border float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                                *ngIf="solData.solbdmNameSwitch">
                                <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                                  <ul tabindex="0" class=" list-group sort-dropdown">
                                    <li class="list-group-item no_pad "
                                      (keypress)="appendsolutionBDM(item,solData.solutions,j)"
                                      (click)="appendsolutionBDM(item,solData.solutions,j)"
                                      *ngFor="let item of solData.solutionBDMDD">
                                      <label for="inti_name" class="float-left name mb-0">
                                        <span class="d-block list-name">{{item.Name}}</span>
                                        <!-- <span class="d-block sub-list">{{item.subtitle}}</span> -->
                                      </label>
                                    </li>
                                    <li class="d-block list-name no_pad" *ngIf="(solData.solutionBDMDD).length == 0">
                                      No record found </li>
                                    <span class="db-search"
                                      (click)="openadvancetabsSearch(solData.solutions,'BSIPSolutionBDM',solData.solutionBDMDD,solData.selectedSolBDM,solData.solutions.WiproSolutionBDMName,j)">
                                      <button id="advanceSolutionBDMSearch{{j}}" role="option" tabindex="0"
                                        aria-disabled="false" aria-label="Advance look up" type="button" class="button-search">
                                        <span class="mdi mdi-file-outline"></span> Advance look up
                                      </button>
                                    </span>
                                  </ul>
                                </perfect-scrollbar>
                              </div>
                            </div>
                          </div>
                          <!--solbdm autocomplete ends here-->
                        </td>
                        <td [attr.data-label]="'Influence type'">
                          <!-- Select DROPDOWN STARTS -->
                          <div class="customized-select mobile-select-box" [ngClass]="{'disabled-control' : solData.solutions.WiproType == '184450001' || !solData.solutions.WiproType || disableOnRoleBSSolution}">
                          <span class="caret color-azure"></span>
                          <select role="listbox" [name]="solData.solutionInfName"
                          [title]="solData.solutions.WiproInfluenceTypeName"
                          [ngClass]="{'orangeborder':(!solData.solutions.WiproInfluenceType && solData.solutions.WiproType && solData.solutions.WiproType != '184450001')}"
                          [(ngModel)]="solData.solutions.WiproInfluenceType"
                          [disabled]="solData.solutions.WiproType == '184450001' || !solData.solutions.WiproType || disableOnRoleBSSolution"
                          (change)="resetServiceType(solData.solutions,j)">
                            <option hidden disabled value="">Select</option>
                            <option *ngFor="let Inf of InfluenceTypeDD" 
                            [hidden]="!Inf.IsVisible"
                            [disabled]="!Inf.IsVisible"
                            [value]="Inf.Id">{{Inf.Name}}</option>
                          </select>
                        </div>

                          <!-- updated mat select starts here -->
                          <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad web-select-box">
                            <mat-form-field class="col-12 no_pad float-left">
                              <mat-select disableOptionCentering panelClass="Select-panel-class"
                                class="select-focus mat-select {{service.getSelectedClass(solData.solutions.WiproInfluenceType)}}"
                                role="listbox" [name]="solData.solutionInfName"
                                [title]="solData.solutions.WiproInfluenceTypeName"
                                [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!solData.solutions.WiproInfluenceType && solData.solutions.WiproType && solData.solutions.WiproType != '184450001')}"
                                [(ngModel)]="solData.solutions.WiproInfluenceType"
                                [disabled]="solData.solutions.WiproType == '184450001' || !solData.solutions.WiproType || disableOnRoleBSSolution"
                                (selectionChange)="resetServiceType(solData.solutions,j)">
                                <mat-option hidden disabled value="">Select</mat-option>
                                <mat-option *ngFor="let Inf of InfluenceTypeDD" 
                                [hidden]="!Inf.IsVisible"
                                [disabled]="!Inf.IsVisible"
                                [value]="Inf.Id">{{Inf.Name}}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <!-- updated mat select ends here -->
                          <!-- Select DROPDOWN STARTS -->
                        </td>
                        <td [attr.data-label]="'Service type*'">
                          <!-- Select DROPDOWN STARTS -->
                          <div class="customized-select mobile-select-box" [ngClass]="{'disabled-control' : solData.solutions.WiproType == '184450001' || !solData.solutions.WiproType || solData.solutions.WiproInfluenceType == '184450001' || disableOnRoleBSSolution || !solData.solutions.WiproInfluenceType}">
                            <span class="caret color-azure"></span>
                            <select [title]="solData.solutions.WiproServiceTypeName" role="listbox"
                            [name]="solData.solutionSTName"
                            [ngClass]="{'orangeborder':(!solData.solutions.WiproServiceType && solData.solutions.WiproType && solData.solutions.WiproType != '184450001' && solData.solutions.WiproInfluenceType && solData.solutions.WiproInfluenceType != '184450001')}"
                            [(ngModel)]="solData.solutions.WiproServiceType"
                            (change)="setServiceType(solData.solutions,j)"
                            [disabled]="solData.solutions.WiproType == '184450001' || !solData.solutions.WiproType || solData.solutions.WiproInfluenceType == '184450001' || disableOnRoleBSSolution || !solData.solutions.WiproInfluenceType">
                              <option hidden disabled value="">Select</option>
                              <option *ngFor="let ST of serviceTypeDD" [value]="ST.Id">{{ST.Name}}</option>

                            </select>
                          </div>
                          <!-- updated mat select starts here -->
                          <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad web-select-box">
                            <mat-form-field class="col-12 no_pad float-left">
                              <mat-select disableOptionCentering panelClass="Select-panel-class"
                                class="select-focus mat-select {{service.getSelectedClass(solData.solutions.WiproServiceType)}}"
                                [title]="solData.solutions.WiproServiceTypeName" role="listbox"
                                [name]="solData.solutionSTName"
                                [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!solData.solutions.WiproServiceType && solData.solutions.WiproType && solData.solutions.WiproType != '184450001' && solData.solutions.WiproInfluenceType && solData.solutions.WiproInfluenceType != '184450001')}"
                                [(ngModel)]="solData.solutions.WiproServiceType"
                                (selectionChange)="setServiceType(solData.solutions,j)"
                                [disabled]="solData.solutions.WiproType == '184450001' || !solData.solutions.WiproType || solData.solutions.WiproInfluenceType == '184450001' || disableOnRoleBSSolution || !solData.solutions.WiproInfluenceType">
                                <mat-option hidden disabled value="">Select</mat-option>
                                <mat-option *ngFor="let ST of serviceTypeDD" [value]="ST.Id">{{ST.Name}}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <!-- updated mat select ends here -->
                          <!-- Select DROPDOWN STARTS -->
                        </td>
                        <td class="no_pad display_flex mobile-align">
                          <!-- <button class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn" aria-label="view"
                        matTooltip="view">
                        <span class="col-xs-12 nopad blue_circle_replay_img mdi mdi-eye"></span>
                      </button> -->
                          <button type="button" class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn"
                            *ngIf="!disableOnRoleBSSolution" aria-label="Delete" matTooltip="Delete"
                            (click)="deleteBSSolutionValidation(solData.solutions,'solution',j)">
                            <span class="col-xs-12 nopad blue_circle_replay_img mdi  mdi-delete"></span>
                          </button>
                        </td>
                      </tr>
                      <tr *ngIf="solData.solutions.WiproType == '184450000'">
                        <td class="float-right">
                          <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad mb0 pad-9 label-form">Deal registered*
                            <span class="mdi mdi-information-outline info-icon" tabindex="0" (click)="DealPricingChange(solData.solutions,j)" aria-labelledby="atool atoola"></span></label>
                        </td>
                        <td>
                          <!-- Select DROPDOWN STARTS -->
                            <div class="customized-select mobile-select-box" [ngClass]="{'disabled-control' : solData.solutions.WiproType != '184450000' || !solData.solutions.WiproType || disableOnRoleBSSolution}">
                              <span class="caret color-azure"></span>
                              <select [title]="solData.solutions.IsDealRegistered === true ? 'Yes' : (solData.solutions.IsDealRegistered === false ? 'No' : '')" role="listbox"
                            [name]="solData.solutionDealPricingName"
                            [ngClass]="{'orangeborder':(solData.solutions.IsDealRegistered === '' && solData.solutions.WiproType && solData.solutions.WiproType == '184450000')}"
                                [(ngModel)]="solData.solutions.IsDealRegistered"
                            (change)="DealPricingChange(solData.solutions,j)"
                            [disabled]="solData.solutions.WiproType != '184450000' || !solData.solutions.WiproType || disableOnRoleBSSolution">
                                <option selected hidden disabled value="">Select</option>
                                <option [value]="dealYes"> Yes </option>
                                <option [value]="dealNo"> No</option>

                              </select>
                            </div>
                            <!-- updated mat select starts here -->
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad web-select-box">
                              <mat-form-field class="col-12 no_pad float-left inputfixed-width">
                                <mat-select disableOptionCentering panelClass="Select-panel-class" class="select-focus mat-select"
                                [title]="solData.solutions.IsDealRegistered === true ? 'Yes' : (solData.solutions.IsDealRegistered === false ? 'No' : '')" role="listbox"
                                [name]="solData.solutionDealPricingName"
                                [ngClass]="{'orangeborder':(solData.solutions.IsDealRegistered === '' && solData.solutions.WiproType && solData.solutions.WiproType == '184450000')}"
                                [(ngModel)]="solData.solutions.IsDealRegistered"
                                (selectionChange)="DealPricingChange(solData.solutions,j)"
                                [disabled]="solData.solutions.WiproType != '184450000' || !solData.solutions.WiproType || disableOnRoleBSSolution">
                                  <mat-option selected hidden disabled value="">Select</mat-option>
                                  <mat-option [value]="dealYes"> Yes </mat-option>
                                  <mat-option [value]="dealNo"> No </mat-option>
                                </mat-select>
                                <!-- <p class="error-message top-40" *ngIf="(!solData.solutions.WiproType)" title="Type is required">Type is required</p> -->
                              </mat-form-field>
                            </div>
                          <!-- updated mat select ends here -->
                          <!-- Select DROPDOWN STARTS -->
                        </td>
                      </tr>
                      <!-- <tr class="nodata_tr" *ngIf="SolutionDetails.length==0">
                        <td class="nodata_td" colSpan="12"> No records found </td>
                      </tr> -->
                    </tbody>
                    <tbody *ngIf="SolutionDetails.length==0">
                     <tr class="nodata_tr">
                        <td class="nodata_td" colSpan="12"> No records found </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <!-- Table ends here -->
                <!-- </perfect-scrollbar> -->
              </div>
            </mat-expansion-panel>

          </div>
        </div>
        <!-- Solution panel ends here -->

        <!-- Credit allocation panel starts here -->
        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left normal_table mb0 no_pad">
          <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left pad-26 pad_t0 credit-tab">
            <mat-expansion-panel hideToggle="true" [expanded]="panelOpenState6" class="no_pad"
              (opened)="panelOpenState6 = true" (closed)="panelOpenState6 = false">
              <mat-expansion-panel-header class="min_height60">
                <div class="min_height60 col-12 no_pad">
                  <div class="accord-heading col-12">
                    
                    <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 float-left no_pad ">
                      <span
                      [ngClass]="panelOpenState6 ? 'mdi mdi-chevron-down chevron-right float-left':'mdi mdi-chevron-up chevron-right float-left'"></span>
                       <span
                        class="accordian-title cardsHead col-6 no_pad">

                        Credit allocation</span></div>

                    <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 float-right no_pad mobpad15 bot10 mobile-button-width" *ngIf="!disableOnRoleBSCA">
                      <button aria-label="Add credit" type="button" (click)="addcredit();$event.stopPropagation()"
                        class="primary-button h-40 std save-responsive-btn float-right pad_10"
                        [disabled]="disableOnRoleBSCA">+ Add
                        credit</button>
                    </div>
                  </div>
                </div>
              </mat-expansion-panel-header>
              <div class="col-12 no_pad float-left btop_withoutpadding">
                <!-- <perfect-scrollbar style="max-height:250px" class="z-ind-9"> -->
                <!-- Table starts here -->
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                  [ngClass]="!service.Summary_window ? '' : 'table-responsive'">
                  <table class="table table-borderless">
                    <thead>
                      <tr>
                        <!-- <th class="customized-checkbox">
                      <mat-checkbox aria-label="select all" (change)="selectAllcredit()" [(ngModel)]="selectedAllcredit">
                      </mat-checkbox>
                    </th> -->
                        <th>Credit type*</th>
                        <th>Service line</th>
                        <th>Practice</th>
                        <th>Sub practice</th>
                        <th>{{WTFlag ? 'BDM' : 'BDM*'}}</th>
                        <th>Value({{CurrencySymbol}})</th>
                        <th>% Contribution*</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody>

                      <tr *ngFor="let creditdata of creditAllocationdataDetails;let i =index">
                        <!-- <td class="customized-checkbox">
                      <mat-checkbox aria-label="select" (change)="checkIfAllSelectedcredit(data)"
                        [(ngModel)]="data.isCheccked">
                      </mat-checkbox>
                    </td> -->
                        <td class="display-none"></td>
                        <td [attr.data-label]="'Credit type*'">
                          <!-- Select DROPDOWN STARTS -->
                          <div class="customized-select mobile-select-box" [ngClass]="{'disabled-control' : disableOnRoleBSCA || creditdata.creditAllocation.WiproIsDefault}">
                        <span class="caret color-azure"></span>
                        <select role="listbox" [name]="creditdata.creditTypeName"
                        [title]="creditdata.creditAllocation.WiproTypeName"
                        [ngClass]="{'orangeborder':(!creditdata.creditAllocation.WiproTypeId)}"
                        [(ngModel)]="creditdata.creditAllocation.WiproTypeId"
                        (change)="assignBDMData(creditdata.creditAllocation,i)"
                        [disabled]="disableOnRoleBSCA || creditdata.creditAllocation.WiproIsDefault">
                          <option hidden disabled value="">Select</option>
                          <option *ngFor="let creditType of creditTypeDD" [value]="creditType.Id">
                            {{creditType.Name}}</option>
                        </select>
                      </div>
                          <!-- updated mat select starts here -->
                          <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad web-select-box">
                            <mat-form-field class="col-12 no_pad float-left">
                              <mat-select disableOptionCentering panelClass="Select-panel-class"
                                class="select-focus mat-select {{service.getSelectedClass(creditdata.creditAllocation.WiproTypeId)}}"
                                role="listbox" [name]="creditdata.creditTypeName"
                                [title]="creditdata.creditAllocation.WiproTypeName"
                                [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!creditdata.creditAllocation.WiproTypeId)}"
                                [(ngModel)]="creditdata.creditAllocation.WiproTypeId"
                                (selectionChange)="assignBDMData(creditdata.creditAllocation,i)"
                                [disabled]="disableOnRoleBSCA || creditdata.creditAllocation.WiproIsDefault">
                                <mat-option hidden disabled value="">Select</mat-option>
                                <mat-option *ngFor="let creditType of creditTypeDD" [value]="creditType.Id">
                                  {{creditType.Name}}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <!-- updated mat select ends here -->
                          <!-- Select DROPDOWN STARTS -->
                        </td>
                        <td [attr.data-label]="'Service line'">
                          <!-- Select DROPDOWN STARTS -->
                          <div class="customized-select mobile-select-box" [ngClass]="{'disabled-control' : creditdata.creditAllocation.WiproTypeId == '184450001' || !creditdata.creditAllocation.WiproTypeId || disableOnRoleBSCA || creditdata.creditAllocation.WiproIsDefault}">
                        <span class="caret color-azure"></span>
                        <select role="listbox" [name]="creditdata.sLName"
                        [title]="creditdata.creditAllocation.ServicelineName"
                        [ngClass]="{'orangeborder':(!creditdata.creditAllocation.ServicelineId && creditdata.creditAllocation.WiproTypeId != '184450001' && creditdata.creditAllocation.WiproTypeId)}"
                        [(ngModel)]="creditdata.creditAllocation.ServicelineId"
                        (change)="getPracticeCAData(creditdata.creditAllocation,i)"
                        [disabled]="creditdata.creditAllocation.WiproTypeId == '184450001' || !creditdata.creditAllocation.WiproTypeId || disableOnRoleBSCA || creditdata.creditAllocation.WiproIsDefault">
                          <option hidden disabled value="">Select</option>
                          <option *ngFor="let creditSL of creditAllocationSLDD"
                          [value]="creditSL.ServicelineId">
                          {{creditSL.ServicelineIdName}}</option>
                        </select>
                      </div>

                          <!-- updated mat select starts here -->
                          <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad web-select-box">
                            <mat-form-field class="col-12 no_pad float-left">
                              <mat-select disableOptionCentering panelClass="Select-panel-class"
                                class="select-focus mat-select {{service.getSelectedClass(creditdata.creditAllocation.ServicelineId)}}"
                                role="listbox" [name]="creditdata.sLName"
                                [title]="creditdata.creditAllocation.ServicelineName"
                                [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!creditdata.creditAllocation.ServicelineId && creditdata.creditAllocation.WiproTypeId != '184450001' && creditdata.creditAllocation.WiproTypeId)}"
                                [(ngModel)]="creditdata.creditAllocation.ServicelineId"
                                (selectionChange)="getPracticeCAData(creditdata.creditAllocation,i)"
                                [disabled]="creditdata.creditAllocation.WiproTypeId == '184450001' || !creditdata.creditAllocation.WiproTypeId || disableOnRoleBSCA || creditdata.creditAllocation.WiproIsDefault">
                                <mat-option hidden disabled value="">Select</mat-option>
                                <mat-option *ngFor="let creditSL of creditAllocationSLDD"
                                  [value]="creditSL.ServicelineId">
                                  {{creditSL.ServicelineIdName}}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <!-- updated mat select ends here -->
                          <!-- Select DROPDOWN STARTS -->
                        </td>
                        <td [attr.data-label]="'Practice'">
                          <!-- Select DROPDOWN STARTS -->
                          <div class="customized-select mobile-select-box" [ngClass]="{'disabled-control' : creditdata.creditAllocation.WiproTypeId == '184450001' || !creditdata.creditAllocation.ServicelineId || disableOnRoleBSCA || creditdata.creditAllocation.WiproIsDefault || (creditdata.creditAllocation.ServicelineId && creditdata.practiceDD.length == 0)}">
                        <span class="caret color-azure"></span>
                        <select role="listbox" [name]="creditdata.practiceName"
                        [title]="creditdata.creditAllocation.PracticeName"
                        [ngClass]="{'orangeborder':(!creditdata.creditAllocation.PracticeId && creditdata.creditAllocation.WiproTypeId != '184450001' && creditdata.practiceDD.length>0)}"
                        [(ngModel)]="creditdata.creditAllocation.PracticeId"
                        (change)="getSubPracticeCAData(creditdata.creditAllocation,i)"
                        [disabled]="creditdata.creditAllocation.WiproTypeId == '184450001' || !creditdata.creditAllocation.ServicelineId || disableOnRoleBSCA || creditdata.creditAllocation.WiproIsDefault || (creditdata.creditAllocation.ServicelineId && creditdata.practiceDD.length == 0)">
                          <option hidden disabled value="">Select</option>
                          <option *ngFor="let creditpractice of creditdata.practiceDD"
                          [hidden]="creditpractice.PracticeIdName == ACS"
                          [disabled]="creditpractice.PracticeIdName == ACS"
                          [value]="creditpractice.PracticeId">
                            {{creditpractice.PracticeIdName}}</option>
                        </select>
                      </div>

                          <!-- updated mat select starts here -->
                          <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad web-select-box">
                            <mat-form-field class="col-12 no_pad float-left">
                              <mat-select disableOptionCentering panelClass="Select-panel-class"
                                class="select-focus mat-select {{service.getSelectedClass(creditdata.creditAllocation.PracticeId)}}"
                                role="listbox" [name]="creditdata.practiceName"
                                [title]="creditdata.creditAllocation.PracticeName"
                                [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!creditdata.creditAllocation.PracticeId && creditdata.creditAllocation.WiproTypeId != '184450001' && creditdata.practiceDD.length>0)}"
                                [(ngModel)]="creditdata.creditAllocation.PracticeId"
                                (selectionChange)="getSubPracticeCAData(creditdata.creditAllocation,i)"
                                [disabled]="creditdata.creditAllocation.WiproTypeId == '184450001' || !creditdata.creditAllocation.ServicelineId || disableOnRoleBSCA || creditdata.creditAllocation.WiproIsDefault || (creditdata.creditAllocation.ServicelineId && creditdata.practiceDD.length == 0)">
                                <mat-option hidden disabled value="">Select</mat-option>
                                <mat-option *ngFor="let creditpractice of creditdata.practiceDD"
                                [hidden]="creditpractice.PracticeIdName == ACS"
                                [disabled]="creditpractice.PracticeIdName == ACS"
                                [value]="creditpractice.PracticeId">
                                  {{creditpractice.PracticeIdName}}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <!-- updated mat select ends here -->
                          <!-- Select DROPDOWN STARTS -->
                        </td>
                        <td [attr.data-label]="'Sub practice'">
                          <!-- Select DROPDOWN STARTS -->
                          <div class="customized-select mobile-select-box" [ngClass]="{'disabled-control' : creditdata.creditAllocation.WiproTypeId == '184450001' || !creditdata.creditAllocation.ServicelineId || !creditdata.creditAllocation.PracticeId || disableOnRoleBSCA || creditdata.creditAllocation.WiproIsDefault || (creditdata.creditAllocation.PracticeId && creditdata.subPracticeDD.length == 0)}">
                        <span class="caret color-azure"></span>
                        <select role="listbox" [name]="creditdata.subPracticeName"
                        [title]="creditdata.creditAllocation.SubPracticeName"
                        [ngClass]="{'orangeborder':(!creditdata.creditAllocation.SubPracticeId && creditdata.creditAllocation.WiproTypeId != '184450001' && creditdata.subPracticeDD.length>0)}"
                        [(ngModel)]="creditdata.creditAllocation.SubPracticeId"
                        (change)="changeSubpracticeCAData(creditdata.creditAllocation,i)"
                        [disabled]="creditdata.creditAllocation.WiproTypeId == '184450001' || !creditdata.creditAllocation.ServicelineId || !creditdata.creditAllocation.PracticeId || disableOnRoleBSCA || creditdata.creditAllocation.WiproIsDefault || (creditdata.creditAllocation.PracticeId && creditdata.subPracticeDD.length == 0)">
                          <option hidden disabled value="">Select</option>
                          <option *ngFor="let creditSubpractice of creditdata.subPracticeDD"
                          [value]="creditSubpractice.SubPracticeId">
                          {{creditSubpractice.SubPracticeIdName}}</option>
                        </select>
                      </div>
                          <!-- updated mat select starts here -->
                          <div class="col-12 col-sm-12 col-md-12 col-lg-12 float-left h100 no_pad web-select-box">
                            <mat-form-field class="col-12 no_pad float-left">
                              <mat-select disableOptionCentering panelClass="Select-panel-class"
                                class="select-focus mat-select {{service.getSelectedClass(creditdata.creditAllocation.SubPracticeId)}}"
                                role="listbox" [name]="creditdata.subPracticeName"
                                [title]="creditdata.creditAllocation.SubPracticeName"
                                [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!creditdata.creditAllocation.SubPracticeId && creditdata.creditAllocation.WiproTypeId != '184450001' && creditdata.subPracticeDD.length>0)}"
                                [(ngModel)]="creditdata.creditAllocation.SubPracticeId"
                                (selectionChange)="changeSubpracticeCAData(creditdata.creditAllocation,i)"
                                [disabled]="creditdata.creditAllocation.WiproTypeId == '184450001' || !creditdata.creditAllocation.ServicelineId || !creditdata.creditAllocation.PracticeId || disableOnRoleBSCA || creditdata.creditAllocation.WiproIsDefault || (creditdata.creditAllocation.PracticeId && creditdata.subPracticeDD.length == 0)">
                                <mat-option hidden disabled value="">Select</mat-option>
                                <mat-option *ngFor="let creditSubpractice of creditdata.subPracticeDD"
                                  [value]="creditSubpractice.SubPracticeId">
                                  {{creditSubpractice.SubPracticeIdName}}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <!-- updated mat select ends here -->
                          <!-- Select DROPDOWN STARTS -->
                        </td>
                        <td class="no_pad" [attr.data-label]="'BDM*'">
                          <!-- bdm autocomplete starts here-->
                          <div
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left customized-input cust_autoComplete pos-rel no_pad">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
                              <!-- <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="ContractingName"
                    class="label-form">Contracting country*</label>  -->
                              <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                                [name]="creditdata.BDMName" autocomplete="off" type="text"
                                [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!creditdata.creditAllocation.ServicelineBDMName && ((!WTFlag && orderOverviewObj.OrderTypeId != 184450006) || (WTFlag && !creditdata.creditAllocation.WiproIsDefault)))}"
                                [title]="creditdata.creditAllocation.ServicelineBDMName"
                                [(ngModel)]="creditdata.creditAllocation.ServicelineBDMName" placeholder="Search"
                                (click)="creditdata.bdmNameSwitch = true;getCABDMData(creditdata.creditAllocation,i,creditdata.creditAllocation.ServicelineBDMName)"
                                (ngModelChange)="getCABDMData(creditdata.creditAllocation,i,creditdata.creditAllocation.ServicelineBDMName)"
                                (blur)="bdmNameclose(creditdata.creditAllocation,i,$event)"
                                [disabled]="!creditdata.creditAllocation.WiproTypeId || (creditdata.creditAllocation.WiproTypeId == '184450000' && (!creditdata.creditAllocation.ServicelineId || (!creditdata.creditAllocation.PracticeId && creditdata.practiceDD.length > 0))) || disableOnRoleBSCA || creditdata.creditAllocation.WiproIsDefault">
                              <span class="mdi mdi-magnify"></span>
                              <div
                                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm border float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                                *ngIf="creditdata.bdmNameSwitch">
                                <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                                  <ul tabindex="0" class=" list-group sort-dropdown">
                                    <li class="list-group-item no_pad "
                                      (keypress)="changeBDMData(item,creditdata.creditAllocation,i)"
                                      (click)="changeBDMData(item,creditdata.creditAllocation,i)"
                                      *ngFor="let item of creditdata.bdmDD">
                                      <label for="inti_name" class="float-left name mb-0">
                                        <span class="d-block list-name">{{item.Name}}</span>
                                        <!-- <span class="d-block sub-list">{{item.OwnerId}}</span> -->
                                      </label>
                                    </li>
                                    <li class="d-block list-name no_pad" *ngIf="(creditdata.bdmDD).length == 0">
                                      No record found </li>
                                    <span class="db-search"
                                      (click)="openadvancetabsSearch(creditdata.creditAllocation,'BSCASLBDM',creditdata.bdmDD,creditdata.selectedCABDM,creditdata.creditAllocation.ServicelineBDMName,i)">
                                      <button id="advanceCABDMSearch{{i}}" role="option" tabindex="0"
                                        aria-disabled="false" aria-label="Advance look up" type="button" class="button-search">
                                        <span class="mdi mdi-file-outline"></span> Advance look up
                                      </button>
                                    </span>
                                  </ul>
                                </perfect-scrollbar>
                              </div>
                            </div>
                          </div>
                          <!--bdm autocomplete ends here-->
                        </td>
                        <td class="" [attr.data-label]="'Value'">
                          <div class="customized-input">
                            <label for="val" class=""> </label>
                            <input id="val" type="text" class="border-gray w-100" [name]="creditdata.valueName"
                              [ngClass]="{'width125' : service.Summary_window}"
                              [(ngModel)]="creditdata.creditAllocation.WiproValue" placeholder="00.00" disabled>
                          </div>
                        </td>
                        <td class="" [attr.data-label]="'% Contribution * '">
                          <div class="customized-input">
                            <label for="cont" class=""> </label>
                            <input id="cont" type="text" class="border-gray w-100" [name]="creditdata.contributionName"
                              [ngClass]="{'width125' : service.Summary_window ,'orangeborder':(!creditdata.creditAllocation.Contribution)}"
                              [(ngModel)]="creditdata.creditAllocation.Contribution"
                              #cacontperc [decimalnumbersOnly]="acceptNegativeContribution" [oldValue]="cacontperc.value"
                              (blur)="checkContributionPercBlur(creditdata.creditAllocation,cacontperc.value,i)" onpaste="return false;"
                              ondrop="return false;" placeholder="00.00" [disabled]="disableOnRoleBSCA">
                          </div>
                        </td>
                        <td class="no_pad display_flex mobile-align">
                          <button type="button" class="btn-none blue_circle_replay pad_left_0 cp commonActionBtn"
                            *ngIf="!disableOnRoleBSCA && !creditdata.creditAllocation.WiproIsDefault"
                            aria-label="Delete" matTooltip="Delete" (click)="deletecredit(creditdata.creditAllocation,i)">
                            <span class="col-xs-12 nopad blue_circle_replay_img mdi  mdi-delete"></span>
                          </button>
                        </td>
                      </tr>
                      <tr class="nodata_tr" *ngIf="creditAllocationdataDetails.length==0">
                        <td class="nodata_td" colSpan="12"> No records found </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <!-- Table ends here -->
                <!-- </perfect-scrollbar> -->
              </div>
            </mat-expansion-panel>
          </div>
        </div>
        <!-- Credit allocation panel ends here -->
      </form>
    </div>
  </div>



  <div class="validation-window col-4 float-left drag-drop" *ngIf="false" cdkDrag>
    <mat-expansion-panel class="col-12" hideToggle="true" [expanded]="true" class="no_pad"
      (opened)="panelMandateFields = true" (closed)="panelMandateFields = false">
      <mat-expansion-panel-header class="h60">
        <mat-panel-title class="accord-heading">
          <span
            [ngClass]="panelMandateFields ? 'mdi mdi-chevron-down chevron-right':'mdi mdi-chevron-right chevron-right'"></span>
          <span class="accordian-title cardsHead pl36 col-12 no_pad editTopHeads">Mandatory for Close</span>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="col-12 no_pad float-left border_top">
        <span class="m-title">Fill the mandatory fields for close stage.</span>
        <ul class="mandatory-fields">
          <li *ngFor="let item of mandatoryFields" class="mandatory-item">
            <span class="mdi mdi-star mandatory-icon" *ngIf="!item.status"></span>
            <span class="mdi mdi-check mandatory-icon" *ngIf="item.status"></span> {{item.element}}</li>
        </ul>
      </div>
    </mat-expansion-panel>
  </div>