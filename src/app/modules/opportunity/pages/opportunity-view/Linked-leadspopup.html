<div class="col-12 float-left  no_pad popup-container popup-container-opportunity leadslinked">
        
        <div class="col-12 float-left  container-dialog">
            <div class="col-12 float-left  no_pad popup-hd">
                <span class="col-10 float-left  no_pad popup-hd-txt" mat-dialog-title>{{data.title}}</span>
                <button class="col-2 float-right no_pad btndef-none mdi mdi-window-close discard-close-btn close-icn" aria-label="close" mat-dialog-close ></button>
            </div>
    
            <div class="col-12 float-left border-bottom-grey"></div>
    
    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 no_pad float-left  ">
        <label  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="leadslinked"
        class="label-form mt20">{{data.title}}
    </label>
        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left plb-60-20 no_pad cust_autoComplete pos-rel" (clickOutside)="leadslinkedSwitch = false">
            <form class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName mb10">

               
                <input   
                
                #linkedLeadss
                id="linkedLeadss" 
                name="linkedLeadss"
                placeholder="Search and link activities" 
                type="text"
                role="combobox"
                autocomplete="off" 
                aria-owns="read"
                appKeyListControl 
                [dataManipulate]=true
                [attr.data-isDownBtn]=true
                (arrowDown)="arrowkeyLocation=$event"
                [attr.aria-expanded]="leadslinkedSwitch?true:false" 
                [attr.aria-activedescendant]="leadslinkedContact?.length+1 == arrowkeyLocation?'adls'+arrowkeyLocation:arrowkeyLocation"
                (input)="leadslinkedSwitch = true;arrowkeyLocation=0;" 
                (intialLoadData)="leadslinkedSwitch = true;arrowkeyLocation=0"
                (keyup.enter)="leadslinkedContact?.length+1 == arrowkeyLocation?openadvancetabs('linkedActivity',leadslinkedContact,leadslinkedModel) :appendleadslinked(leadslinkedContact[arrowkeyLocation]);leadslinkedSwitch=false;"
                (keydown)="leadslinkedSwitch=true" 
                (keydown.Tab)="leadslinkedSwitch = false"
                [attr.data-arrayMaxLength]="leadslinkedContact?.length" 
                aria-autocomplete="list"
                (ngModelChange)="activityData()" 
                
                (keyup)="activityData()" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left h-40 label-input" 
                     [(ngModel)]="leadslinkedModel"
                  
                    (click)="leadslinkedSwitch = true;leadslinked = true;activityData()">
                <span class="mdi mdi-magnify"></span>

                <!-- <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-right  border-btm z-ind-9999 float-left no_pad suggestion-box pos-abs border-bottom-4 top64 standard-border color-azure z-ind-9 bg-white"
                    *ngIf="leadslinked && leadslinkedSwitch">
                    <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                        <ul class=" list-group mr2  sort-dropdown ">
                            <li class="list-group-item h-50 p-4-10" (click)="appendleadslinked(item.ActivityId,item.Subject,i)"
                                *ngFor="let item of leadslinkedContact |filter:leadslinkedModel; let i=index;">
                                <label for="inti_name" class="float-left name w-80">
                                    <span class="d-block list-name ellipses">{{item.Subject}}</span>
                                </label>
    
                            </li>
                            <li class="d-block list-name h-40 p-10"
                                *ngIf="(leadslinkedContact |filter:leadslinkedModel).length == 0">
                                No record found </li>
                        </ul>
                    </perfect-scrollbar>
                </div> -->

                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad z-ind-9"
                *ngIf="leadslinked && leadslinkedSwitch">
               <ul class=" list-group color-azure autocomplete-box" >
                   <span class="w-100 z-ind-9 float-left bg-white">
                     <perfect-scrollbar style="max-height:160px" class="z-ind-9"> 
                    <span class="w-100 z-ind-9 float-left bg-white">
                       <ul class=" list-group color-azure  sort-dropdown mr2" role="listbox" id="read"
                           [ngClass]="isActivityGroupSearchLoading?'loader-search':''">
                           <li class="list-group-item h-50 p-4-10"  id="{{i}}" [class.active]="i==arrowkeyLocation"
                           tabindex="0" role="option"            (click)="appendleadslinked(item)" 
                               *ngFor="let item of leadslinkedContact |filter:leadslinkedModel; let i=index;">

                               <label for="inti_name" class="float-left name w-80 col-12">
                                   <span class="d-block list-name text_transfor_caps ellipses" title="{{item.Subject}}">{{item.Subject}}</span>
                               </label>

                           </li>
                           <li class="d-block list-name h-40 p-10 cp"
                           *ngIf="(leadslinkedContact |filter:leadslinkedModel).length == 0"> No record found
                        </li>
                       </ul>
                     </span>
                    </perfect-scrollbar>
                      <!--Advance serach pop up starts-->
          <span class="db-search"  (keypress)="openadvancetabs('linkedActivity',leadslinkedContact,leadslinkedModel)" (click)="openadvancetabs('linkedActivity',leadslinkedContact,leadslinkedModel)">
                <button id="adls{{leadslinkedContact?.length+1}}" role="option" tabindex="0"
                [class.active]="leadslinkedContact?.length+1 == arrowkeyLocation"
                aria-disabled="false" aria-label="Advance look up" type="button" class="button-search" >
                  <span class="mdi mdi-file-outline"></span> Advance look up
                </button>
              </span>


            

            <!--Advance serach pop up ends-->
                   </span>
                  
                 </ul>
           </div>


            </form>
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad mb10 selected-tags">
                <perfect-scrollbar style="max-height:300px">
                    <div style="width:auto !important" class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left tagged-box mt-10 p-4-10 mr10 d-flex text_transfor_caps dropdowndata-contain"
                        *ngFor="let item of selectedleadslinked; let i=index;">
                        <label for="inti_name" class="float-left name w-94 col-11">
                            <span style="margin-right:25px" class="d-block color-azure float-left ellipses w-100" title="{{item.Name}}">{{item.Name}}</span>
                        </label>
                        <span role="button" tabindex="0" aria-label="delete"
                       (click)='deleteActivityData(i)'  style="right:6px;position: absolute;top:5px;"   class="mdi mdi-close close-lead float-right cp"></span>
                    </div>
                </perfect-scrollbar>
            </div>
        </div>
    </div>
    <!--Linked leads autocomplete ends-->




          
        </div>
    
        <div class="col-12 float-left no_pad ">
            <button 
            [disabled]="selectedleadslinked.length==0"
 [ngClass]= "selectedleadslinked.length==0?'disableAssign':'' "
     
            aria-label="OK" class="col-12 float-left btndef-none no_pad confrm-btn" (click)='okButton()'
                >OK</button>
        </div>
    
    </div>

    <ng-container *ngIf="isLoading">
        <div class="col-12 float-left complex_table unqualified-padding pt0 no_pad">
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 no_pad leads-archived-landing">
                <div class="col-lg-12 col-sm-12 col-md-12 col-12 no_pad">
                    <div class="loaderContainer">
                        <div class="loader"></div>
                    </div>
                </div>
            </div>
        </div>
    </ng-container>