<div class="top-header" [ngClass]="service.header?'navbar-sticky-top':'navbar-fixed-top'">
  <app-nav></app-nav>
  <div class="float-left col-12 header-action-tab new-container">
    <div class="col-12 col-sm-8 col-md-8 col-lg-8 col-xl-8 float-left no_pad">
      <h1 class="heading-level-one mtop6"> Create new lead </h1>
    </div>
    <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4 float-left no_pad" *ngIf="leadinfo">
      <div class="float-right disp-flex save-cancel-responsive web-buttons">
        <button class="primary-button secondary-btn btn-block h-40 mr10 std cancel-responsived-btn button-wd50"
          (click)="opencancelpop()">Cancel</button>
        <button class="primary-button borderless h-40 std save-responsive-btn button-wd50"
          (click)="CreateLeadNext()">Next</button>
      </div>
    </div>
    <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4 float-left no_pad" *ngIf="dealinfo">
      <div class="float-right disp-flex save-cancel-responsive web-buttons">
        <button class="primary-button secondary-btn btn-block h-40 mr10 std cancel-responsived-btn button-wd50"
          (click)="opencancelpop()">Cancel</button>
        <button class="primary-button borderless h-40 std save-responsive-btn button-wd50" (click)="onSubmit()"
          [ngClass]="createClicked ? 'disabled-control' : 'primary-button'" [disabled]="createClicked">Create</button>
      </div>
    </div>
  </div>
</div>
<div *ngIf="autooverlay" class="auto-overlay" (click)="closeoverlayauto()"></div>

<!-- main div starts here -->
<div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad new-container respon create-lead-page">
  <div
    class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad pos-abs bg-mid_night h-180 res-position-rel">
  </div>
  <div
    class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left pt-125 pad-30 top-13 pad-top-135 scroll-middle-ios mar-bt-55" [ngClass]="dealinfo ? 'mar-bt-150':''">
    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  no_pad">

      <div class="loaderContainer col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" *ngIf="isLoading">
        <div class="loader"></div>
      </div>

    </div>
    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 no_pad disp-flex center pad-stepper-mob">
      <div class="col-6 col-sm-3 col-md-2 col-lg-2 col-xl-2 float-left no_pad ">
        <button (click)="stepone()" class="round-btn active del float-left">
          <span class="float-left span-text">1</span>
          <span class="float-left active-text">Lead details</span>
        </button>
        <span class="float-left horizontal-bar-one" [ngClass]="dealinfo || twoactive ?'active':''"></span>
      </div>

      <div class="col-4 col-sm-3 col-md-2 col-lg-2 col-xl-1 float-left no_pad ">
        <button class="round-btn" [attr.aria-selected]="dealinfo || twoactive ? true : '' "
          [ngClass]="dealinfo || twoactive?'active':''">
          <span class="float-left span-text">2</span>
          <span class="float-left text-step" [ngClass]="dealinfo || twoactive ?'active-text':''">Lead value details
          </span>
        </button>
      </div>
    </div>
    <!-- Begin of lead details -->
    <form id="validatescroll" [formGroup]="leadDetailsForm">
      <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left card mt40 margin-btm55 pad-create-lead "
        *ngIf="leadinfo">
        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 card-content float-left no_pad">
          <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
            <h2 class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6 float-left no_pad heading-level-three pad-top-8">Lead
              details </h2>
          </div>
          <div class="divider mt10 col-12 no_pad float-left"></div>
          <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
            <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left customized-input  plb-60-20 mt20">
              <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="leadName"
                class="label-form"> Lead name </label>
              <span class="required"> * </span>
              <div class="pos-rel w-100 float-left no_pad">
                <input #leadName specialIsAlphaNumeric [attr.data-type]="'text'"
                  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 input-text" id="leadName"
                  name="leadName" type="text" formControlName="leadName" autocomplete="off" maxlength="100" (input)="leadInputChange($event)"
                  placeholder="Enter lead name" (keyup)="LeadNameChange()" matTooltip="{{leadName.value}}"
                  [ngClass]="{'error': f.leadName.invalid && f.leadName.touched}" aria-required="true">
                <p *ngIf="f.leadName.touched && !f.leadName.valid" class="error-message top-40">Enter lead name </p>
                <p *ngIf="leadDetailsForm.get('leadName').errors?.range" class="error-message top-40">Name cannot exceed
                  100 characters</p>
                <p *ngIf="leadDetailsForm.get('leadName').errors?.isError" class="error-message top-40">Special
                  characters are not allowed</p>
              </div>
            </div>


            <div
              class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mt20">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName"
                (clickOutside)="LeadSourceclose()">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="leadSource"
                  class="label-form">
                  Lead source
                  <span class="required"> * </span>
                </label>
                <div class="pos-rel w-100 float-left no_pad">
                  <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                    #searchLeadSourceList id="leadSource" name="leadSource" autocomplete="off"
                    placeholder="Search lead source " formControlName="leadSource" type="text" role="combobox"
                    aria-autocomplete="list" aria-owns="read" appKeyListControl [dataManipulate]=true
                    [attr.data-isDownBtn]=true (arrowDown)="arrowkeyLocation=$event" [attr.data-selectedvalue]="source"
                    [attr.aria-expanded]="ConversationNameSwitchleadSource?true:false"
                    [attr.aria-activedescendant]="arrowkeyLocation"
                    (input)="ConversationNameSwitchleadSource=true;arrowkeyLocation=0"
                    (intialLoadData)="ConversationNameSwitchleadSource=true;callTempSource();arrowkeyLocation=source?-1:0"
                    (keyup.enter)="arrowkeyLocation=arrowkeyLocation==-1?0:arrowkeyLocation;
                    searchLeadSourceList.value=LeadSource[arrowkeyLocation].Name;source=LeadSource[arrowkeyLocation].Name;
                    appendleadSource(LeadSource[arrowkeyLocation].Name,LeadSource[arrowkeyLocation],true,arrowkeyLocation);
                    ConversationNameSwitchleadSource=false;arrowkeyLocation=0"
                    (keydown)="ConversationNameSwitchleadSource=true" [attr.data-arrayMaxLength]="LeadSource?.length"
                    [ngClass]="{'error': f.leadSource.invalid && (f.leadSource.dirty || f.leadSource.touched)}"
                    matTooltip="{{searchLeadSourceList.value}}" (keydown.Tab)="LeadSourceclose()" aria-required="true">
                  <p *ngIf="f.leadSource.touched && !f.leadSource.valid" class="error-message top-40"> Search
                    lead source </p>
                    <span class="mdi mdi-magnify" *ngIf="ConversationNameSwitchleadSource || leadSrcName =='' "></span>
                    <span class="mdi mdi-close auto-close"
                    (click)="clearLeadSource(searchLeadSourceList.value);arrowkeyLocation=0;leadSrcName=''"
                    *ngIf="!ConversationNameSwitchleadSource && leadSourceId!==''"></span>
                </div>

                <div
                  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm  border-right  float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                  *ngIf="ConversationNameSwitchleadSource"
                  [attr.focus]="leadDetailsForm.value.leadSource && ConversationNameSwitchleadSource">
                  <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                    <span class="w-100 z-ind-9 float-left bg-white">
                      <ul class=" list-group color-azure  sort-dropdown mr2" role="listbox" id="read"
                        [ngClass]="{'loader-search':isLeadSourceNameSearchLoading }">
                        <li id="{{i}}" tabindex="0" role="option" class="list-group-item"
                          [ngClass]="service.chatBot ? 'list-DA-cap' : 'list-name'"
                          (click)="searchLeadSourceList.value=item.Name;source=item.Name;appendleadSource(item.Name, item,true, arrowkeyLocation)"
                          *ngFor="let item of LeadSource;let i = index" [class.active]="i==arrowkeyLocation"
                          aria-disabled="false" matTooltip="{{item.Name}}">{{item.Name}}</li>
                        <li class="d-block list-name h-40 p-10"
                          *ngIf="(LeadSource |filter:leadDetailsForm.value.leadSource)?.length == 0 && !isLeadSourceNameSearchLoading">
                          No record found </li>
                      </ul>
                    </span>
                  </perfect-scrollbar>
                </div>
              </div>
            </div>

            <!--autocomplete-->
            <div
              class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4  float-left  cust_autoComplete pos-rel plb-60-20 mt20"
              *ngIf="AdvisorsAccount">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName"
                (clickOutside)="Leadadvisorclose()">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="advisorAccount"
                  class="label-form">
                  Advisor account
                  <span *ngIf="AdvisorsAccount" class="required"> * </span>
                </label>
                <div class="pos-rel w-100 float-left no_pad">
                  <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                    #advisorList id="advisorAccount" name="advisorAccount" formControlName="advisorAccount"
                    placeholder=" Search advisor account" type="text" role="combobox" autocomplete="off" aria-owns="read"
                    appKeyListControl [dataManipulate]=true [attr.data-isDownBtn]=true
                    (arrowDown)="arrowkeyLocation=$event" [attr.data-selectedvalue]="advisordata"
                    [attr.aria-expanded]="AdvisorAccountSwitch?true:false"
                    [attr.aria-activedescendant]="arrowkeyLocation"
                    (input)="AdvisorAccountSwitch=true;arrowkeyLocation=0"
                    (intialLoadData)="AdvisorAccountSwitch=true;callTempAdvisor();arrowkeyLocation=advisordata?-1:0"
                     (keyup.enter)="arrowkeyLocation=arrowkeyLocation==-1?0:arrowkeyLocation;
                     advisorList.value=AdvisorAccountArr[arrowkeyLocation].Name;
                    advisordata=AdvisorAccountArr[arrowkeyLocation].Name;
                    appendadvisor(AdvisorAccountArr[arrowkeyLocation].Name,AdvisorAccountArr[arrowkeyLocation],true, arrowkeyLocation);
                    AdvisorAccountSwitch=false;arrowkeyLocation=0" (keydown)="AdvisorAccountSwitch=true"
                    [attr.data-arrayMaxLength]="AdvisorAccountArr?.length" aria-autocomplete="list" aria-required="true"
                    (keydown.Tab)="Leadadvisorclose()" matTooltip="{{advisorList.value}}"
                    [ngClass]="{'error': f.advisorAccount.touched && !f.advisorAccount.valid && AdvisorsAccount}">
                  <p *ngIf="f.advisorAccount.touched && !f.advisorAccount.valid && AdvisorsAccount"
                    class="error-message top-40">
                    Search advisor account </p>
                    <span class="mdi mdi-magnify" *ngIf="AdvisorAccountSwitch || !AdvisorsAccount || AdvisorName ==''"></span>
                    <span class="mdi mdi-close auto-close"
                    (click)="clearAdvisor();arrowkeyLocation=0;AdvisorName=''"
                    *ngIf="!AdvisorAccountSwitch && AdvisorName!==''"></span>
                </div>

                <div
                  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm  border-right  float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                  *ngIf=" AdvisorAccountSwitch"
                  [attr.focus]="leadDetailsForm.value.advisorAccount && AdvisorAccountSwitch">
                  <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                    <span class="w-100 z-ind-9 float-left bg-white">
                      <ul class=" list-group color-azure  sort-dropdown mr2" role="listbox"
                        [ngClass]="{'loader-search':isAdvisorLoader}">
                        <li id="{{i}}" tabindex="0" role="option" [class.active]="i==arrowkeyLocation"
                          aria-disabled="false"
                          (click)="advisorList.value=item.Name;advisordata=item.Name;appendadvisor(item.Name, item,true, i)"
                          class="list-group-item " role="option"
                          [ngClass]="service.chatBot ? 'list-DA-cap' : 'list-name'"
                          *ngFor="let item of AdvisorAccountArr;let i = index" matTooltip="{{item.Name}}">{{item.Name}}</li>
                        <li class="d-block list-name h-40 p-10"
                          *ngIf="(AdvisorAccountArr |filter:leadDetailsForm.value.advisorAccount)?.length == 0 && !isAdvisorLoader">
                          No record found </li>
                      </ul>
                    </span>
                  </perfect-scrollbar>
                   <!--Advance serach pop up starts-->
                   <span class="db-search"  (click)="openadvancetabs('advisorSearch',AdvisorAccountArr, f.advisorAccount.value)">
                    <button id="{{companyNameSearch.length+1}}" role="option" tabindex="0"
                    aria-disabled="false" type="button" class="button-search"  [class.active]="companyNameSearch.length+1 == arrowkeyLocation">
                      <span class="mdi mdi-file-outline"></span> Advance look up
                    </button>
                  </span>
                        <!--Advance serach pop up ends-->
                </div>
              </div>
            </div>

            <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 "
              [ngClass]="AdvisorsAccount?'':'mt20'">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName"
                (clickOutside)="AccountNameclose()">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                  for="accountOrCompanyName" class="label-form">
                  Account name
                  <span class="required"> * </span>
                </label>
                <div class="pos-rel w-100 float-left no_pad">
                  <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                    #searchAccountNameList id="accountOrCompanyName" name="accountOrCompanyName"
                    formControlName="accountOrCompanyName" placeholder="Search account name" type="text" role="combobox"
                    aria-autocomplete="list" autocomplete="off" aria-owns="read" aria-required="true" appKeyListControl [dataManipulate]=true
                    [attr.data-isDownBtn]=true (arrowDown)="arrowkeyLocation=$event" [attr.data-selectedvalue]="output"
                    [attr.aria-expanded]="ConversationNameSwitch?true:false"
                    [attr.aria-activedescendant]="arrowkeyLocation"
                    (input)="ConversationNameSwitch=true;arrowkeyLocation=0"
                    (intialLoadData)="ConversationNameSwitch=true;callTempAccount();arrowkeyLocation=output?-1:0"
                     (keyup.enter)="arrowkeyLocation=arrowkeyLocation==-1?0:arrowkeyLocation;
                     searchAccountNameList.value=companyNameSearch[arrowkeyLocation].Name;
                    output=companyNameSearch[arrowkeyLocation].Name;
                    appendAccountName(companyNameSearch[arrowkeyLocation].Name,companyNameSearch[arrowkeyLocation],true,true,true, arrowkeyLocation);
                    ConversationNameSwitch=false;arrowkeyLocation=0"
                     (keydown)="ConversationNameSwitch=true"
                    [attr.data-arrayMaxLength]="companyNameSearch?.length" [readonly]="IsChildLead"
                    [attr.disabled]="disableAccount?'disabled':null" matTooltip="{{searchAccountNameList.value}}"
                    (keydown.Tab)="AccountNameclose()"
                    [ngClass]="{'error': f.accountOrCompanyName.invalid && (f.accountOrCompanyName.dirty || f.accountOrCompanyName.touched)}">
                  <p *ngIf="f.accountOrCompanyName.touched && !f.accountOrCompanyName.valid"
                    class="error-message top-40">
                    Search account/company </p>
                    <span class="mdi mdi-magnify" *ngIf="ConversationNameSwitch || AccName ==''"></span>
                    <span class="mdi mdi-close auto-close"
                    (click)="clearAccount();arrowkeyLocation=0;AccName=''"
                    *ngIf="!ConversationNameSwitch && AccId!=='' && !disableAccount"></span>
                </div>

                <div
                  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm  border-right  float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                  *ngIf=" ConversationNameSwitch && !IsChildLead"
                  [attr.focus]="leadDetailsForm.value.accountOrCompanyName && ConversationNameSwitch">
                  <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                    <span class="w-100 z-ind-9 float-left bg-white">
                      <ul class=" list-group color-azure  sort-dropdown mr2" role="listbox"
                        [ngClass]="{'loader-search':isAccountSearchLoader }">
                        <li id="{{i}}" tabindex="0" role="option" class="list-group-item "
                          [ngClass]="service.chatBot ? 'list-DA-cap' : 'list-name'"
                          (click)="searchAccountNameList.value=item.Name;output=item.Name;appendAccountName(item.Name, item,true,true,true, i)"
                          *ngFor="let item of companyNameSearch;let i = index" [class.active]="i==arrowkeyLocation"
                          aria-disabled="false" matTooltip="{{item.Name}}">
                          <span class="d-block list-name"> {{item.Name}} </span>
                          <span class="sub-list d-block"> {{ (item.Number!==undefined)?item.Number:"NA" }} | {{item.Owner.FullName}} | {{item.Type.Value}}</span>
                        </li>
                        <li class="d-block list-name h-40 p-10"
                          *ngIf="(companyNameSearch |filter:leadDetailsForm.value.accountOrCompanyName)?.length == 0 && !isAccountSearchLoader && searchAccountNameList.value?.length > 2">
                          No record found </li>
                      </ul>

                    </span>
                  </perfect-scrollbar>
                  <!--Advance serach pop up starts-->
                  <span class="db-search"
                    (click)="openadvancetabs('accountSearch',companyNameSearch, f.accountOrCompanyName.value)">
                    <button id="{{companyNameSearch?.length+1}}" role="option" tabindex="0" aria-disabled="false"
                      type="button" class="button-search"
                      [class.active]="companyNameSearch?.length+1 == arrowkeyLocation">
                      <span class="mdi mdi-file-outline"></span> Advance look up
                    </button>
                  </span>
                  <!--Advance serach pop up ends-->
                </div>
              </div>
            </div>
            <!--autocomplete-->

            <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  plb-60-20 mt-20-mob1">
              <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="text2"
                class="label-form">Account/Prospect</label>
              <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 input-text disable-input"
                id="text2" name="text" formControlName="accountOrProspect" type="text"
                placeholder="Please select account/company name">
            </div>

            <div
              class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20  mt-20-mob1">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName"
                (clickOutside)="ConversationSBUclose()">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="sbu"
                  class="label-form">
                  SBU </label>

                <div class="pos-rel w-100 float-left no_pad">
                  <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                    #searchSbulist id="sbu" name="sbu" formControlName="sbu" placeholder="Search SBU" type="text"
                    role="combobox" aria-autocomplete="list" autocomplete="off" aria-owns="read" appKeyListControl
                    [dataManipulate]=true [attr.data-isDownBtn]=true (arrowDown)="arrowkeyLocation=$event"
                    [attr.data-selectedvalue]="sbudata" [attr.aria-expanded]="ConversationNameSwitchsbu?true:false"
                    [attr.aria-activedescendant]="arrowkeyLocation"
                    (input)="ConversationNameSwitchsbu=true;arrowkeyLocation=0"
                    (intialLoadData)="ConversationNameSwitchsbu=true;callTempSbu();arrowkeyLocation=sbudata?-1:0" 
                    (keyup.enter)="arrowkeyLocation=arrowkeyLocation==-1?0:arrowkeyLocation;
                    searchSbulist.value=Conversationssbu[arrowkeyLocation].Name;sbudata=Conversationssbu[arrowkeyLocation].Name;
                    appendConversationsbu(Conversationssbu[arrowkeyLocation].Name,Conversationssbu[arrowkeyLocation],true, arrowkeyLocation);
                    ConversationNameSwitchsbu=false;arrowkeyLocation=0" (keydown)="ConversationNameSwitchsbu=true"
                    [attr.data-arrayMaxLength]="Conversationssbu?.length"
                    [attr.disabled]="disableSbu ? 'disabled' : null" matTooltip="{{searchSbulist.value}}"
                    (keydown.Tab)="ConversationSBUclose()">
                    <span class="mdi mdi-magnify"></span>
                </div>
                <div
                  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm  border-right  float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                  *ngIf="ConversationNameSwitchsbu && !disableSbu"
                  [attr.focus]="leadDetailsForm.value.sbu && ConversationNameSwitchsbu ">
                  <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                    <span class="w-100 z-ind-9 float-left bg-white">
                      <ul class=" list-group color-azure  sort-dropdown mr2 " role="listbox"
                        [ngClass]="{'loader-search':isSbuLoder }">
                        <li id="{{i}}" tabindex="0" role="option" [class.active]="i==arrowkeyLocation"
                          aria-disabled="false"
                          (click)="searchSbulist.value=item.Name;sbudata=item.Name;appendConversationsbu(item.Name, item,true, arrowkeyLocation)"
                          [class.active]="i==arrowkeyLocation" aria-disabled="false" class="list-group-item "
                          [ngClass]="service.chatBot ? 'list-DA-cap' : 'list-name'"
                          *ngFor="let item of Conversationssbu;let i = index" matTooltip="{{item.Name}}">{{item.Name}}
                        </li>
                        <li class="d-block list-name h-40 p-10"
                          *ngIf="(Conversationssbu |filter:leadDetailsForm.value.sbu)?.length == 0 && !isSbuLoder">
                          No record found </li>
                      </ul>
                    </span>
                  </perfect-scrollbar>
                </div>
              </div>
            </div>

            <!--new-->
            <div
              class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4  float-left  cust_autoComplete pos-rel plb-60-20 mt-20-mob1">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName"
                (clickOutside)="Leadverticalclose()">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="VerticalName"
                  class="label-form">
                  Vertical
                  <!-- <span *ngIf="(leadDetailsForm.value.sbu!=null && leadDetailsForm.value.sbu!='')" class="required"> *
                  </span> -->
                </label>
                <div class="pos-rel w-100 float-left no_pad">
                  <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                    #searchVerticallist id="VerticalName" name="VerticalName" formControlName="vertical"
                    placeholder="Search vertical name" type="text" role="combobox" aria-autocomplete="list"
                    autocomplete="off" aria-owns="read" appKeyListControl [attr.data-isDownBtn]=true
                    (arrowDown)="arrowkeyLocation=$event" [attr.data-selectedvalue]="verticaldata"
                    [attr.aria-expanded]="ConversationNameSwitchvertical?true:false"
                    [attr.aria-activedescendant]="arrowkeyLocation" aria-required="true"
                    (keyup.enter)="searchVerticallist.value=Vertical[arrowkeyLocation].Name;verticaldata=Vertical[arrowkeyLocation].Name;appendVertical(Vertical[arrowkeyLocation].Name,Vertical[arrowkeyLocation],true);ConversationNameSwitchvertical=false"
                    [attr.data-arrayMaxLength]="Vertical?.length"
                    (input)="ConversationNameSwitchvertical=true;callTempVertical()"
                    (click)="ConversationNameSwitchvertical=true;callTempVertical()"
                    [attr.disabled]="disableVertical ? '' : null"
                    (refinejunkvalue)="verticaldata='';resetTheServiceData(i)" matTooltip="{{searchVerticallist.value}}"
                    [ngClass]="{'error': f.vertical.invalid && !disableVertical && f.vertical.touched}">
                  <p *ngIf="f.vertical.touched && !f.vertical.valid && !disableVertical" class="error-message top-40">
                    Search vertical </p>
                    <span class="mdi mdi-magnify"></span>
                </div>

                <div
                  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm  border-right  float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                  *ngIf="ConversationNameSwitchvertical && !disableVertical"
                  [attr.focus]="leadDetailsForm.value.vertical && ConversationNameSwitchvertical">
                  <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                    <span class="w-100 z-ind-9 float-left bg-white">
                      <ul class=" list-group color-azure  sort-dropdown mr2" role="listbox"
                        [ngClass]="{'loader-search':isVerticalLoader}">
                        <li id="{{i}}" tabindex="0" role="option" [class.active]="i==arrowkeyLocation"
                          aria-disabled="false"
                          (click)="searchVerticallist.value=item.Name;verticaldata=item.Name;appendVertical(item.Name, item,true)"
                          class="list-group-item" role="option"
                          [ngClass]="service.chatBot ? 'list-DA-cap' : 'list-name'"
                          *ngFor="let item of Vertical;let i=index" matTooltip="{{item.Name}}">
                          {{item.Name}}</li>
                        <li class="d-block list-name h-40 p-10"
                          *ngIf="(Vertical |filter:leadDetailsForm.value.vertical)?.length == 0 && !isVerticalLoader">
                          No record found </li>
                      </ul>
                    </span>
                  </perfect-scrollbar>
                </div>
              </div>
            </div>

            <!--country search box added-->
            <div
              class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4  float-left  cust_autoComplete pos-rel plb-60-20 mt-20-mob1">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName"
                (clickOutside)="countryclose()">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="country"
                  class="label-form">
                  Country
                </label>
                <div class="pos-rel w-100 float-left no_pad">
                  <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                    #searchCountrylist id="country" name="country" formControlName="country"
                    placeholder="Search country" type="text" role="combobox" aria-autocomplete="list" autocomplete="off"
                    aria-owns="read" appKeyListControl [dataManipulate]=true [attr.data-selectedvalue]="countrydata"
                    (arrowDown)="arrowkeyLocation=$event" [attr.data-isDownBtn]=true
                    [attr.aria-expanded]="countrySwitch?true:false" [attr.aria-activedescendant]="arrowkeyLocation"
                    (keyup.enter)="arrowkeyLocation=arrowkeyLocation==-1?0:arrowkeyLocation;
                    searchCountrylist.value=countrySearch[arrowkeyLocation].Name;countrydata=countrySearch[arrowkeyLocation].Name;
                    appendCountry(countrySearch[arrowkeyLocation].Name,countrySearch[arrowkeyLocation],true, arrowkeyLocation);countrySwitch=false;arrowkeyLocation=0"
                    (keydown)="countrySwitch=true" [attr.data-arrayMaxLength]="countrySearch?.length"
                    (input)="countrySwitch=true;arrowkeyLocation=0"
                    (intialLoadData)="countrySwitch=true;callTempCountry();arrowkeyLocation=countrydata?-1:0"
                    matTooltip="{{searchCountrylist.value}}" (keydown.Tab)="countryclose()">
                    <span class="mdi mdi-magnify" *ngIf="countrySwitch || countryName ==''"></span>
                    <span class="mdi mdi-close auto-close"
                    (click)="clearCountry();arrowkeyLocation=0;countryName=''"
                    *ngIf="!countrySwitch && countryId!==''"></span>
                </div>

                <div
                  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm  border-right  float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                  *ngIf="countrySwitch" [attr.focus]="leadDetailsForm.value.country && countrySwitch">
                  <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                    <span class="w-100 z-ind-9 float-left bg-white">
                      <ul class=" list-group color-azure  sort-dropdown mr2" role="listbox"
                        [ngClass]="{'loader-search':isCountryLoading}">
                        <li id="{{i}}" tabindex="0" role="option" [class.active]="i==arrowkeyLocation"
                          aria-disabled="false"
                          (click)="searchCountrylist.value=item.Name;countrydata=item.Name;appendCountry(item.Name, item,true, arrowkeyLocation)"
                          class="list-group-item " role="option"
                          [ngClass]="service.chatBot ? 'list-DA-cap' : 'list-name'"
                          *ngFor="let item of countrySearch ;let i = index" matTooltip="{{item.Name}}">{{item.Name}}
                        </li>
                        <li class="d-block list-name h-40 p-10"
                          *ngIf="(countrySearch |filter:leadDetailsForm.value.country)?.length == 0 && !isCountryLoading">
                          No record found </li>
                      </ul>
                    </span>
                  </perfect-scrollbar>
                </div>
              </div>
            </div>
            <!--country search box added-->

            <!-- Select DROPDOWN STARTS -->
            <div
              class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4  float-left  plb-60-20 mt-20-mob1 mobile-select-box">
              <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="CoversationType3"
                class="label-form" placeholder="Select enquiry type"> Enquiry type </label>
              <div class="customized-select">
                <span class="caret color-azure"></span>
                <select id="CoversationType3" role="listbox" (change)="appendEnquiryTypeMOb($event)"
                  aria-required="true" formControlName="enquiryType"
                  [ngClass]="{'error': f.enquiryType.invalid && (f.enquiryType.dirty || f.enquiryType.touched)}">
                  <option value="">Select enquiry type</option>
                  <option *ngFor="let item of enquiryType" [value]="item.Id" matTooltip="{{item.Value}}">{{item.Value}}
                  </option>
                </select>
              </div>
            </div>

            <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4  float-left  plb-60-20 mt-20-mob1 web-select-box">
              <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="CoversationType3"
                class="label-form" placeholder="Select enquiry type"> Enquiry type </label>
              <mat-form-field class="col-12 no_pad float-left">
                <mat-label>Enquiry type</mat-label>
                <mat-select aria-label="{{'Enquiry type' + enquiryTypeAria}}" disableOptionCentering
                  panelClass="Select-panel-class" (selectionChange)="appendEnquiryType($event)" class="select-focus"
                  formControlName="enquiryType"
                  [ngClass]="{'error': f.enquiryType.invalid && (f.enquiryType.dirty || f.enquiryType.touched)}">
                  <mat-option value="">Select enquiry type</mat-option>
                  <mat-option *ngFor="let item of enquiryType" [value]="item.Id" matTooltip="{{item.Value}}">
                    {{item.Value}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <!--new-->
            <!--new search box based on lead source-->
            <div
              class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4  float-left  cust_autoComplete pos-rel plb-60-20 mb-1">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName"
                (clickOutside)="Leadallianceclose()">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad label-form "
                  for="allianceAccount">
                  Alliance account
                  <span *ngIf="RequestAlliance" class="required"> * </span>
                </label>
                <div class="pos-rel w-100 float-left no_pad">
                  <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                    #searcAlliancelist id="ConversationName" name="allianceName" formControlName="allianceAccount"
                    placeholder=" Search alliance account" autocomplete="off" type="text" role="combobox"
                    appKeyListControl [dataManipulate]=true (arrowDown)="arrowkeyLocation=$event"
                    aria-autocomplete="list" aria-owns="read" [attr.data-isDownBtn]=true
                    [attr.data-selectedvalue]="alliancedata" [attr.aria-expanded]="allianceAccountSwitch?true:false"
                    [attr.aria-activedescendant]="arrowkeyLocation"
                    [attr.data-arrayMaxLength]="AllianceAccountArr?.length" 
                    (keyup.enter)="arrowkeyLocation=arrowkeyLocation==-1?0:arrowkeyLocation;
                    searcAlliancelist.value=AllianceAccountArr[arrowkeyLocation].Name;
                    alliancedata=AllianceAccountArr[arrowkeyLocation].Name;
                    appendalliance(AllianceAccountArr[arrowkeyLocation].Name,AllianceAccountArr[arrowkeyLocation],true, arrowkeyLocation);
                    allianceAccountSwitch=false;arrowkeyLocation=0" (keydown)="allianceAccountSwitch=true"
                    (input)="allianceAccountSwitch=true;arrowkeyLocation=0"
                    (intialLoadData)="allianceAccountSwitch=true;callTempAlliance();arrowkeyLocation=alliancedata?-1:0"
                    [ngClass]="{'error': f.allianceAccount.invalid && f.allianceAccount.touched && RequestAlliance}"
                    [required]="RequestAlliance" matTooltip="{{searcAlliancelist.value}}" aria-required="RequestAlliance"
                    (keydown.Tab)="Leadallianceclose()">
                  <p *ngIf="f.allianceAccount.touched && !f.allianceAccount.valid && RequestAlliance"
                    class="error-message top-40">
                    Search alliance account </p>
                    <span class="mdi mdi-magnify" *ngIf="allianceAccountSwitch || AllianceName ==''"></span>
                    <span class="mdi mdi-close auto-close"
                    (click)="clearAlliance();arrowkeyLocation=0;AllianceName=''"
                    *ngIf="!allianceAccountSwitch && AllianceName!==''"></span>
                </div>

                <div
                  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm  border-right  float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                  *ngIf="allianceAccountSwitch"
                  [attr.focus]="leadDetailsForm.value.allianceAccount && allianceAccountSwitch">
                  <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                    <span class="w-100 z-ind-9 float-left bg-white">
                      <ul class=" list-group color-azure  sort-dropdown mr2" role="listbox"
                        [ngClass]="{'loader-search':isAllianceLoader}">
                        <li id="{{i}}" tabindex="0" role="option" [class.active]="i==arrowkeyLocation"
                          aria-disabled="false"
                          (click)="searcAlliancelist.value=item.Name;alliancedata=item.Name;appendalliance(item.Name,item,true,arrowkeyLocation)"
                          class="list-group-item " role="option"
                          [ngClass]="service.chatBot ? 'list-DA-cap' : 'list-name'"
                          *ngFor="let item of AllianceAccountArr;let i=index" matTooltip="{{item.Name}}">{{item.Name}}
                        </li>
                        <li class="d-block list-name h-40 p-10"
                          *ngIf="(AllianceAccountArr |filter:leadDetailsForm.value.allianceAccount)?.length == 0 && !isAllianceLoader">
                          No record found </li>
                      </ul>
                    </span>
                  </perfect-scrollbar>
                  <span class="db-search"
                    (click)="openadvancetabs('allianceSearch',AllianceAccountArr, f.allianceAccount.value)">
                    <button id="{{AllianceAccountArr?.length+1}}" role="option" tabindex="0" aria-disabled="false"
                      type="button" class="button-search"
                      [class.active]="AllianceAccountArr?.length+1 == arrowkeyLocation">
                      <span class="mdi mdi-file-outline"></span> Advance look up
                    </button>
                  </span>
                </div>
              </div>
            </div>
            <!--lead originator auto complete starts-->
            <div
              class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-4 plb-60-20  float-left  cust_autoComplete pos-rel">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="contactNameorigin"
                  class="label-form">
                  Lead originator
                </label>
                <!-- <span class="required">*</span> -->
                <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 disable-input"
                  id="contactNameorigin" formControlName="leadOriginator" aria-required="true" name="contactNameorigin" type="text"
                  placeholder="Lead originator">
              </div>
              <!-- <perfect-scrollbar style="max-height:200px;">
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad selected-contact">
                  <div
                    class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  mt-10 no_pad pad-10-lead mar-top10">
                    <div class="float-left naming-tags child-middle bg-azure">
                      <span class="initials">{{wiproSolutionData(Orinator) | firstWord | uppercase}}</span>
                    </div>
                    <label for="inti_name" class="float-left name w-80">
                      <span class="d-block list-name ellipses" matTooltip="{{Orinator}}">{{Orinator}}</span>
                    </label>
                  </div>
                </div>
              </perfect-scrollbar> -->
            </div>
            <!--lead originator auto complete ends-->
            <!--lead owner auto complete starts-->
            <div
              class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-4 plb-60-20 float-left  cust_autoComplete pos-rel">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="contactNameowner"
                  class="label-form" matTooltip="Select the name of the user who should be assigned ownership of the lead">
                  Lead owner
                  <span class="required">*</span>
                </label>
                <div class="pos-rel w-100 float-left no_pad">
                  <input 
                    class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input" 
                    #OwnerList
                    id="contactNameowner" 
                    name="contactNameowner" 
                    type="text" 
                    formControlName="leadOwner"
                    placeholder="Search lead owner" 
                    aria-autocomplete="list"
                    autocomplete="off" 
                    aria-owns="read"
                    aria-required="true" 
                    appKeyListControl [dataManipulate]=true 
                    [attr.data-selectedvalue]="Owner"
                    (arrowDown)="arrowkeyLocation=$event" 
                    [attr.aria-expanded]="contactNameSwitchowner?true:false"
                    [attr.aria-activedescendant]="arrowkeyLocation"
                    [attr.data-arrayMaxLength]="wiproContactowner?.length"
                    (input)="contactNameSwitchowner=true;arrowkeyLocation=0"
                    (intialLoadData)="contactNameSwitchowner=true;callTempOwner();arrowkeyLocation=Owner?-1:0" 
                    (keyup.enter)="arrowkeyLocation=arrowkeyLocation==-1?0:arrowkeyLocation;
                    OwnerList.value=wiproContactowner[arrowkeyLocation].FullName;Owner=wiproContactowner[arrowkeyLocation].FullName;
                       appendOwner(wiproContactowner[arrowkeyLocation].FullName,wiproContactowner[arrowkeyLocation],true, arrowkeyLocation);
                       contactNameSwitchowner=false;arrowkeyLocation=0" 
                    (keydown)="contactNameSwitchowner=true"
                    (clickOutside)="contactNamecloseowner()" 
                    [readonly]="IsOwnerChildLead"
                    matTooltip="{{OwnerList.value}}" 
                    (keydown.Tab)="contactNamecloseowner()"
                    [ngClass]="{'error': f.leadOwner.invalid && (f.leadOwner.dirty || f.leadOwner.touched)}">
                  <p *ngIf="f.leadOwner.touched && !f.leadOwner.valid" class="error-message top-40"> Search lead
                    owner </p>
                    <span class="mdi mdi-magnify" *ngIf="contactNameSwitchowner || leadOwnerName =='' "></span>
                    <span class="mdi mdi-close auto-close"
                    (click)="clearLeadOwner();arrowkeyLocation=0;leadOwnerName=''"
                    *ngIf="!contactNameSwitchowner && leadOwnerId!==''"></span>
                </div>
                <div
                  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm z-ind-9 float-left no_pad suggestion-box pos-abs border-bottom-4 top64 standard-border color-azure"
                  *ngIf="contactNameSwitchowner && !IsOwnerChildLead"
                  [attr.focus]="leadDetailsForm.value.leadOwner && contactNameSwitchowner">
                  <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                    <span class="w-100 z-ind-9 float-left bg-white">
                      <ul class=" list-group mr2 sort-dropdown" role="listbox" id="read"
                        [ngClass]="{'loader-search':isLeadOwnerLoader}">

                        <li id="{{i}}" tabindex="0" role="option" class="list-group-item h-50 p-4-10 "
                          [class.active]="i == arrowkeyLocation"
                          *ngFor="let item of wiproContactowner;let i=index"
                          (click)="OwnerList.value=item.FullName;appendOwner(item.FullName, item,true, i)">
                          <div class="float-left naming-tags child-middle bg-azure">
                            <span class="initials">{{wiproSolutionData(item.FullName) | firstWord | uppercase}}</span>
                          </div>
                          <label for="inti_name" class="float-left name " [ngClass]="item.value?'wid-55':'w-80'">
                            <span class="d-block  ellipses" [ngClass]="item.value?'list-name-btnkey':'list-name'"
                              matTooltip="{{item.FullName}}">{{item.FullName}}</span>
                          </label>
                          <!-- <span class="btn-key" *ngIf="item.value"> Key </span> -->
                          <!-- <span role="button" tabindex="0" aria-label="delete"
                           class="mdi mdi-close close-lead float-right cp pos-abs top10" (click)="delinkLeadOwner(item,i)"></span> -->
                        </li>
                        <li class="d-block list-name h-40 p-10"
                          *ngIf="(wiproContactowner |filter:leadDetailsForm.value.leadOwner)?.length == 0 && !isLeadOwnerLoader">
                          No record found </li>
                      </ul>
                    </span>
                  </perfect-scrollbar>
                  <span class="db-search" (click)="openadvancetabs('ownerSearch',wiproContactowner, f.leadOwner.value)">
                    <button id="{{wiproContactowner?.length+1}}" role="option" tabindex="0" aria-disabled="false"
                      type="button" class="button-search"
                      [class.active]="wiproContactowner?.length+1 == arrowkeyLocation">
                      <span class="mdi mdi-file-outline"></span> Advance look up
                    </button>
                  </span>
                </div>
              </div>
              <!-- <perfect-scrollbar style="max-height:200px;">
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad selected-contact">
                  <div
                    class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  mt-10 no_pad pad-10-lead mar-top10"
                    *ngFor="let item of selectedContactowner">
                    <div class="float-left naming-tags child-middle bg-azure">
                      <span class="initials">{{wiproSolutionData(item.FullName) | firstWord | uppercase}}</span>
                    </div>
                    <label for="inti_name" class="float-left name w-80">
                      <span class="d-block list-name ellipses" matTooltip="{{item.FullName}}">{{item.FullName}}</span>
                    </label>
                  </div>
                </div>
              </perfect-scrollbar> -->
            </div>
            <!--lead owner auto complete ends-->

          </div>
          <div class="col-12 col-sm-12 col-md-12 col-lg-4 col-xl-4 float-left no_pad">
            <div class="col-12 col-sm-12 col-md-6 col-lg-12 col-xl-12 float-left mt22 plb-60-20 ">
              <div
                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad label-form mbl-martop-20 pb16"
                id="keycon1">
                Solution involved
              </div>
              <mat-radio-group aria-labelledby="keycon" formControlName="WiproSolutionToggle"
                (change)="wiprosolutionevent()">
                <mat-radio-button [value]=true class="pr30">
                  Yes</mat-radio-button>
                <mat-radio-button [value]=false>No
                </mat-radio-button>
              </mat-radio-group>
            </div>

            <!--wipro solution lookup feild -->
            <div class="col-12 col-sm-12 col-md-6 col-lg-12 col-xl-12  float-left  cust_autoComplete pos-rel plb-60-20 mb20"
              *ngIf="iswiprosolution">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName"
                (clickOutside)="wiproSoltionclose()">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="contactName"
                  class="label-form"> Wipro solutions
                  <span class="mdi mdi-magnify" *ngIf="iswiprosolution">*</span>
                </label>
                <div class="pos-rel w-100 float-left no_pad">
                  <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                    #wiprosearchlist id="contactName" name="contactName" formControlName="WiproSolutions"
                    placeholder="Search wipro solutions" type="text" role="combobox" aria-autocomplete="list"
                    aria-owns="read" autocomplete="off" appKeyListControl [dataManipulate]=true
                    (arrowDown)="arrowkeyLocation=$event" [attr.data-selectedvalue]=""
                    [attr.aria-expanded]="wiproSolustionSwitch?true:false"
                    [attr.aria-activedescendant]="arrowkeyLocation"
                    [attr.data-arrayMaxLength]="wiproSolutionsearch?.length" (keyup.enter)="wiprosearchlist.value=wiproSolutionsearch[arrowkeyLocation].Name;
                    appendWiproSolutions(wiproSolutionsearch[arrowkeyLocation].Name, wiproSolutionsearch[arrowkeyLocation], true,true,arrowkeyLocation);
                    wiproSolustionSwitch=false;arrowkeyLocation=0" (keydown)="wiproSolustionSwitch=true"
                    (input)="wiproSolustionSwitch=true;arrowkeyLocation=0"
                    (intialLoadData)="wiproSolustionSwitch=true;callTempWipro();arrowkeyLocation=0"
                    matTooltip="{{wiprosearchlist.value}}"
                    [ngClass]="{'error': f.WiproSolutions.invalid && f.WiproSolutions.touched && iswiprosolution }"
                    (keydown.Tab)="wiproSoltionclose()">
                  <p *ngIf="f.WiproSolutions.touched && !f.WiproSolutions.valid && iswiprosolution"
                    class="error-message top-40">
                    Search wipro solutions </p>
                  <span class="mdi mdi-magnify"></span>
                </div>

                <div
                  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm  float-left no_pad suggestion-box z-ind-9999 pos-abs border-bottom-4 top64 standard-border color-azure  bg-white"
                  *ngIf="wiproSolustionSwitch && iswiprosolution"
                  [attr.focus]="leadDetailsForm.value.WiproSolutions && wiproSolustionSwitch">
                  <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                    <span class="w-100 z-ind-9 float-left bg-white">
                      <ul class=" list-group mr2 sort-dropdown" role="listbox"
                        [ngClass]="{'loader-search':iswiproSolutionLoader}">
                        <li id="{{i}}" tabindex="0" role="option" [class.active]="i==arrowkeyLocation"
                          aria-disabled="false" class="list-group-item h-50 p-4-10 "
                          [ngClass]="service.chatBot ? 'list-DA-cap' : 'list-name'"
                          *ngFor="let item of wiproSolutionsearch ; let i=index"
                          (click)="appendWiproSolutions(item.Name,item, true, arrowkeyLocation)">
                          <div class="float-left naming-tags child-middle bg-azure"
                            [ngStyle]="{'backgroundColor': (i%2 == 0) ? 'red' : 'green'}">
                            <span class="initials">{{wiproSolutionData(item.Name) | firstWord | uppercase }}</span>
                          </div>
                          <label for="inti_name" class="float-left name-sol w-80">
                            <span class="d-block list-name ellipses"
                              matTooltip="{{item.Name | titlecase}}">{{item.Name | titlecase}}</span>
                            <!-- <span class="d-block sub-list">{{item.Designation}}</span> -->
                          </label>
                        </li>
                        <li class="d-block list-name h-40 p-10 bg-white"
                          *ngIf="(wiproSolutionsearch |filter:leadDetailsForm.value.WiproSolutions)?.length == 0 && !iswiproSolutionLoader">
                          No record found </li>
                      </ul>
                    </span>
                  </perfect-scrollbar>
                  <span class="db-search"
                    (click)="openadvancetabs('wiproSoluSearch',WiproSolAdvanceData, f.WiproSolutions.value)">
                    <button id="{{WiproSolAdvanceData?.length+1}}" role="option" tabindex="0" aria-disabled="false"
                      type="button" class="button-search"
                      [class.active]="WiproSolAdvanceData?.length+1 == arrowkeyLocation">
                      <span class="mdi mdi-file-outline"></span> Advance look up
                    </button>
                  </span>
                </div>
              </div>
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad selected-contact">
                <perfect-scrollbar style="max-height:300px" class="z-ind-9">
                  <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  mt-10 p-4-10"
                    *ngFor="let item of selectedWiproSolution; let i=index">
                    <div class="float-left naming-tags child-middle bg-azure"
                      [ngStyle]="{'backgroundColor': (i%2 == 0) ? 'blue' : 'red'}">
                      <span class="initials">{{wiproSolutionData(item.Name) | firstWord | uppercase  }}</span>
                    </div>
                    <label for="inti_name" class="float-left name-sol w-80">
                      <span class="d-block ellipses" [ngClass]="service.chatBot ? 'list-DA-cap' : 'list-name'"
                        matTooltip="{{item.Name | titlecase}}">{{item.Name | titlecase}}</span>
                      <!-- <span class="d-block sub-list">{{item.Designation}}</span> -->
                    </label>
                    <span class="mdi mdi-close close-lead float-right cp" (click)="delinkWiproSolutions(item)"></span>
                  </div>
                </perfect-scrollbar>
              </div>
            </div>
          </div>

          <div class="col-12 col-sm-12 col-md-12 col-lg-8 col-xl-8 float-left no_pad">
            <!--new search box based on lead source-->
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt22 mt-20-mob1 plb-60-20">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad label-form pb16" id="keycon">
                Service line involved
              </div>
              <mat-radio-group aria-labelledby="keycon" formControlName="serviceLineToggle"
                [disabled]="sbuId != ''? false:true" (change)="servicelinesevent(false)">
                <mat-radio-button [value]=true class="pr30">
                  Yes</mat-radio-button>
                <mat-radio-button [value]=false>No
                </mat-radio-button>
              </mat-radio-group>
            </div>
            <!--service line table crud starts-->
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  plb-60-20 servicetab"
              *ngIf="isServicelines">
              <div class="col-12 float-left color-back no_pad">
                <button class="mdi mdi-chevron-down float-left btn-none color-azure mobile-toggle"
                  [ngClass]="toggletable?'':'mdi-chevron-up'" (click)="toggletable =!toggletable"></button>
                <h2 class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 float-left no_pad heading-level-three pad-top-8">
                  Service lines ({{ServiceTable?.length}})</h2>
                <button type="button" class="no_pad float-right addAccountBtns mb10"
                  (click)="addrow($event);alliance=false">+
                  <span class="mob-add-txt">Add</span>
                </button>
              </div>
              <div class="col-12 no_pad float-left accord_s table-toggle" id="servicelinelead"
                [ngClass]="toggletable?'active':''">
                <div class="col-sm-12 no_pad accbody overhidden">
                  <perfect-scrollbar class="mobview">
                    <table
                      class="col-sm-12 no_pad allianceTable tablAlliance crud-table businessPanelTable allianceTableEdit mobview1">
                      <thead>
                        <tr class="display_flex cp servicelineheight">
                          <th class="width4 customized-checkbox table-checkbx">
                            <!-- <mat-checkbox class="pad10" aria-label="select all" (change)="selectAll()"></mat-checkbox> -->
                          </th>

                          <th [attr.data-label]="item.title" *ngFor="let item of servicelineTable_Data">{{item.title}}
                          </th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr class="vertical" *ngFor="let line of ServiceTable; let i=index">
                          <td class="width4 customized-checkbox table-checkbx">
                            <!-- <mat-checkbox class="pad10" (change)="checkIfAllSelected(i)">
                      </mat-checkbox> -->
                          </td>

                          <td *ngFor="let headerItem of servicelineTable_Data; let j = index"
                            [attr.data-label]="headerItem.title">
                            <!-- <div role="button" class="cp row_ellipses" tabindex="0" *ngIf="j==0 && IscheckBoxRequired">
                        <mat-checkbox class="float-left padright10 matcheck" (change)="checkIfAllSelected(i)">
                        </mat-checkbox>
                      </div> -->
                            <!--Inline control type customization starts here-->
                            <div class="editableAutoComplete CompanyName"
                              *ngIf="headerItem.controltype == 'autocomplete'">
                              <div class="col-12 no_pad float-left">
                                <div
                                  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left no_pad cust_autoComplete pos-rel">
                                  <div
                                    (clickOutside)="line[headerItem.closePopUp] = false;searchitem='';searchPractice=''; searchSlbdm='';auto.value=line[headerItem.name].Name"
                                    class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName">
                                    <input appKeyListControl (arrowDown)="arrowkeyLocation=$event"
                                      (keyup.enter)="auto.value=headerItem.serviceData[arrowkeyLocation].Name;sldata=headerItem.serviceData[arrowkeyLocation].Name;
                                      appendservicelineauto(headerItem.serviceData[arrowkeyLocation],i,headerItem,line);line[headerItem.closePopUp] = false;"
                                      [attr.data-arrayMaxLength]="headerItem.serviceData?.length" role="combobox"
                                      aria-autocomplete="list"
                                      [attr.aria-expanded]="line[headerItem.closePopUp]?true:false" aria-owns="read"
                                      [attr.aria-activedescendant]="arrowkeyLocation" id="autocNormal{{i}}{{j}}"
                                      class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left h-40 label-input"
                                      name="servicelineauto" autocomplete="off" type="text"
                                      placeholder="{{headerItem.place}}"
                                      (input)="onKeyUp($event,line,headerItem, auto.value,false);line[headerItem.closePopUp] = true"
                                      #auto value="{{line[headerItem.name].Name}}"
                                      (click)="line[headerItem.closePopUp] = true;getServiceLineData($event,line,headerItem, auto.value,true)"
                                      [ngClass]="(line[headerItem.name].IsError) && headerItem.isRequired ?'error':''"
                                      [attr.data-selectedvalue]="sldata"
                                      (refinejunkvalue)="sldata='';ResetSlbdm(i,headerItem);"
                                      matTooltip="{{auto.value}}">
                                    <p *ngIf="(line[headerItem.name].IsError) && headerItem.isRequired"
                                      class="error-message top-40">{{headerItem.ErrMsg}}</p>
                                    <span class="mdi mdi-magnify"></span>

                                    <div
                                      class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-right  border-btm z-ind-9999 float-left no_pad suggestion-box pos-abs border-bottom-4 top40 standard-border color-azure bg-white"
                                      *ngIf="line[headerItem.closePopUp]" [attr.focus]="line[headerItem.closePopUp]">
                                      <perfect-scrollbar style="max-height:100px" class="z-ind-9">
                                        <span class="w-100 z-ind-9 float-left bg-white">
                                          <ul class=" list-group mr2  sort-dropdown " role="listbox" id="read"
                                            [ngClass]="{'loader-search':isServicelineLoader}">
                                            <li id="{{j}}" class="list-group-item h-50 p-5-10 "
                                              (click)="auto.value=item.Name;sldata=item.Name;appendservicelineauto(item,i,headerItem,line,true);line[headerItem.closePopUp]=false"
                                              *ngFor="let item of headerItem.serviceData;let j = index"
                                              [class.active]="j==arrowkeyLocation" aria-disabled="false" tabindex="0"
                                              role="option">
                                              <label for="inti_name" class="float-left name w-80">
                                                <span class="d-block list-name ellipses"
                                                  matTooltip="{{item.Name}}">{{item.Name}}</span>
                                                <span *ngIf="headerItem.name == 'slbdm'" class="sub-list d-block">
                                                  {{item.ADID}} | {{item.Email}}</span>
                                              </label>
                                            </li>
                                            <li class="d-block list-name h-40 p-10"
                                              *ngIf="(headerItem.serviceData)?.length == 0 && !isServicelineLoader">
                                              No record found </li>
                                          </ul>
                                        </span>
                                      </perfect-scrollbar>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </td>
                          <td>
                            <div class="button_div mobile-align commonActionBlock">
                              <div class="w-100 mobile-align pos-rel" *ngIf="ServiceTable?.length>1">
                                <button type="button" class="mdi mdi-delete float-right deleteColumn"
                                  aria-label="delete row" (click)="deleterow(line)">
                                </button>
                                <span class="mobile-icon-text">Delete</span>
                              </div>
                            </div>
                          </td>
                        </tr>
                      </tbody>

                    </table>
                  </perfect-scrollbar>
                  <div *ngIf="!leadDetailsForm.valid" class="tableOverlay"></div>
                </div>
              </div>

            </div>
            <!--service line table crud ends-->
          </div>

        </div>
        <!-- Select DROPDOWN ENDS -->
        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 card-content float-left no_pad">
          <div class="divider col-12 no_pad float-left" *ngIf="!isMobileDevice"></div>
          <div class="col-12 col-sm-12 col-md-12 col-lg-8 col-xl-8 float-left  customized-input plb-60-20 mt20 mb20">
            <h2 class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6 float-left no_pad heading-level-three pad-top-8">
              Lead description
              <span class="label-form" *ngIf="textValue.value?.length == 0"> (2000 characters)</span>
              <span class="label-form" *ngIf="textValue.value?.length > 0 && textValue.value?.length < 1999">
                ({{ 2000 - textValue.value?.length}} characters left)</span>
              <span class="label-form" *ngIf="textValue.value?.length === 1999 || textValue.value?.length === 2000">
                ({{ 2000 - textValue.value?.length}} character left)</span>
            </h2>
            <div class="pos-rel w-100 float-left mt10 no_pad">
              <textarea placeholder="Enter description" #textValue rows="5" id="description" maxlength="2000"
              specialIsAlphaNumeric [attr.data-type]="'textareaLength'"
                (change)="textAreaaChange()" formControlName="description"></textarea>
            </div>
            <p *ngIf="descriptionLength" class="error-modal col-12 float-left">Description cannot exceed 2000 characters
            </p>
          </div>

          <!-- April 1 -->
          <div class="col-12 col-sm-12 col-md-12 col-lg-4 col-xl-4 float-left no_pad ">
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad mt20">
              <h3 class="heading-level-three mt10 d-inline-flex">Attachments </h3>
              <input type="file" accept="/*" id="attach" multiple (change)="fileChangeEvent($event)" [disabled]="isMobileDevice" 
                class="new-inputattach" style="display: none;" #addLeadFileInput (click)="addLeadFileInput.value = null"
                value="" name="files[]">
              <label class="mdi mdi-attachment new-attachment" for="attach" [ngClass]="isMobileDevice ? 'disabled-control border-grey' : ''">Attach files</label>
            </div>
            <span class="float-left attachment-type" *ngIf="!isMobileDevice">File format supported
              <span class="mdi mdi-information-outline cp web-buttons"
                matTooltip="File format supported (PDF, XML, ZIP, MP3, MP4, PNG, JPEG, MPEG, GIF, TXT, DOCS, XLSX), file size allowed upto 5mb"></span>
            </span>
            <!-- <span class="attachment-type col-12 no_pad float-left mt10" *ngIf="!isMobileDevice">File format supported (PDF, XML, ZIP, MP3, MP4, PNG, JPEG, MPEG, GIF, TXT, DOCS, XLSX), file size allowed upto 5mb</span> -->
            <section class="float-left w-100 padd-top-btm20 mt10" *ngIf="!isMobileDevice">
              <span class="float-left attachment"> {{contactLeadService.attachmentList?.length}} Attachments </span>
              <button type="button" class="btn-none float-right download"
                *ngIf="contactLeadService.attachmentList?.length>0" (click)="downloadAll()">
                Download all </button>
            </section>
            <!-- <perfect-scrollbar style="max-height: 200px"> -->
            <div class="col-12 float-left pl0 height-200" [ngClass]="addcommmentpopover?'min-230':''" *ngIf="contactLeadService.attachmentList?.length>0"
              slimScroll>
              <section class="float-left col-12 no_pad mt-10"
                *ngFor="let item of contactLeadService.attachmentList;let i=index">

                <div class="col-xl-7 col-lg-7 col-md-6 col-1 pl-0 float-left download-uploaded-file  d-flex">
                  <div class="float-left naming-tags-square pad-7 child-middle bg-azure">
                    <span class="initials mdi mdi-file-document font-20" id="inti_name-kb"></span>
                    <span class="initials mdi mdi-download font-20" role="button" tabindex="0"
                      aria-label="Download file" id="inti_name-kb1" (click)="downloadFile(i)"
                      matTooltip="Download file"></span>
                  </div>
                  <label for="inti_name-kb "
                    class="float-left pos-rel pl10 name-sq padLR-10 border-std color-azure mx-width-90per">
                    <div class="tag color-label_gray hover-attach padding-left5 ellipses w-160"
                      matTooltip="{{item.downloadFileName}}" (click)="downloadFile(i)">
                      {{item.downloadFileName}} </div>
                    <span class="float-right mdi mdi-window-close color-azure onone cp" role="button" tabindex="0"
                      (click)="delinkAttach(item.downloadFileName)">
                      <span class="sr-only">Remove attachment
                      </span>
                    </span>
                  </label>
                </div>
                <div class="float-right">
                  <button *ngIf="item.Comments[0].Description=='' " type="button" matTooltip="Add comment"
                    class=" primary-button attach-btn d-flex align-items-center float-right commets "
                    (click)="onAddCommentPopup(i)">
                    <span class="mdi mdi-comment-plus-outline icon "> </span>
                  </button>
                  <button *ngIf="item.Comments[0].Description!=''" type="button" matTooltip="View comment"
                    class=" primary-button attach-btn d-flex align-items-center float-right commets "
                    (click)="onViewCommentPopUp(i)">
                    <span class="mdi mdi-comment-processing-outline icon "> </span>
                  </button>
                </div>
                <!--------------------------add comment popover starts------------------------------------>
                <div class="addcomment-popover" *ngIf="addcommmentpopover && i===commentindex">
                  <span class="caret-popover"></span>
                  <div class="col-12 float-left  no_pad popup-container ">

                    <div class="col-12 float-left no_pad container-dial">
                      <div class="col-12 float-left  no_pad ">
                        <span class="col-12 col-md-4 col-xl-4 float-left  no_pad popup-hd-txt" mat-dialog-title>
                          Comments</span>
                        <span class="label-form" *ngIf="textValue.value.length == 0"> (2000 characters)</span>
                        <span class="label-form" *ngIf="textValue.value.length > 0 && textValue.value.length < 1999">
                          ({{ 2000 - textValue.value.length}} characters left)</span>
                        <span class="label-form"
                          *ngIf="textValue.value.length === 1999 || textValue.value.length === 2000">
                          ({{ 2000 - textValue.value.length}} character left)</span>
                        <div class="pos-rel float-left no_pad w-100 mt10">
                          <textarea id="commts{{i}}" maxlength="2000" #textValue matTooltip="{{textValue.value}}"
                          specialIsAlphaNumeric [attr.data-type]="'textareaLength'"
                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left text-area-content" rows="5"
                            placeholder="Enter your comment" name="addedtext" formControlName="comments"></textarea>

                        </div>
                      </div>
                      <div class="col-12 float-left no_pad">
                        <div class="col-12 float-left no_pad d-flex ">
                          <button class=" float-left btndef-none no_pad discard-btn" aria-lebel="cancel"
                            (click)="closepopover()">Cancel</button>
                          <button class="float-left btndef-none no_pad confrm-btn" (click)="savepopover(i)"
                            type="button" aria-label="Save">Save</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!--------------------------add comment popover ends------------------------------------>
              </section>
            </div>
            <!-- </perfect-scrollbar> -->

          </div>
          <!-- April 1 -->
        </div>
        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 card-content float-left no_pad">
          <div class="divider col-12 no_pad float-left" [ngClass]="isMobileDevice ? 'mt40':''"></div>
          <div class="col-12 col-sm-12 col-md-12 col-lg-8 col-xl-8 float-left  customized-input no_pad mt30">
            <h2 class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6 float-left no_pad heading-level-three pad-top-8">Links
            </h2>

          </div>
          <div class="col-12 float-left no_pad mt10">
            <!--converstion lead autocomplete start-->
            <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 ">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName"
                (clickOutside)="ActivityGoupclose()">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                  for="ConversationNamelead" class="label-form">
                  Linked meeting activities </label>
                <span class="float-right pos-abs right-0">({{selectedConversation?.length}})</span>
                <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input" #activityList
                  id="ConversationNamelead" name="ConversationNamelead" formControlName="activityGroup"
                  placeholder="Search linked meeting activities" type="text" role="combobox" aria-autocomplete="list"
                  autocomplete="off" aria-owns="read" appKeyListControl [dataManipulate]=true
                  [attr.data-selectedvalue]="" [attr.aria-expanded]="ConversationNameSwitchlead?true:false"
                  [attr.aria-activedescendant]="arrowkeyLocation" [attr.disabled]="disableActivityGroup?'disabled':null"
                  (arrowDown)="arrowkeyLocation=$event" (keyup.enter)="activityList.value=Conversationslead[arrowkeyLocation].Name;
                  appendActivityGroup(Conversationslead[arrowkeyLocation].Name,Conversationslead[arrowkeyLocation],true,true, arrowkeyLocation);
                  ConversationNameSwitchlead=false;arrowkeyLocation=0" (keydown)="wiproSolustionSwitch=true"
                  [attr.data-arrayMaxLength]="Conversationslead?.length" [attr.data-isDownBtn]=true
                  (input)="ConversationNameSwitchlead=true;arrowkeyLocation=0"
                  (intialLoadData)="ConversationNameSwitchlead=true;callTempActivity();arrowkeyLocation=0"
                  (keydown.Tab)="ActivityGoupclose()" matTooltip="{{activityList.value}}">
                <span class="mdi mdi-magnify"></span>
                <div
                  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm  border-right  float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                  *ngIf="ConversationNameSwitchlead && !disableActivityGroup"
                  [attr.focus]="leadDetailsForm.value.activityGroup && ConversationNameSwitchlead">
                  <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                    <span class="w-100 z-ind-9 float-left bg-white">
                      <ul class=" list-group color-azure  sort-dropdown mr2" role="listbox" id="read"
                        [ngClass]="{'loader-search':isAcivityGroupLoader}">
                        <li id="{{i}}" tabindex="0" role="option" [class.active]="i==arrowkeyLocation"
                          aria-disabled="false"
                          (click)="appendActivityGroup(item.Name, item,true,true, arrowkeyLocation)"
                          class="list-group-item " role="option"
                          [ngClass]="service.chatBot ? 'list-DA-cap' : 'list-name'"
                          *ngFor="let item of Conversationslead;let i =index " matTooltip="{{item.Name}}">{{item.Name}}
                        </li>
                        <li class="d-block list-name h-40 p-10"
                          *ngIf="(Conversationslead |filter:leadDetailsForm.value.activityGroup)?.length == 0 && !isAcivityGroupLoader">
                          No record found </li>
                      </ul>
                    </span>
                  </perfect-scrollbar>
                  <span class="db-search"
                    (click)="openadvancetabs('activitySearch',ActivityAdvanceData, f.activityGroup.value )">
                    <button id="{{ActivityAdvanceData?.length+1}}" role="option" tabindex="0" aria-disabled="false"
                      type="button" class="button-search"
                      [class.active]="ActivityAdvanceData?.length+1 == arrowkeyLocation">
                      <span class="mdi mdi-file-outline"></span> Advance look up
                    </button>
                  </span>
                </div>
              </div>
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad selected-contact">
                <div class="scroll-lead" slimScroll>
                  <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left tagged-box mt-10 p-4-10 mr10"
                    *ngFor="let item of selectedConversation; let i=index">
                    <label for="inti_name" class="float-left name w-94">
                      <span class="d-block color-azure mr10 float-left cp ellipses w-100"
                        (click)="showFirstForm=true;service.LinkedNavigation(item, 'linkedactivity', 'L1'); setCurrentFormDetails()"
                        matTooltip="{{item.Name}}">{{item.Name}}</span>
                    </label>
                    <span role="button" tabindex="0" aria-label="delete"
                      class="mdi mdi-close close-lead float-right cp pos-abs " (click)="delinkConv(item, i)"></span>
                  </div>
                </div>
              </div>
            </div>
            <!--converstion lead autocomplete ends-->
            <!--converstion campaign autocomplete start-->
            <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 ">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName"
                (clickOutside)="CampaignClose()">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                  for="ConversationNamecamp" class="label-form">
                  Linked campaigns
                  <span *ngIf="requestCamp">*</span>
                </label>
                <span *ngIf="isCampaign">*</span>
                <span class="float-right pos-abs right-0">({{selectedCamp?.length}})</span>
                <div class="pos-rel w-100 float-left no_pad">
                  <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                    #campaignList id="ConversationNamecamp" name="ConversationNamecamp" type="text" role="combobox"
                    formControlName="campaign" placeholder="Search linked campaign" aria-autocomplete="list"
                    autocomplete="off" aria-owns="read" appKeyListControl [dataManipulate]=true
                    [attr.data-selectedvalue]="" [attr.data-isDownBtn]=true
                    [attr.aria-expanded]="ConversationNameSwitchcamp?true:false"
                    [attr.aria-activedescendant]="arrowkeyLocation" [attr.disabled]="disableCampaign?'disabled':null"
                    [attr.data-arrayMaxLength]="Conversationscamp?.length" (arrowDown)="arrowkeyLocation=$event"
                    (keyup.enter)="campaignList.value=Conversationscamp[arrowkeyLocation].Name;
                    appendCampaignGroup(Conversationscamp[arrowkeyLocation].Name,Conversationscamp[arrowkeyLocation],true,true, arrowkeyLocation);
                    ConversationNameSwitchcamp=false;arrowkeyLocation=0" (keydown)="ConversationNameSwitchcamp=true"
                    (input)="ConversationNameSwitchcamp=true;arrowkeyLocation=0"
                    (intialLoadData)="ConversationNameSwitchcamp=true;callTempCampaign();arrowkeyLocation=0"
                    matTooltip="{{campaignList.value}}" (keydown.Tab)="CampaignClose()"
                    [ngClass]="{'error': f.campaign.invalid && f.campaign.touched && requestCamp}">
                  <span class="mdi mdi-magnify"></span>
                  <p *ngIf="f.campaign.touched && !f.campaign.valid  && requestCamp" class="error-message top-40">
                    Search campaign </p>
                </div>
                <div
                  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm  border-right  float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                  *ngIf="ConversationNameSwitchcamp  && !disableCampaign"
                  [attr.focus]="leadDetailsForm.value.campaign && ConversationNameSwitchcamp">
                  <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                    <span class="w-100 z-ind-9 float-left bg-white">
                      <ul class=" list-group color-azure  sort-dropdown mr2" role="listbox"
                        [ngClass]="{'loader-search':isCampaignLoading}">
                        <li id="{{i}}" tabindex="0" role="option" [class.active]="i==arrowkeyLocation"
                          aria-disabled="false"
                          (click)="appendCampaignGroup(item.Name, item,true,true, arrowkeyLocation)"
                          class="list-group-item " role="option"
                          [ngClass]="service.chatBot ? 'list-DA-cap' : 'list-name'"
                          *ngFor="let item of Conversationscamp;let i = index" matTooltip="{{item.Name}}">{{item.Name}}
                        </li>
                        <li class="d-block list-name h-40 p-10"
                          *ngIf="Conversationscamp?.length == 0 && !isCampaignLoading"> No record found
                        </li>
                      </ul>
                    </span>
                  </perfect-scrollbar>
                  <span class="db-search"
                    (click)="openadvancetabs('campaignSearch',CampaignAdvanceData, f.campaign.value )">
                    <button id="{{CampaignAdvanceData?.length+1}}" role="option" tabindex="0" aria-disabled="false"
                      type="button" class="button-search"
                      [class.active]="CampaignAdvanceData?.length+1 == arrowkeyLocation">
                      <span class="mdi mdi-file-outline"></span> Advance look up
                    </button>
                  </span>
                </div>
              </div>
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad selected-contact">
                <div class="scroll-lead" slimScroll>
                  <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left tagged-box mt-10 p-4-10 mr10"
                    *ngFor="let item of selectedCamp; let i=index">
                    <label for="inti_name" class="float-left name w-94">
                      <span class="d-block color-azure mr10 float-left cp ellipses w-100"
                        (click)="showFirstForm=true;service.LinkedNavigation(item, 'linkedcampaign', 'L1'); setCurrentFormDetails()"
                        matTooltip="{{item?.Name}}">{{item?.Name}}</span>
                    </label>
                    <span role="button" tabindex="0" aria-label="delete"
                      class="mdi mdi-close close-lead float-right cp pos-abs " (click)="delinkCampaign(item,i)"></span>
                  </div>
                </div>
              </div>
            </div>
            <!--converstion campaign autocomplete ends-->
            <!--lead opportunity autocomplete start-->
            <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 ">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName"
                (clickOutside)="Oppotunityclose()">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                  for="ConversationNameoppo" class="label-form">
                  Linked opportunities </label>
                <span class="float-right pos-abs right-0">({{selectedOppertunity?.length}})</span>
                <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                  #opportunityList id="ConversationNameoppo" name="ConversationNameoppo" type="text" role="combobox"
                  formControlName="opportunity" placeholder="Search linked opportunities" autocomplete="off"
                  aria-owns="read" appKeyListControl [dataManipulate]=true [attr.data-selectedvalue]=""
                  [attr.data-isDownBtn]=true [attr.aria-activedescendant]="arrowkeyLocation"
                  [attr.aria-expanded]="ConversationNameSwitchoppo?true:false"
                  [attr.data-arrayMaxLength]="Conversationsoppo?.length"
                  [attr.disabled]="disableOpportunity?'disabled':null" (arrowDown)="arrowkeyLocation=$event"
                  (keyup.enter)="opportunityList.value=Conversationsoppo[arrowkeyLocation].Name;
                  appendOpportunityGroup(Conversationsoppo[arrowkeyLocation].Name,Conversationsoppo[arrowkeyLocation],true,true, arrowkeyLocation=0);
                  ConversationNameSwitchoppo=false;arrowkeyLocation=0" (keydown)="ConversationNameSwitchoppo=true"
                  (input)="ConversationNameSwitchoppo=true;arrowkeyLocation=0"
                  (intialLoadData)="ConversationNameSwitchoppo=true;callTempOpportunity();arrowkeyLocation=0"
                  aria-autocomplete="list" matTooltip="{{opportunityList.value}}" (keydown.Tab)="Oppotunityclose()">
                <span class="mdi mdi-magnify"></span>
                <div
                  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm  border-right  float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                  *ngIf="ConversationNameSwitchoppo && !disableOpportunity"
                  [attr.focus]="leadDetailsForm.value.opportunity && ConversationNameSwitchoppo">
                  <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                    <span class="w-100 z-ind-9 float-left bg-white">
                      <ul class=" list-group color-azure  sort-dropdown mr2" role="listbox"
                        [ngClass]="{'loader-search':isOpportunityLoader}">
                        <li class="list-group-item " [ngClass]="service.chatBot ? 'list-DA-cap' : 'list-name'"
                          role="option" id="{{i}}" tabindex="0" role="option" [class.active]="i==arrowkeyLocation"
                          aria-disabled="false"
                          (click)="appendOpportunityGroup(item.Title, item, i,true,true,arrowkeyLocation)"
                          *ngFor="let item of Conversationsoppo; let i=index" matTooltip="{{item.Name}}">{{item.Title}}
                        </li>
                        <li class="d-block list-name h-40 p-10"
                          *ngIf="(Conversationsoppo |filter:leadDetailsForm?.value?.opportunity)?.length == 0 && !isOpportunityLoader">
                          No record found </li>
                      </ul>
                    </span>
                  </perfect-scrollbar>
                  <span class="db-search"
                    (click)="openadvancetabs('oppoSearch',OppAdvanceData, f.opportunity.value)">
                    <button id="{{OppAdvanceData?.length+1}}" role="option" tabindex="0" aria-disabled="false"
                      type="button" class="button-search"
                      [class.active]="OppAdvanceData?.length+1 == arrowkeyLocation">
                      <span class="mdi mdi-file-outline"></span> Advance look up
                    </button>
                  </span>
                </div>
              </div>

              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad selected-contact">
                <div class="scroll-lead" slimScroll>
                  <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left tagged-box mt-10 p-4-10 mr10"
                    *ngFor="let item of selectedOppertunity; let i=index">
                    <label for="inti_name" class="float-left name w-94">
                      <span class="d-block color-azure mr10 float-left  ellipses w-100"
                      (click)="showFirstForm=true;service.LinkedNavigation(item,'linkedOppAndOrder'); setCurrentFormDetails()"
                        matTooltip="{{item.Title}}">{{item.Title}}</span>
                    </label>
                    <span role="button" tabindex="0" aria-label="delete"
                      class="mdi mdi-close close-lead float-right cp pos-abs " (click)="delinkOpp(item, i)"></span>
                  </div>
                </div>
              </div>

            </div>
            <!--lead opportunity autocomplete ends-->

          </div>
          <div class="col-12 float-left no_pad">
            <!--lead   Link AGPs  autocomplete start-->
            <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 ">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName"
                (clickOutside)="Agpclose()">
                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                  for="ConversationNameagp" class="label-form">
                  Linked AGP(s) </label>
                <span class="float-right pos-abs right-0">({{selectedAgp?.length}})</span>
                <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input" #apglist
                  id="ConversationNameagp" name="ConversationNameagp" autocomplete="off" type="text" role="combobox"
                  formControlName="link" placeholder="Search linked AGP" aria-autocomplete="list" aria-owns="read"
                  appKeyListControl [dataManipulate]=true (arrowDown)="arrowkeyLocation=$event"
                  [attr.data-selectedvalue]="" [attr.data-isDownBtn]=true
                  [attr.aria-expanded]="ConversationNameSwitchagp?true:false"
                  [attr.aria-activedescendant]="arrowkeyLocation" [attr.data-arrayMaxLength]="Conversationsagp?.length"
                  (input)="ConversationNameSwitchagp=true;arrowkeyLocation=0"
                  (intialLoadData)="ConversationNameSwitchagp=true;callTempAgp();arrowkeyLocation=0" (keyup.enter)="apglist.value=Conversationsagp[arrowkeyLocation].Name;
                  appendAgpGroup(Conversationsagp[arrowkeyLocation].Name,Conversationsagp[arrowkeyLocation],true, arrowkeyLocation);
                  ConversationNameSwitchagp=false;arrowkeyLocation=0" (keydown)="ConversationNameSwitchagp=true"
                  matTooltip="{{apglist.value}}" (keydown.Tab)="Agpclose()">
                <span class="mdi mdi-magnify"></span>
                <div
                  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm  border-right  float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                  *ngIf="ConversationNameSwitchagp"
                  [attr.focus]="leadDetailsForm.value.link && ConversationNameSwitchagp">
                  <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                    <span class="w-100 z-ind-9 float-left bg-white">
                      <ul class=" list-group color-azure  sort-dropdown mr2" role="listbox"
                        [ngClass]="{'loader-search':isAgpLoader}">
                        <li id="{{i}}" tabindex="0" role="option" [class.active]="i==arrowkeyLocation"
                          aria-disabled="false" (click)="appendAgpGroup(item.Name, item,true, arrowkeyLocation)"
                          class="list-group-item " role="option"
                          [ngClass]="service.chatBot ? 'list-DA-cap' : 'list-name'"
                          *ngFor="let item of Conversationsagp ;let i =index">{{item.Name}}
                        </li>
                        <li class="d-block list-name h-40 p-10"
                          *ngIf="(Conversationsagp |filter:leadDetailsForm.value.link)?.length == 0 && !isAgpLoader">
                          No record found </li>
                      </ul>
                    </span>
                  </perfect-scrollbar>
                </div>
              </div>
              <div class="scroll-lead" slimScroll>
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left tagged-box mt-10 p-4-10 mr10"
                  *ngFor="let item of selectedAgp; let i=index">
                  <label for="inti_name" class="float-left name w-94">
                    <span class="d-block color-azure mr10 float-left  ellipses w-100"
                      matTooltip="{{item.Name}}">{{item.Name}}</span>
                  </label>
                  <span role="button" tabindex="0" aria-label="delete"
                    class="mdi mdi-close close-lead float-right cp pos-abs top10" (click)="delinkAgp(item,i)"></span>
                </div>
              </div>
            </div>
            <!--lead   Link AGPs  autocomplete ends-->
          </div>
        </div>
      </div>
    </form>
    <!-- End of lead Details -->
    <!-- Begining of Deal and owner details -->
    <form id="validatescroll" [formGroup]="leadDealOwnerForm">
      <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left first-crd card mt40 margin-btm55 no_pad"
        *ngIf="dealinfo">

        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 card-content float-left pad-create-lead">
          <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
            <h2
              class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad heading-level-three pad-top-8 head-border">
              Lead information </h2>
          </div>
          <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left mt10 plb-60-20 ">
            <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="deal"
              class="label-form">Estimated deal value
              <span class="required"> *</span>
            </label>
            <div class="pos-rel w-100 float-left no_pad">
              <input #dealid decimalNumberOnly (focus)="removeCommas(F.dealName.value)" (blur)="dealValuewithComma(F.dealName.value, true)" matTooltip="{{dealid.value}}"
                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 input-text" id="deal" name="text"
                type="text" autocomplete="off" placeholder="Enter estimated deal value"
                formControlName="dealName" [ngClass]="{'error': F.dealName.touched && F.dealName.invalid}"  aria-required="true">
                <p class="error-message top-40" *ngIf="F.dealName.invalid && (F.dealName.dirty || F.dealName.touched)">

                  <span *ngIf="F.dealName.errors.required"> Enter valid deal value </span>
                  <span *ngIf="F.dealName.errors.dealValueInvalid"> Enter max 10 digit </span>
                  <span *ngIf="F.dealName.errors.InvalidDecimalDealValue"> Enter max 2 digit decimal value </span>
  
                </p>
            </div>
          </div>

          <!--currency Autocomplete-->
          <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mt10">
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName"
              (clickOutside)="Currencyclose()">
              <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="currency"
                class="label-form">
                Currency
                <span class="required"> *</span>
              </label>
              <div class="pos-rel w-100 float-left no_pad">
                <input class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input" #currencyRef
                  id="currencyAttrId" name="currency" formControlName="currency" placeholder="Search currency "
                  type="text" role="combobox" aria-autocomplete="list" aria-owns="read" autocomplete="off"
                  appKeyListControl [dataManipulate]=true [attr.data-selectedvalue]=""  aria-required="true"
                  (arrowDown)="arrowkeyLocation=$event" [attr.data-selectedvalue]="curr" [attr.data-isDownBtn]=true
                  [attr.aria-expanded]="CurrencySwitch?true:false" [attr.aria-activedescendant]="arrowkeyLocation"
                  [attr.data-arrayMaxLength]="CurrencyArrayList?.length"
                  (input)="CurrencySwitch=true;arrowkeyLocation=0"
                  (intialLoadData)="CurrencySwitch=true;callTempCurrency();arrowkeyLocation=curr?-1:0" 
                  (keyup.enter)="arrowkeyLocation=arrowkeyLocation==-1?0:arrowkeyLocation;
                  currencyRef.value=(CurrencyArrayList[arrowkeyLocation].Desc);curr=CurrencyArrayList[arrowkeyLocation].Desc; 
                  appendCurrency((CurrencyArrayList[arrowkeyLocation].Desc),CurrencyArrayList[arrowkeyLocation],true, arrowkeyLocation);
                  CurrencySwitch=false;arrowkeyLocation=0" (keydown)="CurrencySwitch=true"
                  matTooltip="{{currencyRef.value}}" (keydown.Tab)="Currencyclose()"
                  [ngClass]="{'error': F.currency.invalid && (F.currency.dirty || F.currency.touched)}">
                <p *ngIf="F.currency.touched && !F.currency.valid" class="error-message top-40"> Search currency
                </p>
                <span class="mdi mdi-magnify" *ngIf="CurrencySwitch || currencyName ==''"></span>
                      <span class="mdi mdi-close auto-close"
                       (click)="clearCuurencyName();arrowkeyLocation=0;currencyName=''"
                        *ngIf="!CurrencySwitch && currencyId!==''"></span>
              </div>

              <div
                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm  border-right  float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                *ngIf="CurrencySwitch" [attr.focus]="leadDealOwnerForm.value.currency && CurrencySwitch">
                <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                  <span class="w-100 z-ind-9 float-left bg-white">
                    <ul class=" list-group color-azure  sort-dropdown mr2" role="listbox" id="read"
                      [ngClass]="{'loader-search':isCurrencySearchLoading }">
                      <li id="{{i}}" tabindex="0" role="option" class="list-group-item "
                        [ngClass]="service.chatBot ? 'list-DA-cap' : 'list-name'"
                        (click)="currencyRef.value=(item.Desc);curr=(item.Desc);appendCurrency((item.Desc), item,true, arrowkeyLocation)"
                        *ngFor="let item of CurrencyArrayList;let i = index" [class.active]="i==arrowkeyLocation"
                        aria-disabled="false" matTooltip="{{(item.Desc)}}"> {{(item.Desc)}}</li>
                      <li class="d-block list-name h-40 p-10"
                        *ngIf="(CurrencyArrayList |filter:leadDealOwnerForm.value.currency)?.length == 0 && !isCurrencySearchLoading">
                        No record found </li>
                    </ul>
                  </span>
                </perfect-scrollbar>
              </div>
            </div>
          </div>

          <!--currency Autocomplete-->
          <!--datepicker starts-->
          <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left plb-60-20 mt11">
            <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad label-form"
              for="calStart">Estimated closure date
              <span class="required">*</span>
            </label>
            <div class=" col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad pos-rel">
              <div class="col-12 col-lg-12 col-sm-12 col-md-12 float-left no_pad cal_brdr">
                <div class="col-12 col-lg-12 col-sm-12 col-md-12 float-left no_pad cust_calan">
                  <div class="pos-rel w-100 float-left no_pad">
                    <input #closuredate class="col-12 col-lg-12 col-sm-12 col-md-12 float-left h-40" id="calStart"
                      matTooltip="{{closuredate.value}}" [min]="StartDate" [max]="sixMonthDate" (click)="picker3.open()"
                      (keypress)="picker3.open()" [matDatepicker]="picker3" readonly title="DD-MMM-YYYY"
                      placeholder="DD-MMM-YYYY" aria-required="true" formControlName="timeline"
                      [ngClass]="{'error': F.timeline.invalid && (F.timeline.dirty || F.timeline.touched)}">
                    <p *ngIf="F.timeline.touched && !F.timeline.valid" class="error-message top-40"> Select lead
                      timelime </p>
                  </div>
                  <mat-datepicker-toggle matSuffix [for]="picker3">
                    <span class="mdi mdi-calendar-blank float-right no_pad" matDatepickerToggleIcon></span>
                  </mat-datepicker-toggle>
                  <mat-datepicker #picker3></mat-datepicker>
                </div>
              </div>
            </div>
          </div>
          <!--datepicker ends-->
          <!--customer contacts auto complete starts-->
          <div
            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-4 float-left plb-60-20 mt10 cust_autoComplete pos-rel">
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName">
              <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="custcontact"
                class="label-form">
                Customer contacts
                <span class="required">*</span>
                <span class="float-right pos-abs right-0">({{selectedCustomer?.length}})</span>
              </label>
              <div class="pos-rel w-100 float-left no_pad">
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad d-flex">
                  <button [attr.disabled]="disableContacts?'disabled':null" type="button"
                    class="col-2 col-sm-2 col-md-2 col-lg-2 col-xl-2 float-left add-btn cp " aria-label="Add"
                    (click)="AddCustomerContact()" matTooltip="Create contact for the given Account">
                    + </button>
                  <input
                    class="col-10 col-sm-10 col-md-10 col-lg-10 col-xl-10 float-left input-border-left h-40 label-input br-0-4 customer-contact-wid"
                    #contactList id="custcontact" name="customerName" formControlName="customerContact"
                    placeholder="Search customer contacts" type="text" role="combobox" aria-autocomplete="list"
                    autocomplete="off" aria-owns="read" appKeyListControl [dataManipulate]=true
                    [attr.data-isDownBtn]=true [attr.data-selectedvalue]="" (arrowDown)="arrowkeyLocation=$event"
                    [attr.aria-expanded]="customerNameSwitch?true:false" [attr.aria-activedescendant]="arrowkeyLocation"
                    [attr.data-arrayMaxLength]="customerContactdetails?.length"
                    [attr.disabled]="disableContacts?'disabled':null"
                    (input)="customerNameSwitch=true;arrowkeyLocation=0"
                    (intialLoadData)="customerNameSwitch=true;callTempContact();arrowkeyLocation=0" (keyup.enter)="contactList.value=customerContactdetails[arrowkeyLocation].Name;
                  appendCustomerGroup(customerContactdetails[arrowkeyLocation].Name,customerContactdetails[arrowkeyLocation],true,true, arrowkeyLocation);
                  customerNameSwitch=false;arrowkeyLocation=0" (keydown)="customerNameSwitch=true"
                    (keydown.Tab)="customerNameclose()" (clickOutside)="customerNameclose()"
                    matTooltip="{{contactList.value}}"  aria-required="true"
                    [ngClass]="{'error': F.customerContact.invalid && F.customerContact.touched}">
                  <span class="mdi mdi-magnify"></span>
                  <p *ngIf="F.customerContact.touched && !F.customerContact.valid  && F.customerContact.touched"
                    class="error-message top-40">
                    Search customer contacts </p>
                </div>
              </div>
              <div
                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm  float-left no_pad suggestion-box pos-abs border-bottom-4 top64 standard-border color-azure z-ind-9"
                *ngIf="customerNameSwitch "
                [attr.focus]="leadDealOwnerForm.value.customerContact && customerNameSwitch ">

                <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                  <span class="w-100 z-ind-9 float-left bg-white">
                    <ul class=" list-group mr2 sort-dropdown" role="listbox"
                      [ngClass]="{'loader-search':isCustometContactLoader}">
                      <li id="{{i}}" tabindex="0" role="option" [class.active]="i==arrowkeyLocation"
                        aria-disabled="false"
                        (click)="appendCustomerGroup(item.FullName, item,true,true, arrowkeyLocation)"
                        class="list-group-item h-50 p-4-10 " *ngFor="let item of customerContactdetails;let i=index">
                        <div class="float-left naming-tags child-middle bg-azure">
                          <span class="initials">{{wiproSolutionData(item.FullName) | firstWord | uppercase}}</span>
                        </div>
                        <label for="inti_name" class="float-left name "
                          [ngClass]="item.isKeyContact===true?'wid-55':'w-80'">
                          <span class="d-block ellipses" [ngClass]="item.isKeyContact?'list-name-btnkey':'list-name'"
                            matTooltip="{{item.FullName}}">{{item.FullName}}</span>
                            <span class="d-block ellipses" >{{item.Email}}</span>
                        </label>
                        <span class="btn-key" *ngIf="item.isKeyContact===true"> Key </span>
                      </li>
                      <li class="d-block list-name h-40 p-10"
                        *ngIf="(customerContactdetails |filter:leadDealOwnerForm.value.customerContact)?.length == 0 && !isCustometContactLoader">
                        No record found </li>
                    </ul>
                  </span>
                </perfect-scrollbar>
                <span class="db-search"
                  (click)="openadvancetabs('contactSearch',customerAdvanceData, F.customerContact.value)">
                  <button id="{{customerAdvanceData?.length+1}}" role="option" tabindex="0" aria-disabled="false"
                    type="button" class="button-search"
                    [class.active]="customerAdvanceData?.length+1 == arrowkeyLocation">
                    <span class="mdi mdi-file-outline"></span> Advance look up
                  </button>
                </span>
              </div>
            </div>
            <perfect-scrollbar style="max-height:200px;">
              <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad selected-contact">
                <div
                  class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  mt-10 no_pad pad-10-lead mar-top10"
                  *ngFor="let item of selectedCustomer">
                  <div class="float-left naming-tags child-middle bg-azure">
                    <span class="initials">{{wiproSolutionData(item.FullName) | firstWord | uppercase}}</span>
                  </div>
                  <label for="inti_name" class="float-left name  designation-sub"
                    [ngClass]="item.isKeyContact===true?'wid-55':'w-80'">
                    <span class="d-block  ellipses" [ngClass]="item.isKeyContact?'list-name-btnkey':'list-name'"
                      matTooltip="{{item.FullName}}">{{item.FullName}}</span>
                      <span class="d-block ellipses" >{{item.Email}}</span>
                  </label>
                  <span class="btn-key" *ngIf="item.isKeyContact===true "> Key </span>
                  <span class="mdi mdi-close close-lead float-right cp mr13"
                    (click)="delinkCustomerContacts(item)"></span>
                </div>
              </div>
            </perfect-scrollbar>
          </div>
          <!--customer contacts auto complete ends-->
        </div>

      </div>
      <!-- <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left card margin-btm60 mt20 margin-btm55 no_pad mag-btm-200"
        *ngIf="dealinfo">
        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left pad-create-lead">
          <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 card-content float-left no_pad">
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad">
              <h2
                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad heading-level-three pad-top-8 head-border">
                Owner details </h2>
            </div>
       
            
          </div>
        </div>
      </div> -->
    </form>
  </div>
  <div class="float-left col-12 no_pad mobile-buttons" *ngIf="leadinfo">
    <button type="button" class="col-6 no_pad float-left cancel-btn" (click)="opencancelpop()">Cancel</button>
    <button type="button" class="col-6 no_pad float-left save-btn" [disabled]="clicked"
      (click)="CreateLeadNext()">Next</button>
  </div>
  <div class="float-left col-12 no_pad mobile-buttons" *ngIf="dealinfo">
    <button type="button" class="col-6 no_pad float-left cancel-btn" (click)="opencancelpop()">Cancel</button>
    <button type="button" class="col-6 no_pad float-left save-btn" [disabled]="clicked"
      (click)="onSubmit()">Create</button>
  </div>
</div>