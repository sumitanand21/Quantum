<ng-container *ngIf="isLoading">
    <div class="col-12 float-left complex_table unqualified-padding pt0 no_pad">
        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 no_pad leads-archived-landing">
            <div class="col-lg-12 col-sm-12 col-md-12 col-12 no_pad">
                <div class="loaderContainer">
                    <div class="loader"></div>
                </div>
            </div>
        </div>
    </div>
</ng-container>

<div class="top-header" [ngClass]="service.header?'navbar-sticky-top':'navbar-fixed-top'"
    *ngIf="router.url.includes('/deals/createNewAction')">
    <app-nav></app-nav>
    <div class="float-left col-12 header-action-tab create-newAction-container" *ngIf="!editActionId">
        <div class="col-12 col-sm-8 col-md-8 col-lg-8 col-xl-8 float-left no_pad">
            <h1 class="heading-level-one">
                <span class="mdi mdi-arrow-left cp mr10" [routerLink]="['/deals/existingTabs/calendar']"></span>
                Create new action
            </h1>
        </div>

        <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4 float-left no_pad">
            <div class="float-right disp-flex save-cancel-responsive">
                <button class="primary-button secondary-btn btn-block h-40 mr10 std cancel-responsived-btn button-wd50"
                    [routerLink]="['/deals/existingTabs/calendar']" (click)="clearFormAutoData()">Cancel</button>
                <button class="primary-button borderless h-40 std save-responsive-btn button-wd50"
                    (click)="onCreateAction()">Create</button>
            </div>
        </div>
    </div>
    <div class="float-left col-12 header-action-tab new-container" *ngIf="editActionId">
        <div class="col-12 col-sm-8 col-md-8 col-lg-8 col-xl-8 no_pad float-left">
            <h1 class="float-left heading-level-one mb-0" title="Deal name">
                <span class="mdi mdi-arrow-left cp mr10" [routerLink]="['/deals/existingTabs/calendar']"></span>
                {{actionName}}
            </h1>
        </div>
        <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4 float-left no_pad">
            <div class="float-right disp-flex save-cancel-responsive">
                <button class="primary-button borderless h-40 std save-responsive-btn button-wd50" (click)="onSubmit()"
                    [hidden]="!rollAccess">Save</button>
            </div>
        </div>
    </div>
</div>

<div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad create-newAction-container "
    [ngClass]="router.url.includes('/deals/createNewAction') ? 'mar-top-65' : ''" *ngIf="rollAccess">
    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad pos-abs bg-mid_night h-180 "
        *ngIf="router.url.includes('/deals/createNewAction')">
    </div>
    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left"
        [ngClass]="router.url.includes('/deals/createNewAction') ? 'pad-30' : 'no_pad'">
        <!-- <p>(ngSubmit)="onSubmit()"</p> -->
        <form [formGroup]="createAction" enctype="multipart/form-data">
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left card margin-btm55 no_pad  mt40">
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 card-content float-left pad-30 ">
                    <div class="col-12 float-left no_pad customized-input customized-margin-tracker">
                        <!-- Select DROPDOWN STARTS -->
                        <div class="col-12 col-sm-12 col-md-6 col-lg-4 float-left plb-60-20 mobile-select-box">

                            <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="dealA1"
                                class="label-form"> Action type
                                <span class="required"> *</span>
                            </label>
                            <div class="customized-select">
                                <span class="caret color-azure"></span>
                                <select id="dealA1" role="listbox" formControlName="actionType"
                                    (change)="autoSaveFormData()">
                                    <option [value]="">Select action type</option>
                                    <option [value]="type.Id" *ngFor="let type of actionType">{{type.Name}}</option>
                                </select>
                            </div>
                        </div>

                        <div class="col-12 col-sm-12 col-md-6 col-lg-4 float-left plb-60-20 web-select-box">
                            <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="dealA1"
                                class="label-form"> Action type
                                <span class="required"> *</span>
                            </label>
                            <mat-form-field class="col-12 no_pad float-left">
                                <mat-label>Select action type</mat-label>
                                <mat-select id="dealA1" formControlName="actionType" disableOptionCentering
                                    panelClass="Select-panel-class" class="select-focus"
                                    aria-label="{{selectactionType}}" (selectionChange)="autoSaveFormData()"
                                    aria-required="true" (selectionChange)="appendActionType($event.value)" required>
                                    <mat-option [value]="">Select action type</mat-option>
                                    <mat-option *ngFor="let type of actionType" [value]="type.Id"
                                        matTooltip="{{type.Name}}">
                                        {{type.Name}}
                                    </mat-option>
                                </mat-select>
                                <p *ngIf="this.createAction.controls['actionType'].touched && !this.createAction.controls['actionType'].valid"
                                    class="error-message top-40"> Please select action type</p>
                            </mat-form-field>
                        </div>

                        <div class="col-12 col-sm-12 col-md-6 col-lg-4 plb-60-20 float-left ">
                            <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="dealA2"
                                class="label-form"> Action name
                                <span class="required"> *</span>
                            </label>
                            <div class="customized-select">
                                <!-- <span class="caret color-azure"></span> -->
                                <input class="border-gray w-100" type="text" (keydown)="autoSaveFormData()"
                                    formControlName="actionName" aria-required="true" placeholder="Enter action name">
                                <p *ngIf="this.createAction.controls['actionName'].touched && !this.createAction.controls['actionName'].valid"
                                    class="error-message top-40"> Please enter action name</p>
                            </div>
                        </div>

                        <div class="col-12 col-sm-12 col-md-6 col-lg-4 float-left plb-60-20 mobile-select-box">
                            <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="dealA2"
                                class="label-form"> Module
                                <!-- <span class="required"> *</span> -->
                            </label>
                            <div class="customized-select">
                                <span class="caret color-azure"></span>
                                <select id="dealA2" role="listbox" formControlName="actionModule"
                                    (change)="autoSaveFormData()" (change)="moduleMethod($event.target.value)">
                                    <option value="">Select module</option>
                                    <option [value]="module.ModuleId" *ngFor="let module of actionModule">
                                        {{module.ModuleName}}
                                    </option>
                                </select>
                            </div>
                        </div>

                        <div class="col-12 col-sm-12 col-md-6 col-lg-4 float-left web-select-box plb-60-20">
                            <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad" for="moD"
                                class="label-form"> Module
                            </label>
                            <mat-form-field class="col-12 no_pad float-left">
                                <mat-label>Select module</mat-label>
                                <mat-select id="moD" formControlName="actionModule"
                                    (selectionChange)="autoSaveFormData()" disableOptionCentering
                                    panelClass="Select-panel-class" aria-label="{{appendmoduleType}}"
                                    (selectionChange)="appendModuleType($event.value)" class="select-focus">
                                    <mat-option [value]="">Select module</mat-option>
                                    <mat-option *ngFor="let module of actionModule" [value]="module.ModuleId"
                                        (click)="moduleMethod(module.ModuleId)">
                                        {{module.ModuleName}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <!--autocomplete action owner starts-->
                        <div
                            class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left  cust_autoComplete pos-rel plb-60-20 mar-create-deal">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName">
                                <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                                    for="Actions" class="label-form">
                                    Action owner
                                </label>
                                <input
                                appKeyListControl
                                #actionlist
                                (arrowDown)="arrowkeyLocation=$event" 
                                (keyup.enter)="actionlist.value=Actions[arrowkeyLocation].contact;selOwnerName=Actions[arrowkeyLocation].contact; appendAction(Actions[arrowkeyLocation],arrowkeyLocation);ActionOwnerSwitch=false;arrowkeyLocation=0;"
                                [attr.data-arrayMaxLength]="Actions?.length" 
                                [attr.data-isDownBtn]=true 
                                type="text" 
                                role="combobox" 
                                aria-autocomplete="list" 
                                [attr.aria-expanded]="ActionOwnerSwitch?true:false" 
                                aria-owns="read" 
                                [attr.aria-activedescendant]="arrowkeyLocation"
                                autocomplete="false" 
                                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                                id="Actions" 
                                name="Actions" 
                                (intialLoadData)="userSearchMethod($event,1);ActionOwnerSwitch = true"
                                placeholder="Enter owner name"
                                formControlName="actionOwner" 
                                maxlength=250 
                                (keydown.Tab)="ActionOwnerclose()" 
                                (keydown.shift.Tab)="ActionOwnerclose()"  
                                (clickOutside)="ActionOwnerclose()"
                                [dataManipulate]="true" 
                                (input)="ActionOwnerSwitch = true ; userSearchMethod($event,1)" 
                                [attr.data-selectedvalue]="selOwnerName"
                                matTooltip="{{actionlist.value}}" 
                                [attr.aria-label]="'Parents name edit selected ' + selOwnerName "
                                (keypress)="autoSaveFormData()">

                                <span class="mdi mdi-magnify"></span>
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm  border-right  float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                                    *ngIf="ActionOwnerSwitch"
                                    [attr.focus]="ActionOwnerSwitch">
                                    <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                                        <span class="w-100 z-ind-9 float-left bg-white">
                                            <ul class=" list-group color-azure  sort-dropdown mr2" role="listbox"
                                                id="read" [ngClass]="{'loader-search':isDealOwnersSearchLoading }">
                                                <li id="{{i}}" tabindex="0" role="option"
                                                    class="list-group-item list-name"
                                                    (click)="actionlist.value=item.contact;appendAction(item)"
                                                    *ngFor="let item of Actions |filter:createAction.value.actionOwner;let i = index;"
                                                    [class.active]="i==arrowkeyLocation" aria-disabled="false" matTooltip="{{item.contact}}">
                                                    {{item.contact}}
                                                </li>

                                                <li class="d-block list-name h-40 p-10"
                                                    *ngIf="(Actions |filter:createAction.value.actionOwner).length == 0 && !isDealOwnersSearchLoading">
                                                    No
                                                    record found
                                                </li>
                                            </ul>
                                        </span>
                                    </perfect-scrollbar>
                                </div>
                            </div>
                        </div>
                        <!--autocomplete action owner ends-->
                        <div
                            class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-4 float-left plb-60-20 pb21 mar-create-deal">
                            <label
                                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left label-form no_pad mb5"
                                for="calStart">Planned start date
                                <span class="required"> *</span>
                            </label>

                            <div class="pos-rel">
                                <div class="col-12 col-lg-12 col-sm-12 col-md-12 float-left no_pad cal_brdr">
                                    <div
                                        class="col-12 col-lg-12 col-sm-12 col-md-12 float-left no_pad cust_calan customized-input">
                                        <input class="col-12 col-lg-12 col-sm-12 col-md-12 float-left " id="calStart"
                                            (dateChange)="checkDates()" readonly (click)="picker.open()"
                                            (keypress)="picker.open()" [matDatepicker]="picker" title="DD/MMM/YYYY"
                                            placeholder="DD-MMM-YYYY" formControlName="startDate" aria-required="true"
                                            (dateChange)="autoSaveFormData()">
                                        <mat-datepicker-toggle matSuffix [for]="picker">
                                            <span class="mdi mdi-calendar-blank float-right no_pad"
                                                (click)="picker.open()" matDatepickerToggleIcon></span>
                                        </mat-datepicker-toggle>
                                        <mat-datepicker #picker></mat-datepicker>
                                        <p *ngIf="this.createAction.controls['startDate'].touched && !this.createAction.controls['startDate'].valid"
                                            class="error-message top-40"> Please select start date</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div
                            class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-4 float-left plb-60-20 pb21 mar-create-deal">
                            <label
                                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left label-form no_pad mb5"
                                for="calEnd">Planned end date
                                <span class="required"> *</span>
                            </label>
                            <div class="pos-rel">
                                <div class="col-12 col-lg-12 col-sm-12 col-md-12 float-left no_pad cal_brdr">
                                    <div
                                        class="col-12 col-lg-12 col-sm-12 col-md-12 float-left no_pad cust_calan customized-input">
                                        <input class="col-12 col-lg-12 col-sm-12 col-md-12 float-left " id="calEnd"
                                            (click)="picker2.open()" [min]="minDate" (keypress)="picker2.open()"
                                            (dateChange)="checkDates()" readonly [matDatepicker]="picker2"
                                            title="DD/MMM/YYYY" placeholder="DD-MMM-YYYY" formControlName="endDate"
                                            aria-required="true" (dateChange)="autoSaveFormData()">
                                        <mat-datepicker-toggle matSuffix [for]="picker2">
                                            <span class="mdi mdi-calendar-blank float-right no_pad"
                                                (click)="picker2.open()" matDatepickerToggleIcon></span>
                                        </mat-datepicker-toggle>
                                        <mat-datepicker #picker2></mat-datepicker>
                                        <p *ngIf="this.createAction.controls['endDate'].touched && !this.createAction.controls['endDate'].valid && !checkDate"
                                            class="error-message top-40"> Please select end date
                                        </p>
                                        <p *ngIf="checkDate" class="error-message top-40"> End date should be greater than start date </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- datepicker ends -->

                        <div class="float-left col-12 no_pad">
                            <div
                                class="float-left col-12 col-sm-12 col-md-12 col-lg-4 col-xl-4 no_pad customized-margin-tracker">
                                <!--autocomplete Escalation contact starts-->
                                <div
                                    class="col-12 col-sm-12 col-md-6 col-lg-12 col-xl-12 float-left  cust_autoComplete pos-rel mar-create-deal plb-60-20">
                                    <div  (clickOutside)="Escalationclose()"
                                        class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName">
                                        <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                                            for="Escalation" class="label-form">
                                            Escalation contact
                                        </label>
                                        <input 
                                            appKeyListControl
                                            #escalation
                                            (arrowDown)="arrowkeyLocation=$event" 
                                            (keyup.enter)="escalation.value=Escalations[arrowkeyLocation].contact;selEscalationcontact=Escalations[arrowkeyLocation].contact; appendEscalation(Escalations[arrowkeyLocation],arrowkeyLocation);EscalationSwitch=false;arrowkeyLocation=0;"
                                            [attr.data-arrayMaxLength]="Escalations?.length" 
                                            [attr.data-isDownBtn]=true 
                                            type="text" 
                                            role="combobox" 
                                            aria-autocomplete="list" 
                                            [attr.aria-expanded]="EscalationSwitch?true:false" 
                                            aria-owns="read" 
                                            [attr.aria-activedescendant]="arrowkeyLocation"
                                            autocomplete="false" 
                                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                                            id="Escalation" 
                                            name="Escalation" 
                                            (intialLoadData)="EscalationSwitch = true;userSearchMethod($event,2);arrowkeyLocation=0"
                                            placeholder="Enter escalation contact"
                                            formControlName="escalationcontact" 
                                            maxlength=250 
                                            (keydown.Tab)="Escalationclose()" 
                                            (keydown.shift.Tab)="Escalationclose()"  
                                            [dataManipulate]="true" 
                                            (input)="EscalationSwitch = true ; userSearchMethod($event,2)" 
                                            [attr.data-selectedvalue]="selEscalationcontact"
                                            matTooltip="{{escalation.value}}" 
                                            [attr.aria-label]="'Escalation contact name edit selected ' + selEscalationcontact">

                                        <span class="mdi mdi-magnify" *ngIf="escalation.value == ''"></span>
                                        <span class="mdi mdi-close auto-close" (click)="clearEsclations();arrowkeyLocation=0;escalationcontact=''"
                                        *ngIf="!EscalationSwitch && escalation.value !== ''">
                                            <!-- (click)="clearEsclations();arrowkeyLocation=0;escalationcontact=''"
                                        *ngIf="!EscalationSwitch && activityGroupId!==''" -->
                                        </span>

                                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm  border-right  float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                                            *ngIf="EscalationSwitch"
                                            [attr.focus]="EscalationSwitch">
                                            <!-- createAction.value.escalationcontact -->
                                            <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                                                <span class="w-100 z-ind-9 float-left bg-white">
                                                    <ul class=" list-group color-azure  sort-dropdown mr2" role="listbox" id="read"
                                                        [ngClass]="{'loader-search':isDealOwnersSearchLoading }">
                                                        <li *ngFor="let item of Escalations;let i = index"
                                                         id="{{i}}" tabindex="0" role="option" class="list-group-item list-name"
                                                            (click)="selEscalationcontact=item.contact;escalation.value =item.contact; appendEscalation(item,0)"
                                                            [class.active]="i == arrowkeyLocation" matTooltip="{{item.contact}}">
                                                            {{item.contact}}
                                                        </li>
                                                        <li class="d-block list-name h-40 p-10"
                                                            *ngIf="Escalations?.length == 0 && !isDealOwnersSearchLoading">
                                                            No record found 
                                                        </li>
                                                    </ul>
                                                </span>
                                            </perfect-scrollbar>
                                        </div>
                                    </div>
                                </div>
                                <!--autocomplete Escalation contact ends-->
                                <div
                                    class="col-12 col-sm-12 col-md-6 col-lg-12 col-xl-12 float-left mar-create-deal plb-60-20">
                                    <label for="description" class="col-6 float-left no_pad label-form ">Description
                                    </label>
                                    <textarea id="description" rows="4" (keydown)="autoSaveFormData()"
                                        class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  text-area-content"
                                        placeholder="Please enter the Customer Strategic Initiative description"
                                        formControlName="description">
                                    </textarea>
                                </div>
                            </div>
                            <div
                                class="float-left col-12 col-sm-12 col-md-12 col-lg-8 col-xl-8 no_pad customized-margin-tracker">
                                <div class="col-12 col-sm-12 col-md-6 col-lg-6 float-left mar-create-deal plb-60-20"
                                    *ngIf="sendActionFields">
                                    <!-- *ngIf="sendActionFields" -->
                                    <label for="approval" class="label-form w-100">Is approval required?
                                        <span class="required"> *</span>
                                    </label>

                                    <div class="col-12 padbox-10-60-10 float-left no_pad pt10">
                                        <mat-radio-group aria-label="Select an option" id="approval"
                                            formControlName="approval">
                                            <mat-radio-button (click)="checkApproval(1)" [value]="true" class="mr20"
                                                checked>Yes</mat-radio-button>
                                            <mat-radio-button (click)="checkApproval(0)" [value]="false" class="mr20">No
                                            </mat-radio-button>
                                        </mat-radio-group>
                                    </div>
                                </div>
                                <!--autocomplete Approvar starts-->
                                <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left  cust_autoComplete pos-rel mar-create-deal plb-60-20"
                                    *ngIf="sendActionFields">
                                    <!-- *ngIf="sendActionFields" -->
                                    <div for
                                        class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName">
                                        <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                                            for="Escalation" class="label-form">
                                            Select approver
                                        </label>
                                        <div class="col-12 float-left no_pad">
                                            <input
                                                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                                                id="approvar" name="approvar" (click)="ApprovarSwitch = true"
                                                autocomplete="off" type="text" for placeholder="Enter conversation name"
                                                (clickOutside)="ApprovarSwitch = false" (keyup)="userSearchMembers(2)"
                                                formControlName="approvar">
                                            <span class="mdi mdi-magnify"></span>
                                            <p *ngIf="this.createAction.controls['approvar'].touched && !this.createAction.controls['approvar'].valid"
                                                class="error-message top-40"> Please select the approver</p>
                                            <p *ngIf="approvarCheck" class="error-message top-40"> Please select the
                                                approver</p>
                                        </div>
                                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-btm  border-right  float-left top64 no_pad standard-border color-azure suggestion-box pos-abs z-ind-99 white-bg"
                                            *ngIf="createAction.value.approvar && ApprovarSwitch">
                                            <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                                                <span class="w-100 z-ind-9 float-left bg-white">
                                                    <ul class=" list-group color-azure  sort-dropdown mr2">
                                                        <li class="list-group-item list-name"
                                                            (click)="appendApprovar(item)"
                                                            *ngFor="let item of approvarArr |filter:createAction.value.approvar">
                                                            {{item.contact}}</li>

                                                        <li class="d-block list-name h-40 p-10"
                                                            *ngIf="(approvarArr |filter:createAction.value.approvar).length == 0 !isDealOwnersSearchLoading">
                                                            No record found </li>
                                                    </ul>
                                                </span>
                                            </perfect-scrollbar>
                                        </div>
                                    </div>
                                </div>
                                <!--autocomplete Approvar ends-->
                                <div
                                    class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left  mar-create-deal plb-60-20">
                                    <div
                                        class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left no_pad cust_autoComplete pos-rel">
                                        <div (clickOutside)="dependentSwitch = false"
                                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName">
                                            <label
                                                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                                                for="dependent" class="label-form">Dependency on
                                            </label>
                                            <input 
                                                appKeyListControl
                                                (arrowDown)="arrowkeyLocation=$event" 
                                                (keyup.enter)="appenddependent(dependentArr[arrowkeyLocation],arrowkeyLocation);dependentSwitch=false;arrowkeyLocation=0;"
                                                [attr.data-arrayMaxLength]="dependentArr?.length" 
                                                [attr.data-isDownBtn]=true 
                                                type="text" 
                                                role="combobox" 
                                                aria-autocomplete="list" 
                                                [attr.aria-expanded]="dependentSwitch?true:false" 
                                                aria-owns="read" 
                                                [attr.aria-activedescendant]="arrowkeyLocation"
                                                autocomplete="false" 
                                                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                                                id="dependent" 
                                                name="dependent" 
                                                (intialLoadData)="dependentSwitch = true;dependentSearchMethod($event);arrowkeyLocation=0"
                                                placeholder="Link potential wipro solutions"
                                                formControlName="actiondependent" 
                                                maxlength=250 
                                                (keydown.Tab)="dependentclose()" 
                                                (keydown.shift.Tab)="dependentclose()"  
                                                [dataManipulate]="true" 
                                                (input)="dependentSwitch = true;dependentSearchMethod($event)">
                                                <!-- (keyup)="dependentSearchMethod($event)"
                                                [attr.data-selectedvalue]="selEscalationcontact" -->
                                            <span class="mdi mdi-magnify"></span>
                                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-right  border-btm z-ind-9999 float-left no_pad suggestion-box pos-abs border-bottom-4 top64 standard-border color-azure z-ind-9 bg-white"
                                                *ngIf="dependentSwitch" [attr.focus]="dependentSwitch">
                                                <!-- createAction.value.actiondependent && -->
                                                <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                                                    <span class="w-100 z-ind-9 float-left bg-white">
                                                        <ul class=" list-group mr2  sort-dropdown" role="listbox"
                                                            id="read"
                                                            [ngClass]="{'loader-search':isDealOwnersSearchLoading }">
                                                            <li class="list-group-item h-50 p-4-10 " role="option" tabindex="0" 
                                                                (click)="appenddependent(item); dependentSwitch = false" [class.active]="i == arrowkeyLocation"
                                                                *ngFor="let item of dependentArr|filter:createAction.value.actiondependent ; let i=index" id="{{i}}">
                                                                <label for="inti_name" class="float-left name w-80">
                                                                    <span
                                                                        class="d-block list-name ellipses">{{item.contact}}</span>
                                                                    <span
                                                                        class="d-block sub-list">{{item.designation}}</span>
                                                                </label>

                                                            </li>
                                                            <li class="d-block list-name h-40 p-10"
                                                                *ngIf="(dependentArr |filter:createAction.value.actiondependent).length == 0 && !isDealOwnersSearchLoading">
                                                                No record found </li>
                                                        </ul>
                                                    </span>
                                                </perfect-scrollbar>
                                            </div>
                                        </div>
                                        <div
                                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad selected-contact selected-tags">
                                            <perfect-scrollbar style="max-height:300px">
                                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left tagged-box mt-10 p-4-10 mr10  d-flex"
                                                    *ngFor="let item of selecteddependent;let i = index">
                                                    <label for="inti_name" class="float-left name w-94">
                                                        <span
                                                            class="d-block color-azure mr10 float-left ellipses w-100">
                                                            {{item.Name}}</span>
                                                    </label>
                                                    <span role="button" tabindex="0" aria-label="delete"
                                                        class="mdi mdi-close close-lead float-right cp"
                                                        (click)="deleteMethod(item)"></span>
                                                </div>
                                            </perfect-scrollbar>
                                        </div>
                                    </div>
                                </div>
                                <div
                                    class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left  mar-create-deal plb-60-20">
                                    <div
                                        class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12  float-left no_pad cust_autoComplete pos-rel">
                                        <div (clickOutside)="membersSwitch = false"
                                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad CompanyName">
                                            <label
                                                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad"
                                                for="members" class="label-form">Add members
                                            </label>
                                            <input 
                                                appKeyListControl
                                                (arrowDown)="arrowkeyLocation=$event" 
                                                (keyup.enter)="appendmembers(membersArr[arrowkeyLocation],arrowkeyLocation);membersSwitch=false;arrowkeyLocation=0;"
                                                [attr.data-arrayMaxLength]="membersArr?.length" 
                                                [attr.data-isDownBtn]=true 
                                                type="text" 
                                                role="combobox" 
                                                aria-autocomplete="list" 
                                                [attr.aria-expanded]="membersSwitch?true:false" 
                                                aria-owns="read" 
                                                [attr.aria-activedescendant]="arrowkeyLocation"
                                                autocomplete="false" 
                                                class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left  h-40 label-input"
                                                id="members" 
                                                name="members" 
                                                (intialLoadData)="membersSwitch = true;userSearchMethod($event,3);arrowkeyLocation=0"
                                                placeholder="Add members"
                                                formControlName="member" 
                                                maxlength=250 
                                                (keydown.Tab)="membersclose()" 
                                                (keydown.shift.Tab)="membersclose()"  
                                                [dataManipulate]="true" 
                                                (input)="membersSwitch = true;userSearchMethod($event,3)">

                                            <span class="mdi mdi-magnify"></span>
                                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 border-right  border-btm z-ind-9999 float-left no_pad suggestion-box pos-abs border-bottom-4 top64 standard-border color-azure z-ind-9 bg-white"
                                                *ngIf="membersSwitch" [attr.focus]="membersSwitch">
                                                <perfect-scrollbar style="max-height:160px" class="z-ind-9">
                                                    <span class="w-100 z-ind-9 float-left bg-white">
                                                        <ul class=" list-group mr2  sort-dropdown"
                                                            [ngClass]="{'loader-search':isDealOwnersSearchLoading }">
                                                            <li class="list-group-item h-50 p-4-10 " tabindex="0" role='option'
                                                                (click)="appendmembers(item);membersSwitch = false" [class.active]="i == arrowkeyLocation"
                                                                *ngFor="let item of membersArr;let i=index" id="{{i}}">

                                                                <label for="inti_name" class="float-left name w-80">
                                                                    <span
                                                                        class="d-block list-name ellipses">{{item.contact}}</span>
                                                                    <span
                                                                        class="d-block sub-list">{{item.designation}}</span>
                                                                </label>
                                                                <span class="btn-key" *ngIf="item.value"> Key </span>
                                                            </li>
             
                                                            <li class="d-block list-name h-40 p-10"
                                                                *ngIf="membersArr?.length == 0 && !isDealOwnersSearchLoading">
                                                                No record found </li>
                                                        </ul>
                                                    </span>
                                                </perfect-scrollbar>
                                            </div>
                                        </div>
                                        <div
                                            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left no_pad selected-contact selected-tags">
                                            <perfect-scrollbar style="max-height:200px">
                                                <div class="float-left p-4-10 main-details"
                                                    *ngFor="let item of selectedmembers;let i=index">
                                                    <!-- <div class="float-left naming-tags child-middle bg-azure">
                                                    <span class="initials">{{item.initials}}</span>
                                                </div> -->
                                                    <label for="inti_name" class="float-left name">
                                                        <span
                                                            class="d-block color-azure mr10 float-left ellipses w-100">{{item.FullName}}({{item.domain}})</span>
                                                    </label>
                                                    <span role="button" tabindex="0" aria-label="delete"
                                                        class="mdi mdi-close close-lead float-right cp"
                                                        (click)="deleteMember(item)"></span>
                                                </div>
                                            </perfect-scrollbar>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 float-left no_pad">
                        <div class="col-8 float-left no_pad">
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>